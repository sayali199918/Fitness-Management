$(function () {
    $('.selectpicker').selectpicker();

    $(document).on('hide.bs.modal', '#FeedsModal', function () {
        $("#FeedsModal").empty();
    });

    $(document).on('shown.bs.modal', '.ExamModal, .AssignmentModal, .interactionModal, .handsonModal', function () {
        $('.selectpicker').selectpicker();
        $('#loader-indicator').hide();
    });
    
    $(document).on('mouseenter', '.menuSlider',function () {

        $(this).find('.show-toggleMenu').addClass('showToggleMenu');
    });
	
    $(document).on('mouseleave', '.menuSlider',function () {
            $(this).find('.show-toggleMenu').removeClass('showToggleMenu');

    });
    
    $(document).on('keyup','#managecourseSearchInput_LX, #courseSearchInput_LX, #courseSearchInputMob_LX, #managecourseSearchInputMob_LX',function(event) {
    	if (event.which == 13) {
    		if($(this).attr('id')=='courseSearchInput_LX' || $(this).attr('id')=='courseSearchInputMob_LX')
    			searchOnEnterCheckMobile('mycourses',$(this).attr('id'));
    		else
    			searchOnEnterCheckMobile('managecourses',$(this).attr('id'));
    	}
    });

    $(document).on('keyup', '.oa_container .searchinput', function (e) {
        $('.oa_container .searchinput').val($(this).val());
        fnGetOnlineAssessmentDataSearch();
    });

    $(document).on('click','.markasread',function() {
    	$('#confirmModal').attr('data-courseid',this.getAttribute("data-courseid"));
    	$('#confirmModal').attr('data-slug',this.getAttribute("data-slug"));
    });

    $(document).on('change', '.assignmentModalDD, .examModalDD, .handsonModalDD', function () {
        var params = $('#' + this.id).val();
        var str = params.split(",");
        fnGetPvcData(str[0], str[1], str[2], str[3]);
    });


    $(document).on('click','#confirmComplete', function() {
    	var courseId = $(this).parents('#confirmModal').attr('data-courseid');
    	var courseSlug = $(this).parents('#confirmModal').attr('data-slug');
    	
    	// passing courseId to get the markAsComplete and progress-complete divs to hide/display
    	// passing slug to send in request
    	sendMarkAsCompleteReq(courseId,courseSlug);
    });
    
    
    function sendMarkAsCompleteReq(courseId,courseSlug) {

    	var orgID = document.getElementById('orgId').value;
    	var loginid_field = document.getElementById("loginField").value;
    	var loginid = document.getElementById(loginid_field+"_div").innerHTML;
    	
    	var http_request = fnGetXMLHttpObject();
    	var parameters = "c_id="+courseSlug+"&orgId="+orgID+"&loginid="+loginid+"&subAction=markAsComplete";
    	if(http_request!=null){
    		$('#loader-indicator').show();
    			var pValidationServlet =  "/EForms/PVCConfigurationServlet";
        		http_request.open('POST',pValidationServlet,true);
    			http_request.onreadystatechange = function() { showMarkAsCompleteResultModal(http_request,courseId); };
    			http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    			http_request.send(parameters);
    		}
    }

    function showMarkAsCompleteResultModal(http_request, courseId) {
    	$('#loader-indicator').hide();
    	if(http_request.readyState == 4 && http_request.status == 200 && http_request.responseText != null){
    			data=http_request.responseText;
    			if(data==undefined || data==null || data==""){
    				$('#markAsCompResultModal').modal();
    			}
    			else {
    				var AllData = JSON.parse(data);
    				
    				var parsedData = AllData.JsonData;
    				
    				if(parsedData=="hidepopuptrue")  {
    						$('#accordion'+courseId).find('.markedAsComplete').show();
    						$('#accordion'+courseId).find('.percentageCompleted').hide();
    						$('#accordion'+courseId).find('.markasread').hide();
    				}	
    				else
    					$('#markAsCompResultModal').modal();
    			}
    				
    	}

    }


    $(document).on('click', '.headSummery li:not(.countZero)', function (e) {

        $(this).parent().find('li').removeClass("activeTableHead");
        $(this).addClass("activeTableHead");
        $(this).parent().parent().find('table tbody tr').hide();
        var numItems = $(this).parent().parent().find('table tbody .' + $(this).data("name")).length;
        $(this).parent().parent().find('table tbody .' + $(this).data("name")).show();

        var section = $(this).parent().parent().find('.footerSummery').data("section");
        if ($(this).data("name") == 'Expired')
            $(this).parent().parent().find('.footerSummery').html('Displaying ' + numItems + ' About To Expire ' + section);
        else
            $(this).parent().parent().find('.footerSummery').html('Displaying ' + $(this).data("name") + ' ' + numItems + ' ' + section);
    })

 // $(document).click(".lernerlist .menuSlider",function(){   $(this).find('.show-toggleMenu').show();  });
    


    //            <!--tab  -->
    $(document).on('click', '.Sldr_Div_link:not(.totalCountZero)', function (e) {

        $('.panel').removeClass("activeacordion");

        $(this).parents('.panel').addClass("activeacordion");

        // $(this).parents('.accordion-group').addClass("toggleAccordianHeaderColor");
        var parent = $(this).data('parent');
        var actives = parent && $(parent).find('.collapse.in');
        var target = $(this).attr("href");
        var table_id = $(this).data('table');

        var parentstrp = $(this).parents('.panel-heading');
        var parentcollapsediv = $(this).parents('.panel-heading').next('.collapse');

        //

        $('.examtable').hide();
        // parentcollapsediv.slideDown();

        if ($(this).hasClass('Sldr_Div_activelink')) {
            $('.panel').removeClass("activeacordion");
            $(this).removeClass('Sldr_Div_activelink')
            parentstrp.css('padding-bottom', '5px')
            actives.collapse('hide')
            return;
        } else {

            $('.Sldr_Div_link').removeClass('Sldr_Div_activelink')
            $(this).addClass('Sldr_Div_activelink')
            parentstrp.css('padding-bottom', '0')

        }

        parentcollapsediv.show();
        parentcollapsediv.find($(table_id)).show();

        if ($(target).hasClass('in')) {
            return;
        }

        if (actives && actives.length) {
            actives.collapse('hide')

        }
        $(target).collapse('show');

        $(this).closest('.panel.panel-default').find('.attemptscrolldiv ul').owlCarousel({
            loop: false,
            margin: 10,
            dots: false,
            nav: true,
            navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
            slideBy: 10,
            navSpeed: 500,
            responsive: {
                0: { items: 1 },
                420: { items: 3 },
                768: { items: 6 },
                1024: { items: 8 }
            }
        });

    



    })

    $(document).on('click', '.closeD', function (e) {
        $('.Sldr_Div_link').removeClass('Sldr_Div_activelink');
        $('.panel').removeClass("activeacordion");
        $('.examtable').hide();

        var parentstrp = $(this).parents('.accordion-body').prev('.panel-heading');
        parentstrp.css('padding-bottom', '10px');
    });

    $(function () {

        $(".dashboardDrop .dropdown-menu li a").click(function () {

            $(".btn:first-child span.valueDrop").text($(this).text());
            $(".btn:first-child span.valueDrop").val($(this).text());

        });

        $(".dashboardDrop .dropdown-menu li").click(function () {
            $(".dashboardDrop .dropdown-menu li").removeClass('active');
            $(this).addClass('active');

        });
    });





    $('.headSummery li').on('click', function (e) {

        $(this).parent().find('li').removeClass("activeTableHead");
        $(this).addClass("activeTableHead");
        $(this).parent().parent().find('table tbody tr').hide();
        var numItems = $(this).parent().parent().find('table tbody .' + $(this).data("name")).length;
        $(this).parent().parent().find('table tbody .' + $(this).data("name")).show();

        var section = $(this).parent().parent().find('.footerSummery').data("section");
        $(this).parent().parent().find('.footerSummery').html('Displaying ' + $(this).data("name") + ' ' + numItems + ' ' + section);
    });

});

$(function () {
	
	$('<span id= "attemptVal" data-staticKey="Attempt" style="display:none">Attempt</span>').appendTo('body');
	$('<span id= "QPVal" data-staticKey="Question Paper" style="display:none">Question Paper</span>').appendTo('body');

    /** appending Modals to body */
    $('  <div class="modal fade" id="AttemptModal" tabindex="-1" role="dialog" style="display: none;"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">x</span></button> <h4 class="modal-title"> Total Attempts (0 taken) </h4> </div> <div class="modal-body clearfix"> <div class="clearfix"> <div class="tabledropdown pull-right col-sm-4 col-xs-12 clearfix"> <div class="form-group selectdiv"></div> </div> </div><div> <div> <div class="clearfix atmpt-content">  </div> </div> </div> </div></div></div></div>').appendTo('body');
    $('  <div class="modal fade" id="QuestionModal" tabindex="-1" role="dialog" style="display: none;"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">x</span></button> <h4 class="modal-title"> Total QuestionPaper (0 taken) </h4> </div> <div class="modal-body clearfix"> <div class="clearfix"> <div class="tabledropdown pull-right col-sm-4 col-xs-12 clearfix"> <div class="form-group selectdiv"></div> </div> </div><div> <div> <div class="clearfix qp-content">  </div> </div> </div> </div></div></div></div>').appendTo('body');


    $('#AttemptModal').on('show.bs.modal', function (event) {
        var rt = $(event.relatedTarget), /**Button that triggered the modal */
         //   title = rt.text(),
        title = rt.find(".totalAttemptsValue").text() + " Attempts (" +rt.find(".takenAttemptsValue").text() + " Taken)" ,
            modal = $(this),
            selectdiv = modal.find('.selectdiv'),
            /** re-initializing select */
            select = selectdiv.empty().append('<select class="selectpicker form-control" title="Attempts"></select>').find('select');

        rt.data('list').forEach(function (atmpt, i) {
        	var att = $('#attemptVal').text();
            $('<option>'+att +' ' +(i+1) + '</option>').data('atmpt', atmpt).appendTo(select);
        });

        modal.find('.modal-title').text(title);

        select.on('change', function () {
            var modalbody = $(this).parents('.modal-body'),
                a = $(this).find('option:selected').data('atmpt') || {};

            console.log(a);

            modalbody.find('.atmpt-content').html($(getAttmpt(a)).html());
            multilingualFormStaticValue("Subscription");

        }).selectpicker("refresh").trigger('change');/** init */
    });


    $('.QuestionModal').on('show.bs.modal', function (event) {
        var rt = $(event.relatedTarget), /**Button that triggered the modal */
            title = rt.text(),
            modal = $(this),
            selectdiv = modal.find('.selectdiv'),
            /** re-initializing select */
            select = selectdiv.empty().append('<select class="selectpicker form-control" title="QuestionPapers"></select>').find('select');

        rt.data('list').forEach(function (qp, i) {
        	var qpLabel = $('#QPVal').text();
            $('<option>'+qpLabel +' ' + (i+1) + '</option>').data('qp', qp).appendTo(select);
        });

        modal.find('.modal-title').text(title);

        select.on('change', function () {
            var modalbody = $(this).parents('.modal-body'),
                o = $(this).find('option:selected').data('qp') || {};

            console.log(o);

            modalbody.find('.qp-content').html($(getQp(o)).html());
            multilingualFormStaticValue("Subscription");

        }).selectpicker("refresh").trigger('change');/** init */
    });

});
function showError(msg, title, time){
	
	
    msg = msg || "Could not process the Request. Please try again later.";
    title = title || "Error";

    
    var errModal =  $("#err-msg-alert").length? $("#err-msg-alert") : $('<div id="err-msg-alert" class="modal fade" style="display: block; padding-right: 17px;"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">x</span> </button><h5 class="modal-title" data-staticKey="'+title+'">Error</h5>  </div> <div class="modal-body" data-staticKey="'+msg+'" >Could not process the Request. Please try again later.</div> <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-dismiss="modal" data-staticKey="Close">Close</button> </div> </div> </div> </div>');
        errModal.find('.modal-title').html(title).end()
                .find('.modal-body').html(msg).end()
                .modal('show');
        multilingualFormStaticValue("Error Page");
        
       
    if(time|0) setTimeout(function() {errModal.modal('hide');}, time);
}
/*
function getProps(e) {
    var children = e.children, atts = e.attributes, as = {};
    for (var i = atts.length; i; i--)as[atts[i - 1].name] = atts[i - 1].value;
    for (var i = children.length; i; i--)as[children[i - 1].tagName] = children[i - 1].textContent;
    return as;
}
*/

// Changes to accomodate for IE which returns undefined for children property
function getProps(e) {
    var children = e.childNodes, atts = e.attributes, as = {};
    for (var i = atts.length; i; i--)as[atts[i - 1].name] = atts[i - 1].value;
    for (var i = children.length-2; i>=1; i-=2)as[children[i].tagName] = children[i].textContent;
    return as;
}

function getAttmpt(a, i) {
    var inprogress = a.messageToBeShown==='Attempt in Progress';

    var tab = $('<div role="tabpanel" class="tab-pane clearfix ' + (i ? '' : 'active') + '" id="ass'+a.AssessmentId+'attempt' + a.AttemptId + '" ></div>');
    dateInfodiv1 = $('<div class="dateInfodiv dateInfodiv1 clearfix"> </div>'),
        starttime = a.ShowAssessmentDates=="YES" && a.StartTime ? '<div class="pull-left dateinfoLeft"> <div class="timestap clearfix "> <div class="pull-left"><i class="startdate"></i></div> <div class="pull-left"> <div data-staticKey="Start Date">Start Date</div> <div class="date">' + a.StartTime + '</div> </div> </div> </div>':'',
        endtime = !inprogress && a.ShowAssessmentDates=="YES" && a.EndTime?'<div class="pull-left dateinfoRight  "> <div class="timestap clearfix"> <div class="pull-left"><i class="enddate"></i></div> <div class="pull-left"> <div data-staticKey="End Date">End Date</div> <div class="date">' + a.EndTime + '</div> </div> </div> </div>':'',
    dateInfodiv2 = $('<div class="dateInfodiv dateInfodiv2  clearfix"> </div>'),
        scorediv = !inprogress && a.Score && a.ShowMarksObtained == "YES"? '<div class="pull-left dateinfoLeft"> <div class="timestap clearfix"> <div class="pull-left"><i class="Score"></i></div> <div class="pull-left"> <div data-staticKey="Score">Score</div> <div class="date">' + a.Score + '</div></div> </div> </div>':'',
        passfaildiv = '',
        reportdiv = !inprogress && a.ShowQuestionLevelReport == 'YES'? '<div onclick="fnViewReportSecure(\'' + a.ResultLink + '\', \'\')" class="newwDesign_report dynamicAdded margintop10 pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"> <circle r="9.958" cy="10.083" cx="9.958" fill="#73a7da" clip-rule="evenodd" fill-rule="evenodd"></circle> <g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg> <div  class="reportText lnkTrance fontsize12" data-staticKey="View report">View Report</div> </div>': '';
      
	if(!inprogress) {  
        switch (a.status){
		    case 'Evaluation Pending': passfaildiv = '<div class="pull-left dateinfoRight"> <div class="timestap clearfix"> <div class="pull-left"><i class="fa fa-hourglass-half" aria-hidden="true"></i></div> <div class="pull-left"> <div class="orangetxt font18" data-staticKey="Evaluation Pending">Evaluation Pending</div> </div> </div> </div>'; break;                              
            case 'progress': passfaildiv = '<div class="pull-left dateinfoRight width100"> <div class="timestap clearfix"> <div class="pull-left"><i class="fa fa-hourglass-half" aria-hidden="true"></i></div> <div class="pull-left"> <div class="orangetxt font18" data-staticKey="Progress">Progress</div> </div> </div> </div>'; break;
            case 'Pass': passfaildiv = '<div class="pull-left dateinfoRight "> <div class="timestap passDiv clearfix"> <div class="pull-left"><i class="pass" style="color:#0C6"></i></div> <div class="pull-left"> <div data-staticKey="Pass">Pass</div> </div> </div> </div>';break;
            case 'Fail': passfaildiv = '<div class="pull-left dateinfoRight "> <div class="timestap failDiv clearfix"> <div class="pull-left"><i class="fail" style="color:#0C6"></i></div> <div class="pull-left"> <div data-staticKey="Fail">Fail</div> </div> </div> </div>';break;
                }
	}
        passfaildiv = a.ShowStatus=="YES" ? passfaildiv : "" ;

    dateInfodiv1.append(starttime, endtime);
    dateInfodiv2.append(scorediv, passfaildiv, reportdiv);
    return tab.append(dateInfodiv1, dateInfodiv2).prop('outerHTML');
}

function getQp(qp,i){
	
	var orgID = document.getElementById('orgId').value;
    var formID = document.getElementById('formId').value;
    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;

    var $qp = $('<div class=" col-lg-3 col-md-3 col-sm-6 questPaperCont">'+
			'<div class="clearfix  yettodownload_img blueTxt bg-white">'+
			'<span class="textEllipses" title="'+qp.QuestionPaperName+'">'+qp.QuestionPaperName+'</span>'+
			'</div>'+
			'</div>');

		if( qp["No of times Downloaded"] ){
			$qp.append('<div class="clearfix downloadtitle divdownload  download-info">'+
					'<a href="'+qp["Question Paper Path"]+'" target="_blank" onclick=\"javascript:fnIncrementDownloadCountForSingleDashboard(' + orgID + ',' + formID + ',\'' + subscriptionIdForQP + '\',\'' + assessmentIdForQP + '\',\'' + app_seq_no + '\',\'' + qp["QuestionPaper Id"] + '\',\'' + applnSequenceField + '\',this);\"> ' +
							'<div class="date">'+
								'<i class="fa fa-download fa-1x rightmargin5px darkgreyicon"></i>'+
								'<span class="darkgreyicon lastdownload_txt"><span class="downloadedTxt" data-staticKey="Downloaded">Downloaded</span> <span class="openBracket">(</span><span class="downloadCount">'+qp["No of times Downloaded"]+'</span><span class="closeBracket">)</span> </span><br>'+
								'<span class="darkgreyicon lastgraydownload_txt marginleft20"><span class="lastDownloadTxt" data-staticKey="Last Download">Last Download</span><span class="colon">:</span> <span class="lastDownloadTime">'+qp["Last Downloaded At"]+'</span></span>'+
							'</div>'+
					'</a>' +
						'</div>');
		}
		else {	
			$qp.append('<div class="clearfix yetdownloadtitle">'+
					'<a href="'+qp["Question Paper Path"]+'" target="_blank" onclick=\"javascript:fnIncrementDownloadCountForSingleDashboard(' + orgID + ',' + formID + ',\'' + subscriptionIdForQP + '\',\'' + assessmentIdForQP + '\',\'' + app_seq_no + '\',\'' + qp["QuestionPaper Id"] + '\',\'' + applnSequenceField + '\',this);\"> ' +
							'<div class="date">'+
								'<i class="fa fa-download fa-1x rightmargin5px greyicon"></i>'+
								'<span class="greyicon" class="yetToDownloadTxt" data-staticKey = "Yet to Download">Yet to Download </span>'+
							'</div>'+
					'</a>' +
						'</div>');
		}
		
		return $qp.prop('outerHTML');				
}

var oaTabFWFRefresh = "";
var actionVal = "";
var courseTabFWRefresh = "";
var elementIdForCToChkMob = "";
var elementIdForOAoChkMob = "";
var curr_course_domain = [];
var windowclosecourseId = "";
var searchInput_LXVal = "";
var test;
var QPcondition = "live";
var OAresponseDoc = null;
var OATCDetails = null;
var selectedTCDetails = '';
var xvalue;		
var isEditAllowed=false;
var selectedState,selectedCity,selTcId;
var hrVal,hour,minVal,minute,valPres,hr,min,hVal,mVal,valBook;
var cntFrag="";
var Idtab="";

function popluatedependingCourses() {
    var secondType = $('.lastDropDown_LX').val();
    var Type = "", ParamsAdd = "";
    if (document.getElementById("mainDropDown")) {
        Type = document.getElementById("mainDropDown").value;
    }
    if (Type == "mycourses") {
        var idOfActiveTab = $('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
        if (idOfActiveTab == 'current' || idOfActiveTab == undefined || idOfActiveTab == '')
            Type = "current@@" + secondType;
        else if (idOfActiveTab == 'upcoming')
            Type = "upcoming@@" + secondType;
        else if (idOfActiveTab == 'history')
            Type = "history@@" + secondType;
    } else if (Type == "managecourses") {
        Type = "managecourses@@" + secondType;
        var idOfActiveTab = $('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
        if (idOfActiveTab == 'current')
            ParamsAdd = "current";
        else if (idOfActiveTab == 'upcoming')
            ParamsAdd = "upcoming";
        else if (idOfActiveTab == 'history')
            ParamsAdd = "history";

    }


    fnGetPvcData(Type, ParamsAdd, "1");
}
function fnGetPvcDataFromDD() {
    var Type = "";
    $('.searchInput_LX').val('');
    if (document.getElementById("mainDropDown")) {
        Type = document.getElementById("mainDropDown").value;
    }
    if (Type != "") {
        if (Type == "mycourses") {
            Type = "current";
        } else if (Type == "managecourses") {
            Type = "managecourses";
        }
        if (Type == "communities") {
            //$(".searchInput_LX").hide();
            $(".lastDropDown_LX").hide();
        } else {
            //$(".searchInput_LX").show();
            $(".lastDropDown_LX").show();
        }
    }
    fnGetPvcData(Type, "", "1");
}

function fnGetPvcDataFW(Type) {
    $('#courseSearchInput_LX').val("");
    $('#courseSearchInputMob_LX').val("");
    $('.mobileCourseTypeFilter').parent().removeClass("open");
    $('#managecourseSearchInput_LX').val("");
    $('#courseSearchInputMob_LX').val("");
    $('#courseManageFW-content').html('');
    fnGetPvcData(Type, '', "1");

}
function fnGetPVCDataRefreshComm() {
    $('#commSearchInput_LX').val("");
    fnGetPvcData('communities', '', '1');
}
function fnGetPvcDataRefresh() {
    $('#courseSearchInput_LX').val("");
    $('#courseSearchInputMob_LX').val("");
    fnGetPvcData(courseTabFWRefresh, '', "1");
    $('#managecourseSearchInput_LX').val("");
    $('#managecourseSearchInputMob_LX').val("");
    fnGetPvcData(courseTabFWRefresh, '', "1");

}
function fnGetPvcData(Type, ParamsAdd) {
    fnGetPvcData(Type, ParamsAdd, "1");
}

function fnGetPvcData(Type, ParamsAdd, pageNo) {


    if (typeof window.fnGetDataFrameworkBeforeAjax == 'function') {

        fnGetDataFrameworkBeforeAjax(Type, pageNo);
    }
    //console.log("page"+pageNo);


    courseTabFWRefresh = Type;
    if (Type == "currentCourse" || Type == "ManageCurrentCourse" || Type == "courses") { // Type=="courses" onclick of My Courses in top menu
        $('#course_upcoming').removeClass('active');
        $('#course_history').removeClass('active');
        $('#course_current').addClass('active');
        $('#course_expired').removeClass('active');
        $('#course_upcoming_mob').removeClass('active');
        $('#course_history_mob').removeClass('active');
        $('#course_current_mob').addClass('active');
        $('#course_expired_mob').removeClass('active');

        $('#managecourse_upcoming').removeClass('active');
        $('#managecourse_history').removeClass('active');
        $('#managecourse_coursetemplate').removeClass('active');
        $('#managecourse_current').addClass('active');

        $(".sortgroup .btn span.valueDrop").text(' Current ');
        $(".sortgroup .btn span.valueDrop").val(' Current ');
        
        $("#courseCF .dashboardDrop .valueDrop").text('CURRENT COURSES');
        $("#courseManageCF .dashboardDrop .valueDrop").text('CURRENT COURSES');

    }
    else if (Type == "upcomingCourse") {
        $('#courseFW-content').html('');
        $('#course_upcoming').addClass('active');
        $('#course_history').removeClass('active');
        $('#course_current').removeClass('active');
        $('#course_expired').removeClass('active');
        $('#course_upcoming_mob').addClass('active');
        $('#course_history_mob').removeClass('active');
        $('#course_current_mob').removeClass('active');
        $('#course_expired_mob').removeClass('active');
        
        $("#courseCF .dashboardDrop .valueDrop").text('UPCOMING COURSES');
    }
    else if (Type == "historyCourse" || Type == "history") {
        $('#courseFW-content').html('');
        $('#course_upcoming').removeClass('active');
        $('#course_history').addClass('active');
        $('#course_current').removeClass('active');
        $('#course_expired').removeClass('active');
        $('#course_upcoming_mob').removeClass('active');
        $('#course_history_mob').addClass('active');
        $('#course_current_mob').removeClass('active');
        $('#course_expired_mob').removeClass('active');
        
        $("#courseCF .dashboardDrop .valueDrop").text('COMPLETED COURSES');
    }
    else if(Type == "expiredCourse")
	{
		$('#course_upcoming').removeClass('active');
		$('#course_history').removeClass('active');
		$('#course_current').removeClass('active');
		$('#course_expired').addClass('active');
		$('#course_upcoming_mob').removeClass('active');
		$('#course_history_mob').removeClass('active');
		$('#course_current_mob').removeClass('active');
		$('#course_expired_mob').addClass('active');
		
		$("#courseCF .dashboardDrop .valueDrop").text('EXPIRED COURSES');
	}
    var http_request = fnGetXMLHttpObject();
    var TypeReceived = Type;
    //console.log(Type);
    var courseFlag = 0;
    $('#noCourseManageFW').remove();
    if (Type == "courses") {
        $('#courseFW-content').html('');
        Type = "current";
        TypeReceived = "current";
        courseFlag = 1;
    }
    if (Type == "history") {	// added to check for empty Completed section
    	 TypeReceived = "history";	
    }
    if (Type == "" || Type == "currentCourse" || Type == "ManageCurrentCourse") {

        if (Type == "ManageCurrentCourse") {
            TypeReceived = "managecourses";
            Type = "managecourses";
            ParamsAdd = "current";
            $("#courseManageCF .dashboardDrop .valueDrop").text('CURRENT COURSES');
        }
        else Type = "current";
        courseFlag = 1;

    }
    else if (Type == "upcomingCourse" || Type == "ManageUpcomingCourse") {

        if (Type == "ManageUpcomingCourse") {
            TypeReceived = "managecourses";
            Type = "managecourses";
            ParamsAdd = "upcoming";
            $("#courseManageCF .dashboardDrop .valueDrop").text('UPCOMING COURSES');
        }
        else {
            Type = "upcoming";
        }
        courseFlag = 1;
    }
    else if (Type == "historyCourse" || Type == "ManageHistoryCourse") {

        if (Type == "ManageHistoryCourse") {
            TypeReceived = "managecourses";
            Type = "managecourses";
            ParamsAdd = "history";
            $("#courseManageCF .dashboardDrop .valueDrop").text('COMPLETED COURSES');
        }
        else
            Type = "history";
        courseFlag = 1;
    }
    else if (Type == "expiredCourse" || Type == "ManageExpiredCourse") {

        if (Type == "ManageExpiredCourse") {
            TypeReceived = "managecourses";
            Type = "managecourses";
            ParamsAdd = "expired";
            $("#courseManageCF .dashboardDrop .valueDrop").text('EXPIRED COURSES');
        }
        else
            Type = "expired";
        courseFlag = 1;
    }
    else if (Type == "managecourses" || Type == "courseTemplate") {
        if (Type == "managecourses") {
            Type = "managecourses";
            ParamsAdd = "current";
        }
        else if (Type == "courseTemplate") {
            Type = "managecourses";
            ParamsAdd = "template";
            $("#courseManageCF .dashboardDrop .valueDrop").text('COURSE TEMPLATE');
        }
        courseFlag = 1;
    }
    else if (Type.indexOf("exams") >= 0) {
        if (ParamsAdd != "") {
            ParamsAddArr = ParamsAdd.split("@@");
            $('#examLi' + ParamsAddArr[1]).addClass('ui-tabs-active_LX ui-state-active_LX');
            $('#assignmentLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#interactionLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#handsonLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#colourAssignMainDiv' + ParamsAddArr[1]).hide();
            $('#colourExamMainDiv' + ParamsAddArr[1]).show();
            $('#colourInteractionMainDiv' + ParamsAddArr[1]).hide();
            $('#colourHandsonMainDiv' + ParamsAddArr[1]).hide();
            
        }
        Type = TypeReceived.split("@@")[0];

    }
    else if (Type == "assignment") {

        if (ParamsAdd != "") {
            ParamsAddArr = ParamsAdd.split("@@");
            $('#assignmentLi' + ParamsAddArr[1]).addClass('ui-tabs-active_LX ui-state-active_LX');
            $('#examLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#interactionLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#handsonLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');

            $('#colourExamMainDiv' + ParamsAddArr[1]).hide();
            $('#colourAssignMainDiv' + ParamsAddArr[1]).show();
            $('#colourInteractionMainDiv' + ParamsAddArr[1]).hide();
            $('#colourHandsonMainDiv' + ParamsAddArr[1]).hide();
        }
    }
    
    else if  (Type.indexOf("interaction") >= 0) {

        if (ParamsAdd != "") {
            ParamsAddArr = ParamsAdd.split("@@");
            $('#interactionLi' + ParamsAddArr[1]).addClass('ui-tabs-active_LX ui-state-active_LX');
            $('#assignmentLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#examLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#handsonLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');

            $('#colourExamMainDiv' + ParamsAddArr[1]).hide();
            $('#colourAssignMainDiv' + ParamsAddArr[1]).hide();
            $('#colourInteractionMainDiv' + ParamsAddArr[1]).show();
            $('#colourHandsonMainDiv' + ParamsAddArr[1]).hide();
        }
        Type = TypeReceived.split("@@")[0];
    }
    
    else if (Type.indexOf("handson") >= 0) {

        if (ParamsAdd != "") {
            ParamsAddArr = ParamsAdd.split("@@");
            $('#handsonLi' + ParamsAddArr[1]).addClass('ui-tabs-active_LX ui-state-active_LX');
            $('#interactionLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#assignmentLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');
            $('#examLi' + ParamsAddArr[1]).removeClass('ui-tabs-active_LX ui-state-active_LX');

            $('#colourExamMainDiv' + ParamsAddArr[1]).hide();
            $('#colourAssignMainDiv' + ParamsAddArr[1]).hide();
            $('#colourInteractionMainDiv' + ParamsAddArr[1]).hide();
            $('#colourHandsonMainDiv' + ParamsAddArr[1]).show();
        }
        Type = TypeReceived.split("@@")[0];
    }
    
    if (Type == "communities") {
        if (pageNo == "") {
            pageNo = 1;
        }
        $('#community-content').html("");
        $('#PageForCommunity').val(pageNo);
    }
    var searchInput_LXVal = "";
    if (Type == "communities") {
        searchInput_LXVal = $("#commSearchInput_LX").val();
    }
    if (courseFlag == 1) {
        if (elementIdForCToChkMob != "commSearchInput_LX")
            searchInput_LXVal = $("#" + elementIdForCToChkMob).val();
        if (pageNo == "") {
            pageNo = 1;
        }
        $('#PageForCourse').val(pageNo);
    }
    var field = document.getElementById("loginField").value;
    var orgID = document.getElementById('orgId').value;
    var formID = document.getElementById('formId').value;
    var checksum = document.getElementById('checksum').value;
    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;
    var entId = document.getElementById('entityId').value;
    var sessChk = document.getElementById('sessChk').value;
    var loginid = document.getElementById(field + '_div').innerHTML;

    if(checksum=="" || checksum==null || checksum==undefined)
    	checksum="checkSumValue";
    
    
    var parameters = "orgId=" + orgID + "&formId=" + formID + "&checkSum=" + encodeURI(checksum) + "&appSeqNo=" + app_seq_no + "&entId=" + entId + "&loginid=" + loginid + "&applnSequenceField=" + applnSequenceField + "&Type=" + Type + "&ParamsAdd=" + ParamsAdd + "&pageNo=" + pageNo + "&sessChk=" + sessChk;
    if (searchInput_LXVal != undefined && searchInput_LXVal != "")
        parameters = parameters + "&searchValue=" + encodeURI(searchInput_LXVal)
    if (http_request != null) {
    	if(Type!="enabler")
    		$('#loader-indicator').show();
    	
        var pValidationServlet = "/EForms/PVCConfigurationServlet";
        http_request.open('POST', pValidationServlet, true);
        http_request.onreadystatechange = function () { fnPopulatePVCData(http_request, field, TypeReceived, ParamsAdd, pageNo); };
        http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        http_request.send(parameters);
    }



}

function fnPopulatePVCData(http_request, field, Type, ParamsAdd, pageNo) {
    if (http_request.readyState == 4) {
        if (http_request.status == 200) {
        	if (http_request.responseText != null) {
        	
        		var AllData,parsedData;
        		
        		data = http_request.responseText;//div id pvcData
        		
        		
        		if(data!="" && data!=null && data!=undefined && data!='Session Expired')
        			{
        	     AllData=JSON.parse(data);
        		 parsedData = AllData.JsonData;
        		
        			}
        		
 	
        		if (data =='Session Expired'){
        			showError("Your session has been expired. You must Login again.","Session Expired",2000);
        			setTimeout(function(){location.reload()},2000);
        		}
        		
        		
        		else if(data==undefined || data==null || data==""|| parsedData.length=="0"){
        			//no data found
        			
        			
        			  if (typeof window.fnPopulatePVCDataNoData == 'function') {

        				  fnPopulatePVCDataNoData(Type);
        			    }
        			  
        			  
        			$('#loader-indicator').hide();
        			$('#SubsSearchBar_courses').css({'display':'none'});
        			$('#SubsSearchBarMob_courses').css({'display':'none'});
        			$('#noCourseFW').remove();
        			if(Type == 'currentCourse' || Type == 'current')
        				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have no active courses at the moment.">You have no active courses at the moment.</div>');
        			else if(Type == 'upcomingCourse')
        				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center; font-size: 14px;\" data-staticKey="You have no upcoming courses.">You have no upcoming courses.</div>');
        			else if(Type == 'historyCourse')
        				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have not completed any course. Go to current courses tab and complete a course.">You have not completed any course. Go to current courses tab and complete a course.</div>');
        			else if(Type == 'expiredCourse')
        				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have no expired courses.">You have no expired courses.</div>');
                    else if(Type=="enabler"){
        						var commId=ParamsAdd.split('@@')[1];
        						//console.log(ParamsAdd);
        						populateEnablers(parsedData,commId);
        					}


        			$('#noCommFW').remove();
        			$('#SubsSearchBar_communities').css({'display':'none'});
        			$('#community-content').append('<div id=\"noCommFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; width:100%;font-size: 14px;\" data-staticKey="No Communities have been subscribed">No Communities have been subscribed</div>');

        			$('#noCourseManageFW').remove();
        			$('#SubsSearchBar_managecourses').css({'display':'none'});
        			$('#SubsSearchBarMob_managecourses').css({'display':'none'});
        			//	$('.noSubsDataTxt').remove();

        			if(ParamsAdd == 'current')
        				$('#courseManageCF').append('<div id=\"noCourseManageFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="There are no active courses for which you are tagged as administrator/ faculty.">There are no active courses for which you are tagged as administrator/ faculty.</div>');
        			else if(ParamsAdd == 'upcoming')
        				$('#courseManageCF').append('<div id=\"noCourseManageFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="There are no courses due to start for which you are tagged as administrator/ faculty.">There are no courses due to start for which you are tagged as administrator/ faculty.</div>');
        			else if(ParamsAdd == 'history')
        				$('#courseManageCF').append('<div id=\"noCourseManageFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="There are no courses which have been marked as complete and you are tagged as administrator/ faculty.">There are no courses which have been marked as complete and you are tagged as administrator/ faculty.</div>');
        			else if(ParamsAdd == 'expired')
        				$('#courseManageCF').append('<div id=\"noCourseManageFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="There are no courses which have expired and you are tagged as administrator/ faculty.">There are no courses which have expired and you are tagged as administrator/ faculty.</div>');
        			else if(ParamsAdd == 'template')
        				$('#courseManageCF').append('<div id=\"noCourseManageFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="There are no course templates for which you are tagged as administrator/ faculty.">There are no course templates for which you are tagged as administrator/ faculty.</div>');


        			if($('#isFormMultilingualRequired').val()!=null && $('#isFormMultilingualRequired').val() == "Y")
        				multilingualFormStaticValue("Subscription");
        		}
        		else{
        			//data=JSON.stringify(data);
        			//var AllData=JSON.parse(data);

        			if(parsedData.length>0){
        				//var parsedData = AllData.JsonData;
        				if(AllData!=null && AllData.Identifier!=null && AllData.Identifier=="Community"){
        					//console.log('comm');
        					if(Type=="enabler"){
        						var commId=ParamsAdd.split('@@')[1];
        						//console.log(ParamsAdd);
        						populateEnablers(parsedData,commId);
        					}else{
        						setTimeout(function(){
        							populateCommunity(parsedData,pageNo)
        						},500);
        					}
        					// $(".searchInput_LX").hide();
        					$(".lastDropDown_LX").hide();
        					$('.searchInput_LX').attr('placeholder',"Search Communities");

        				}else if(AllData!=null && AllData.Identifier!=null && AllData.Identifier=="Course"){
        					$('#noCourseFW').remove();

        					if(AllData.JsonData.length >1)
        					{
        						$('#SubsSearchBar_courses').css({'display':'block'});
        						$('#SubsSearchBarMob_courses').css({'display':""});
        					}


        					if(Type.indexOf("exams")>=0)
        						populateExamCourses(parsedData,ParamsAdd,Type);
        					else if(Type.indexOf("assignment")>=0)
        						populateAssignmentCourses(parsedData,ParamsAdd);
        					else if(Type.indexOf("interaction")>=0)
        						populateInteractionCourses(parsedData,ParamsAdd);
        					else if(Type.indexOf("handson")>=0)
        						populateHandsonCourses(parsedData,ParamsAdd);

        					else if(Type.indexOf("mtop_all")>=0)
        					{
        						Type = "currentCourse";
        						if(parsedData[0].CurrentCourse.length>0)
        						{ var parsedData = parsedData[0].CurrentCourse; Type = "currentCourse";}
        						else if(parsedData[0].UpcomingCourse.length>0)
        						{
        							var parsedData = parsedData[0].UpcomingCourse; Type = "upcomingCourse";
        							$('#SubsDD_courses ul.dropdown-menu li').removeClass('active');
        							$('#SubsDD_courses ul.dropdown-menu li#course_upcoming').addClass('active');
        							$(".sortgroup .btn span.valueDrop").text(' Upcoming ');
        							$(".sortgroup .btn span.valueDrop").val(' Upcoming ');
        						}
        						else if(parsedData[0].HistoryCourse.length>0)
        						{
        							var parsedData = parsedData[0].HistoryCourse; Type = "historyCourse";
        							$('#SubsDD_courses ul.dropdown-menu li').removeClass('active');
        							$('#SubsDD_courses ul.dropdown-menu li#course_history').addClass('active');
        							$(".sortgroup .btn span.valueDrop").text(' Completed ');
        							$(".sortgroup .btn span.valueDrop").val(' Completed ');
        						}
        						else if(parsedData[0].ExpiredCourse.length>0)
        						{
        							var parsedData = parsedData[0].ExpiredCourse; Type = "expiredCourse";
        							$('#SubsDD_courses ul.dropdown-menu li').removeClass('active');
        							$('#SubsDD_courses ul.dropdown-menu li#course_expired').addClass('active');
        							$(".sortgroup .btn span.valueDrop").text(' Expired ');
        							$(".sortgroup .btn span.valueDrop").val(' Expired ');
        						}

        						populateCurrentCourses(parsedData,Type);

        					}

        					else
        						populateCurrentCourses(parsedData,Type);
        					$(".lastDropDown_LX").show();
        					$('.searchInput_LX').attr('placeholder',"Search Courses");

        				}
        				else if(AllData!=null && AllData.Identifier!=null && AllData.Identifier=="ManageCourses"){

        					if(AllData.JsonData.length >1)
        					{
        						$('#SubsSearchBar_managecourses').css({'display':'block'});
        						$('#SubsSearchBarMob_managecourses').css({'display':""});
        					}

        					if(Type.indexOf("managecourses")>=0)
        						populateManageCourses(parsedData,ParamsAdd);
        					else if(Type.indexOf("courseTemplate")>=0)
        						populateManageCourses(parsedData,ParamsAdd);
        					$(".lastDropDown_LX").show();
        					$('.searchInput_LX').attr('placeholder',"Search Courses");
        				} $('#loader-indicator').hide();
        			}

        		}
        		if (typeof window.fnBuildCustomizedGridForSubscriptionTabs == 'function') {
        			fnBuildCustomizedGridForSubscriptionTabs(Type, data);
        		}
        	}
        }
    }

    if (typeof window.fnPopulateDataFrameworkAfter == 'function') {

        fnPopulateDataFrameworkAfter(Type);
    }
}

function populateHistoryExamCourses(parsedData, ParamsAdd) {
    var ParamsAddArr = [];
    var sharedOrgId = "";
    ParamsAddArr = ParamsAdd.split("@@");
    var courseId = ParamsAddArr[1];
    $('#tabsExamHistoryTotal' + courseId + ' tr:gt(0)').remove();
    if (parsedData.length > 0) {

        $('#tabsExamHistoryTotal' + courseId).show();
        $('#tabsExamHistoryCompleted' + courseId).hide();
        for (var i = 0; i < parsedData.length; i++) {
            var course = parsedData[i];
            courseId = course.vccourse_id;

            if (course.vcgblorganization_id != null)
                sharedOrgId = course.vcgblorganization_id;

            var trForExamTable = '<tr><td>' + course.name + '</td><td>' + course.end_date + '</td><td>' + course.status + '</td><td><a  onclick="redirectToLXURL(\'' + course.launch + '\',\'' + sharedOrgId + '\')" style="text-decoration:none;color:#4183d7;"><span class = "fw_ml_launch" data-staticKey="Launch">Launch</span></a></td></tr>';
            $(trForExamTable).appendTo('#tabsExamHistoryTotal' + courseId + ' tbody');
        }
    }
}
function populateHistoryCompletedCourses(parsedData, ParamsAdd) {
    var ParamsAddArr = [];
    var sharedOrgId = "";
    ParamsAddArr = ParamsAdd.split("@@");
    var courseId = ParamsAddArr[1];
    $('#tabsExamHistoryCompleted' + courseId + ' tr:gt(0)').remove();
    if (parsedData.length > 0) {
        $('#tabsExamHistoryTotal' + courseId).hide();
        $('#tabsExamHistoryCompleted' + courseId).show();
        for (var i = 0; i < parsedData.length; i++) {
            var course = parsedData[i];
            courseId = course.vccourse_id;
            if (course.vcgblorganization_id != null)
                sharedOrgId = course.vcgblorganization_id;
            var trForExamTable = '<tr><td>' + course.name + '</td><td>' + course.end_date + '</td><td>' + course.status + '</td><td><a onclick="redirectToLXURL(\'' + course.launch + '\',\'' + sharedOrgId + '\')" style="text-decoration:none;color:#4183d7;"><span class = "fw_ml_launch"  data-staticKey="Launch">Launch</span></a></td></tr>';
            $(trForExamTable).appendTo('#tabsExamHistoryCompleted' + courseId + ' tbody');
        }
    }
}
function populateUpcomingCourses(parsedData) {
    $('#tabs1-1_LX').hide();
    $('#tabs1-2_LX').show();
    $('#tabs1-3_LX').hide();
    $('#tabs1-2_LX table').remove();
    $('#noRecords').remove();
    if (parsedData.length > 0) {
        var upcomingTable = '<table id="upcomingCoursestable" border="1" class="tftable_LX">' +
            ' <tbody><tr>' +
            '<th width="52%" data-staticKey="Courses">Courses</th>' +
            '<th width="12%" data-staticKey="Participants Enrolled">Participants Enrolled</th>' +
            '<th width="12%" data-staticKey="Exams Scheduled">Exams Scheduled</th>' +
            '<th width="12%" data-staticKey="Start Date">Start Date</th>' +
            '<th width="12%" data-staticKey="Enrollment Date">Enrollment Date</th>' +
            '</tr></tbody></table>';
        $(upcomingTable).appendTo('#tabs1-2_LX');
        for (var i = 0; i < parsedData.length; i++) {
            var course = parsedData[i];
            var totalCount = course.total_courses;
            var domain = course.domain;
            //console.log(domain);
            var trForTable = '<tr> ' +
                '<td>' + course.name + ' </td>' +
                '<td>' + course.participant_enroll + '</td>' +
                '<td>' + course.exam_scheduled + '</td>' +
                '<td>' + course.c_course_start_date + '</td>' +
                '<td>' + course.cu_enroll_start_date + '</td>' +
                '</tr>';
            $(trForTable).appendTo('#upcomingCoursestable tbody');
        }
        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }
        $('.pagination_div_LX').remove();

        var paginationDiv = '<div align="center" class="pagination_div_LX"><span  id="prev"><img align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX"><span class = \"fw_ml_page\" data-staticKey="Page">Page</span> <input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"><span data-staticKey="of"> of </span>' + noOfPages + '<span data-staticKey="Pages">Pages</span></span> <span id="next"><img align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
        $('#upcomingCoursestable').append(paginationDiv);
        $('.clickable_LX').keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                var btnIdentifier = this.id;

                var pageNo = $('#' + btnIdentifier).val();

                if (btnIdentifier == 'prev') {
                    pageNo = Number(pageNo) - 1;
                }
                else if (btnIdentifier == 'inputPage') {
                    pageNo = pageNo;
                }
                else if (btnIdentifier == 'next') {
                    pageNo = Number(pageNo) + 1;
                }
                fnGetPvcData("upcomingCourse", "", pageNo);
            }
        });
    }
    else {
        $('#SubsSearchBar_managecourses').css({ 'display': 'none' });
        $('#SubsSearchBarMob_managecourses').css({ 'display': 'none' });
        $('#tabs1-2_LX').append('<div id="noRecords" data-staticKey="No Courses have been subscribed">No Courses have been subscribed.</div>');
    }
}
function populateHistoryCourses(parsedData) {
    $('#tabs1-1_LX').hide();
    $('#tabs1-2_LX').hide();
    $('#tabs1-3_LX').show();
    $('#tabs1-3_LX div').remove();
    $('#noRecords').remove();
    var sharedOrgId = "";
    var historyDiv = '<div id="accordionHistory" class="ui-accordion_LX ui-widget_LX ui-helper-reset_LX" role="tablist"> </div>';
    $(historyDiv).appendTo('#tabs1-3_LX');

    if (parsedData.length > 0) {
        for (var i = 0; i < parsedData.length; i++) {
            var course = parsedData[i];
            var totalCount = course.total_courses;
            if (course.vcgblorganization_id != null)
                sharedOrgId = course.vcgblorganization_id;
            var historyInnerDiv = '<div id="accordionHistory" class="ui-accordion_LX ui-widget_LX ui-helper-reset_LX" role="tablist"> <div class="ui-accordion-header_LX ui-state-default_LX ui-corner-top_LX ui-accordion-icons_LX" role="tab" id="history' + course.id + '" aria-controls="ui-id-98" aria-selected="true" aria-expanded="true" tabindex="0">' +
                '<span class="ui-accordion-header-icon_LX ui-icon ui-icon-triangle-1-e_LX"></span>' +
                '<div class="left_LX width30_LX " style="width:50%">' +
                '<h4>' + course.name + '</h4>' +
                '</div>' +
                '<span class="left_LX width30_LX borderL_LX lh30_LX">' +
                '<img width="17" src="images/generate-report.png" class="blueImage_LX" onClick="javascript: redirectToLXURL(\'' + course.report_link + '\',\'' + sharedOrgId + '\');"><b onClick="javascript: redirectToLXURL(\'' + course.report_link + '\',\'' + sharedOrgId + '\');" class="blueText_LX" data-staticKey="Report Card">Report Card</b><br>';
            if (course.certificate_link != "" && course.certificate_link != "NA" && course.certificate_link != "na") {
                historyInnerDiv = historyInnerDiv + '<img width="11" src="images/download-certificate.png" class="blueImage_LX" onClick="javascript: redirectToLXURL(\'' + course.certificate_link + '\',\'' + sharedOrgId + '\');"><b class="blueText" onClick="javascript: redirectToLXURL(\'' + course.certificate_link + '\',\'' + sharedOrgId + '\');" data-staticKey="Download Certificate">Download Certificate</b>';
            }
            historyInnerDiv = historyInnerDiv + ' </span>     ' +
                ' <div class="accordion-toggle_LX" id="toggleHistory' + course.id + '" onClick=" clickOfslideButton(' + course.id + ',history)"></div>' +
                '<div class="clear_LX"></div>' +
                '</div>' +
                '<div style="display:none;" aria-hidden="false" role="tabpanel" class="ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX" aria-labelledby="ui-id-4" id="colourHistoryMainDiv' + course.id + '">' +
                '<div class="ui-tabs_LX ui-widget_LX ui-widget-content_LX ui-corner-all_LX" id="colourHistoryInnerDiv' + course.id + '">' +
                '<ul role="tablist" class="ui-tabs-nav_LX ui-helper-reset_LX ui-helper-clearfix_LX  ui-corner-all_LX" id="colourHistory' + course.id + '">' +
                '<li aria-expanded="true" aria-selected="true" aria-labelledby="ui-id-6" aria-controls="tabs3-1" tabindex="0" role="tab" class="violetLi_LX  ui-state-default_LX ui-corner-top_LX ui-tabs-active_LX ui-state-active_LX"><a onclick="javascript : fnGetPvcData(\'history\',\'total@@' + course.id + '\',\'1\')" id="ui-id-6" tabindex="-1" role="presentation" class="violet_LX ui-tabs-anchor_LX" href="#tabs3-1_LX"><img height="16" class="tabImage" src="images/total.png"><span data-staticKey="Total">Total</span> (' + course.total_courses + ')</a></li>' +
                '<li onclick="javascript : fnGetPvcData(\'history\',\'completed@@' + course.id + '\',\'1\')" aria-expanded="false" aria-selected="false" aria-labelledby="ui-id-7" aria-controls="tabs3-2" tabindex="-1" role="tab" class="greenLi_LX ui-state-default_LX ui-corner-top_LX"><a id="ui-id-7" tabindex="-1" role="presentation" class="green_LX ui-tabs-anchor_LX" href="#tabs3-2_LX"><img height="16" class="tabImage" src="images/completed.png"><span data-staticKey="Completed">Completed</span> (' + course.completed_courses + ')</a></li>' +
                '</ul>' +
                '</div>' +
                "<div id=\"tabsExamHistoryTotal" + course.id + "\" aria-labelledby=ui-id-6 class=\"ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX\" style ='display:none;' role=tabpanel aria-hidden=false>" +
                "<table border=1 class=tftable_LX id=\"tableExamTotal" + course.id + "\">" +
                "<tbody>" +
                "<tr>" +
                "<th data-staticKey=\"Exam\">Exam" +
                "<th data-staticKey=\"End Date\">End Date" +
                "<th data-staticKey=\"Status\">Status" +
                "<th data-staticKey=\"Action\">Action" +//append the contents of total table
                "</table>" +
                "</div>" +
                "<div id=\"tabsExamHistoryCompleted" + course.id + "\" style ='display:none;' aria-labelledby=ui-id-6 class=\"ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX\" role=tabpanel aria-hidden=false>" +
                "<table border=1 class=tftable_LX id=\"tableExamCompleted" + course.id + "\">" +
                "<tbody>" +
                "<tr>" +
                "<th><span class = \"fw_ml_exam\" data-staticKey=\"Exam\">Exam</span>" +
                "<th><span class = \"fw_ml_submitteddate\" data-staticKey=\"Submitted Date\">Submitted Date</span>" +
                "<th><span class = \"fw_ml_grade\" data-staticKey=\"Grade\">Grade</span>" +
                "<th><span class = \"fw_ml_marks\" data-staticKey=\"Marks\">Marks</span>" +
                "<th><span class = \"fw_ml_status\" data-staticKey=\"Status\">Status</span>" +
                "<th><span class = \"fw_ml_action\" data-staticKey=\"Action\">Action</span>" +//append the contents of completed table
                "</table>" +
                "</div>" +
                '</div>' +

                '</div>';

            $(historyInnerDiv).appendTo('#accordionHistory');
        }
        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }
        $('.pagination_div_LX').remove();

        var paginationDiv = '<div align="center" class="pagination_div_LX"><span  id="prev"><img align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX"><span class = \"fw_ml_page\" data-staticKey="Page">Page</span><input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"><span data-staticKey="of"> of </span>' + noOfPages + ' <span data-staticKey="Pages" > Pages </span></span> <span id="next"><img align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
        $('#accordionHistory').append(paginationDiv);
        $('.clickable_LX').keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                var btnIdentifier = this.id;

                var pageNo = $('#' + btnIdentifier).val();

                if (btnIdentifier == 'prev') {
                    pageNo = Number(pageNo) - 1;
                }
                else if (btnIdentifier == 'inputPage') {
                    pageNo = pageNo;
                }
                else if (btnIdentifier == 'next') {
                    pageNo = Number(pageNo) + 1;
                }
                fnGetPvcData("historyCourse", "", pageNo);
            }
        });
    }
    else {
        $('#SubsSearchBar_managecourses').css({ 'display': 'none' });
        $('#SubsSearchBarMob_managecourses').css({ 'display': 'none' });
        $('#accordionHistory').append('<div id="noRecords" data-staticKey="No Courses have been subscribed">No Courses have been subscribed</div>');
    }


}
function populateExamCourses(parsedData, ParamsAdd, Type) {
    //console.log(111);
    var domain = Type.split("@@")[1] + "\/LX/";
    var courseId = "";
    if (ParamsAdd != "") {
        ParamsAddArr = ParamsAdd.split("@@");
        courseId = ParamsAddArr[1];
    }
    $('#table' + courseId + 'Exam tbody tr').remove();
    $('#table' + courseId + 'Exam thead tr').remove();

    $('#examModalTable' + courseId + ' tbody tr').remove();
    $('#examModalTable' + courseId + ' thead tr').remove();

    /*
    	
        parsedData = JSON.parse('{"Identifier":"Course","JsonData":[{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":8,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:02.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":11,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145921,"view_result":"","end_date":null,"alm_assessment_id":4828,"is_rule_based":false,"name":"Staff Scheduling","updated_by":0,"created_at":"2017-08-10T19:01:01.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":133821,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":11,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:03.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":15,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145922,"view_result":"","end_date":null,"alm_assessment_id":4829,"is_rule_based":false,"name":"POS","updated_by":0,"created_at":"2017-08-10T19:01:02.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":133822,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":14,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:03.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":20,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145923,"view_result":"","end_date":null,"alm_assessment_id":4830,"is_rule_based":false,"name":"DPMS","updated_by":0,"created_at":"2017-08-10T19:01:02.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":15,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":133824,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":7,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:04.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":10,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145924,"view_result":"","end_date":null,"alm_assessment_id":4831,"is_rule_based":false,"name":"ESS and MSS","updated_by":0,"created_at":"2017-08-10T19:01:03.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":135084,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":9,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:04.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":13,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145925,"view_result":"","end_date":null,"alm_assessment_id":4832,"is_rule_based":false,"name":"Franking","updated_by":0,"created_at":"2017-08-10T19:01:03.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":135085,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":10,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:05.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":15,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145926,"view_result":"","end_date":null,"alm_assessment_id":4833,"is_rule_based":false,"name":"Philately","updated_by":0,"created_at":"2017-08-10T19:01:03.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":135086,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":7,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:05.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":10,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145927,"view_result":"","end_date":null,"alm_assessment_id":4834,"is_rule_based":false,"name":"POS BO","updated_by":0,"created_at":"2017-08-10T19:01:04.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":135087,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":11,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:05.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":15,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145928,"view_result":"","end_date":null,"alm_assessment_id":4835,"is_rule_based":false,"name":"Customer Management","updated_by":0,"created_at":"2017-08-10T19:01:04.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":135088,"start_date":null},{"flexi_time2":"2017-12-10T23:20:40.000+05:30","flexi_time1":"2017-12-10T23:20:40.000+05:30","marks":null,"passing_marks":11,"score":null,"vccommunity_id":78702,"view_grade":true,"total_exams":9,"grade_category_id":null,"lock_version":1,"update_vcgblorganization_id":1016,"all_ques_mandatory":false,"description":null,"auto_logoff":false,"flexi_varchar3":null,"flexi_varchar2":null,"get_from_bank":null,"view_status":true,"flexi_varchar1":null,"created_by":1784514,"status":"Pending","is_closed":0,"no_of_attempts":3,"assessment_format":"both","group_assessment_id":null,"question_template_type":null,"updated_at":"2017-08-10T19:01:05.000+05:30","view_pass_marks":true,"create_vcgblorganization_id":1016,"grade_id":null,"is_graded":null,"webstore":false,"enabler_id":null,"enabler_type":null,"total_marks":15,"flexi_tiny2":false,"keyboard_lock":null,"flexi_tiny1":false,"assessment_type_id":null,"subject":null,"launch":"Expired","pass_status":"","assignment_type":null,"offline":0,"view_report":true,"id":145929,"view_result":"","end_date":null,"alm_assessment_id":4836,"is_rule_based":false,"name":"FA Procurement","updated_by":0,"created_at":"2017-08-10T19:01:04.000+05:30","instruction_status":null,"vcgblorganization_id":1016,"publish":1,"display_correct_answer":"At the End of Assessment","option_shuffling":false,"comments_count":0,"vccourse_id":60863,"external_ref_id":null,"auto_lock":false,"assignment_instruction":null,"question_generator_id":null,"exam_end_date":"08-11-2017","assessment_type":"Assessment","workshop_detail_2":null,"duration":10,"view_score":true,"qp_status":1,"flexi_text1":null,"workshop_detail_1":null,"flexi_text2":null,"flexi_int3":null,"flexi_int2":null,"flexi_int1":null,"result_publish_date":null,"question_per_page":null,"ct_assessment_id":137908,"start_date":null}]}').JsonData;
    
    */
    if(parsedData!=null && parsedData.length>0)
	{
    	
    	
    	 if(typeof window.fnGetPopulateExamCoursesPreFuncForResponse == 'function')
       	  	 fnGetPopulateExamCoursesPreFuncForResponse(parsedData);
       	   

    	 if(typeof window.fnBuildFormExamCustomizedGrid == 'function') 
		  {
		  fnBuildFormExamCustomizedGrid(parsedData);
		  }
		 else
			 {
		var examTableHead="",sharedOrgId="";
		examTableHead=examTableHead+"<tr>";
		examTableHead=examTableHead+"<th width=\"20%\"><span class = \"fw_ml_examname\" data-staticKey=\"Exam Name\">Exam Name</span> </th>";
		examTableHead=examTableHead+"<th width=\"5%\" class=\"lmstextaligncenter\"><span class = \"fw_ml_enddate\" data-staticKey=\"End Date\">End Date</span> </th>";
		examTableHead=examTableHead+"<th width=\"5%\" class=\"lmstextaligncenter\" ><span class = \"fw_ml_grade\" data-staticKey=\"Grade\">Grade</span> </th>";
		examTableHead=examTableHead+"<th width=\"5%\" class=\"lmstextaligncenter\"><span class = \"fw_ml_marks\" data-staticKey=\"Marks\">Marks </span></th>";
		examTableHead=examTableHead+"<th width=\"5%\" class=\"lmstextaligncenter\"><span class = \"fw_ml_status\" data-staticKey=\"Status\">Status</span> </th>";
		examTableHead=examTableHead+"<th width=\"5%\" class=\"lmstextaligncenter\"><span class = \"fw_ml_action\" data-staticKey=\"Action\">Action</span> </th>";
		examTableHead=examTableHead+"</tr>";
		$('#table'+courseId+'Exam thead').html(examTableHead);
		$('#examModalTable'+courseId+' thead').html(examTableHead);
		//console.log(parsedData);



	for (var i=0;i<parsedData.length;i++) {
		var course = parsedData[i];
		 courseId=course.vccourse_id;
        
        if(course.vcgblorganization_id)
             sharedOrgId=course.vcgblorganization_id;

		 //var domain = course.domain;
    	 //console.log(domain);
		 var totalCount=course.total_exams;
		 var grade = 'NA';
		 var marks = 'NA';
		 try{
			 grade = course.score.grade;
			 marks = course.score.marks;
		 }catch(e){}
		 var exam_end_date=$.datepicker.formatDate('dd M yy ', new Date(course.exam_end_date.split('-')[2], course.exam_end_date.split('-')[1] - 1, course.exam_end_date.split('-')[0]));
		var trForExamTable='<tr class="no-border" ><td valign="middle" data-title="Exam Name">'+course.name+'</td><td class="lmstextaligncenter" data-title="End Date">'+exam_end_date+'</td><td class="lmstextaligncenter" data-title="Grade">';
		trForExamTable=trForExamTable+((grade==null || grade == undefined)?"":grade)+'</td><td class="lmstextaligncenter" data-title="Marks">'+(marks==null?"":marks)+'</td><td class="lmstextaligncenter" data-title="Status">'+course.status+'</td>';
		if(course.score!=null && course.no_of_attempts==course.score.attempt_counter)
		{
			trForExamTable=trForExamTable+'<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="No more attempts."> No more attempts. </span></td>';
		}
		//		else if(course.launch=="Expired")
		//		trForExamTable=trForExamTable+'<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="Expired"> Expired </span></td>';

			else if(course.label == "Expired")
				trForExamTable=trForExamTable+'<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="Expired"> Expired </span></td>';

			else if(course.label == "Launch") {
				trForExamTable=trForExamTable+'<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\''+ domain+course.launch+'\',\''+sharedOrgId+'\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="Launch"> Launch </span></a></td>';
			}
			else if(course.label == "View Result") {
				trForExamTable=trForExamTable+'<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\''+ domain+course.launch+'\',\''+sharedOrgId+'\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="View Result"> View Result </span></a></td>';
			}
		
		
		trForExamTable=trForExamTable+'</tr>';

		$(trForExamTable).appendTo('#table'+courseId+'Exam tbody');
		$(trForExamTable).appendTo('#examModalTable'+courseId+' tbody');
		}

			 }
	if(typeof window.fnGetPopulateExamCoursesPostFuncForResponse == 'function')
	   {
			
		  fnGetPopulateExamCoursesPostFuncForResponse(parsedData);
	   }
	
    }
    else {
    	
    	if(typeof window.fnGetPopulateExamCoursesPreFuncForNoResponse == 'function') 
    		fnGetPopulateExamCoursesPreFuncForNoResponse();
    	
        $('#table' + courseId + 'Exam thead').html("<tr><th data-staticKey=\"No exams found.\">No exams found. </th></tr>");
        $('#examModalTable' + courseId + ' thead').html("<tr><th data-staticKey=\"No exams found.\">No exams found. </th></tr>");
        
        
    	if(typeof window.fnGetPopulateExamCoursesPostFuncForNoResponse == 'function') 
    		fnGetPopulateExamCoursesPostFuncForNoResponse();
    }

    /*$('#tableheadAssign'+courseId).removeAttr('onclick');*/
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
}//end of function
function populateAssignmentCourses(parsedData, ParamsAdd) {
    var courseId = "";
    var domain = "";

    if (ParamsAdd != "") {
        ParamsAddArr = ParamsAdd.split("@@");
        courseId = ParamsAddArr[1];
        domain = ParamsAddArr[7];
        domain = domain + "/LX/"
    }
    $('#table' + courseId + 'Assign thead tr').remove();
    $('#table' + courseId + 'Assign tbody tr').remove();

    $('#assignmentModalTable' + courseId + ' thead tr').remove();
    $('#assignmentModalTable' + courseId + ' tbody tr').remove();

	/*
	parsedData = JSON.parse('{"Identifier":"Course","JsonData":[{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152491,"view_result":"assessments_player/launch_assignment?id=152491&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152491,"is_closed":0,"assessment_name":"Pre Test","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152492,"view_result":"assessments_player/launch_assignment?id=152492&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152492,"is_closed":0,"assessment_name":"Ear Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152493,"view_result":"assessments_player/launch_assignment?id=152493&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152493,"is_closed":0,"assessment_name":"Ear Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152494,"view_result":"assessments_player/launch_assignment?id=152494&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152494,"is_closed":0,"assessment_name":"Tongue Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152495,"view_result":"assessments_player/launch_assignment?id=152495&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152495,"is_closed":0,"assessment_name":"Tongue Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152496,"view_result":"assessments_player/launch_assignment?id=152496&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152496,"is_closed":0,"assessment_name":"Skin Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152497,"view_result":"assessments_player/launch_assignment?id=152497&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152497,"is_closed":0,"assessment_name":"Skin Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152498,"view_result":"assessments_player/launch_assignment?id=152498&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152498,"is_closed":0,"assessment_name":"Nose Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152499,"view_result":"assessments_player/launch_assignment?id=152499&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152499,"is_closed":0,"assessment_name":"Nose Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152500,"view_result":"assessments_player/launch_assignment?id=152500&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152500,"is_closed":0,"assessment_name":"Post Test","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null}]}').JsonData;
*/
    if (parsedData != null && parsedData.length > 0) {
    	
      	
   	 if(typeof window.fnGetPopulateAssignmentCoursesPreFuncForResponse == 'function')
  	  {
  			
   		 fnGetPopulateAssignmentCoursesPreFuncForResponse(parsedData);
  	   }
   	 
   	 
   	 
   	 if(typeof window.fnBuildFormAssignmentCustomizedGrid == 'function') 
		  {
		fnBuildFormAssignmentCustomizedGrid(parsedData);
		  }
		 else
			 {
        var newDiv = "";
        newDiv = newDiv + "<tr>"
        newDiv = newDiv + "<th data-staticKey=\"Assignment Name\">Assignment Name </th>"
        newDiv = newDiv + "<th width=\"17%\" class=\"lmstextaligncenter\"><span data-staticKey=\"End Date\">End Date</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Grade\">Grade</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Marks\">Marks</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Status\">Status</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Action\">Action</span></th>"
        newDiv = newDiv + "</tr>"
        $('#table' + courseId + 'Assign thead').append(newDiv);
        $('#assignmentModalTable' + courseId + ' thead').append(newDiv);

        //console.log(parsedData);
        for (var i = 0; i < parsedData.length; i++) {
            var assignment = parsedData[i];
            courseId = assignment.vccourse_id;
            //var domain = course.domain;
            //console.log(domain);
            var totalCount = assignment.total_assignments;
            var grade = 'NA';
            var marks = 'NA';
            try {
                grade = assignment.grade;
                if (grade == null || grade == undefined || grade == "")
                    grade = 'NA';
                marks = assignment.total_marks;
                if (marks == null || marks == undefined || marks == "")
                    marks = "NA";

            } catch (e) { }
            var trForExamTable = '<tr class=\"no-border Total" ><td valign="middle" data-title="Assignment Name">' + assignment.assessment_name + '</td><td  class="lmstextaligncenter" data-title="End Date">' + assignment.assignment_end_date + '</td><td  class="lmstextaligncenter" data-title="Grade">';
            trForExamTable = trForExamTable + grade + '</td><td class="lmstextaligncenter" data-title=Marks">' + marks + '</td><td  class="lmstextaligncenter" data-title="Status">' + assignment.status + '</td>';
            if (assignment.label == "Expired") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="Expired"> Expired </span></td></tr>';
            }
     /*
            else if ($('#heading' + courseId).find('#whetherCourseExpired').html() == "Expired") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="Expired"> Expired </span></td></tr>';
            }
      */
            else if(assignment.label == "Launch") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\'' + domain + assignment.launch + '\',\'\',\'Y\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="Launch"> Launch </span></a></td></tr>';
            }
            else if(assignment.label == "View Result") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\'' + domain + assignment.launch + '\',\'\',\'Y\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="View Result"> View Result </span></a></td></tr>';
            }

            $(trForExamTable).appendTo('#table' + courseId + 'Assign tbody');
            $(trForExamTable).appendTo('#assignmentModalTable' + courseId + ' tbody');
        }


        /*
    	
        newDiv=newDiv+"<nav class=\"pull-right\">"
        newDiv=newDiv+"<ul class=\"pagination pagination-sm\">"
        newDiv=newDiv+""
        newDiv=newDiv+"<li class=\"active\"><a href=\"javascript:void(0);\">1</a></li>"
        newDiv=newDiv+"<li><a href=\"javascript:void(0);\">2</a></li>"
        newDiv=newDiv+"<li><a href=\"javascript:void(0);\">3</a></li>"
        newDiv=newDiv+"<li><a href=\"javascript:void(0);\">4</a></li>"
        newDiv=newDiv+"<li><a href=\"javascript:void(0);\">5</a></li>"
        newDiv=newDiv+"<li>"
        newDiv=newDiv+"<a href=\"javascript:void(0);\" aria-label=\"Next\" title=\"Next\" data-tooltip=\"tooltip\">"
        newDiv=newDiv+"<i class=\"fa fa-angle-right\"></i>"
        newDiv=newDiv+"</a>"
        newDiv=newDiv+"</li>"
        newDiv=newDiv+"</ul>"
        newDiv=newDiv+"</nav>"
    	
        */


        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }

        /*//console.log(111);
        var courseId="";
        if(ParamsAdd!="")
            {
            ParamsAddArr =ParamsAdd.split("@@");
            courseId=ParamsAddArr[1];
            }
        $('#table'+courseId+'Assign tbody tr').remove();
                if(parsedData!=null && parsedData.length>0)
                {
                    //console.log(parsedData);
                for (var i=0;i<parsedData.length;i++) {
                    var course = parsedData[i];
                     courseId=course.vccourse_id;
                     var domain = course.domain;
                     //console.log(domain);
                     var totalCount=course.total_exams;
                     var grade = 'NA';
                     var marks = 'NA';
                     try{
                         grade = course.score.grade;
                         marks = course.marks;
                     }catch(e){}
                    var trForExamTable='<tr><td>'+course.name+'</td><td>'+course.exam_end_date+'</td><td>'+grade+'</td><td>'+marks+'</td><td>'+course.status+'</td>';
    
                    //trForExamTable=trForExamTable+'<td><a onclick="redirectToLXURL(\''+domain+course.launch+'\')" style="text-decoration:none;color:#4183d7;">Launch</a></td></tr>';
                     if(course.launch==undefined || course.launch==null || course.launch=="" || course.launch=="Expired"){
                            trForExamTable=trForExamTable+'<td><a class="lightgreytext" style="text-decoration:none;">NA</a></td></tr>';
                        }
                        else{
                            trForExamTable=trForExamTable+'<td><a class="lnkTrance sansSB" onclick="redirectToLXURL(\''+domain+course.launch+'\')" style="text-decoration:none;color:#4183d7;" href="#nogo">Launch</a></td></tr>';
                        }
                    $(trForExamTable).appendTo('#table'+courseId+'Assign tbody');
                    }
                var noOfPages= Math.ceil(Number(totalCount)/10);
                 if(totalCount<10) {
                     $('.next_box').removeClass('clickable_LX');
                     $('#next').removeClass('clickable_LX');
                     $('#page2').removeClass('clickable_LX');
                 }
             else
                 {
                 $('#next').addClass('clickable_LX');
                 }*/
        
			 } 
	   	 if(typeof window.fnGetPopulateAssignmentCoursesPostFuncForResponse == 'function')
	  	  {
	  			
	   		fnGetPopulateAssignmentCoursesPostFuncForResponse(parsedData);
	  	   }
    }
    else {
    	
    	if(typeof window.fnGetPopulateAssignmentCoursesPreFuncForNoResponse == 'function') 
    		fnGetPopulateAssignmentCoursesPreFuncForNoResponse();
			
   	 
        $('#table' + courseId + 'Assign thead').html("<tr><th data-staticKey=\"No assignments found.\">No assignments found. </th></tr>");
        $('#assignmentModalTable' + courseId + ' thead').html("<tr><th data-staticKey=\"No assignments found.\">No assignments found. </th></tr>");
        
    	if(typeof window.fnGetPopulateAssignmentCoursesPostFuncForNoResponse == 'function') 
    		fnGetPopulateAssignmentCoursesPostFuncForNoResponse();
    }

    /*$('#tableheadAssign'+courseId).removeAttr('onclick');*/
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
}

function populateInteractionCourses(parsedData, ParamsAdd) {
    var courseId = "";
    var domain = "";

    if (ParamsAdd != "") {
        ParamsAddArr = ParamsAdd.split("@@");
        courseId = ParamsAddArr[1];
        domain = ParamsAddArr[7];
        domain = domain + "/LX/"
    }
    $('#table' + courseId + 'Interaction thead tr').remove();
    $('#table' + courseId + 'Interaction tbody tr').remove();

    $('#interactionModalTable' + courseId + ' thead tr').remove();
    $('#interactionModalTable' + courseId + ' tbody tr').remove();

	/*
	parsedData = JSON.parse('{"Identifier":"Course","JsonData":[{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152491,"view_result":"assessments_player/launch_assignment?id=152491&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152491,"is_closed":0,"assessment_name":"Pre Test","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152492,"view_result":"assessments_player/launch_assignment?id=152492&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152492,"is_closed":0,"assessment_name":"Ear Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152493,"view_result":"assessments_player/launch_assignment?id=152493&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152493,"is_closed":0,"assessment_name":"Ear Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152494,"view_result":"assessments_player/launch_assignment?id=152494&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152494,"is_closed":0,"assessment_name":"Tongue Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152495,"view_result":"assessments_player/launch_assignment?id=152495&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152495,"is_closed":0,"assessment_name":"Tongue Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152496,"view_result":"assessments_player/launch_assignment?id=152496&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152496,"is_closed":0,"assessment_name":"Skin Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152497,"view_result":"assessments_player/launch_assignment?id=152497&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152497,"is_closed":0,"assessment_name":"Skin Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152498,"view_result":"assessments_player/launch_assignment?id=152498&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152498,"is_closed":0,"assessment_name":"Nose Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152499,"view_result":"assessments_player/launch_assignment?id=152499&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152499,"is_closed":0,"assessment_name":"Nose Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152500,"view_result":"assessments_player/launch_assignment?id=152500&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152500,"is_closed":0,"assessment_name":"Post Test","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null}]}').JsonData;
*/
    if (parsedData != null && parsedData.length > 0) {
        var newDiv = "";
        newDiv = newDiv + "<tr>"
        newDiv = newDiv + "<th data-staticKey=\"Live Lecture Name\">Live Lecture Name </th>"
        newDiv = newDiv + "<th width=\"17%\" class=\"lmstextaligncenter\"><span data-staticKey=\"End Date\">End Date</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Action\">Action</span></th>"
        newDiv = newDiv + "</tr>"
        $('#table' + courseId + 'Interaction thead').append(newDiv);
        $('#interactionModalTable' + courseId + ' thead').append(newDiv);

        //console.log(parsedData);
        for (var i = 0; i < parsedData.length; i++) {
            var assignment = parsedData[i];
            courseId = assignment.vccourse_id;
            //var domain = course.domain;
            //console.log(domain);
            var totalCount = assignment.total_interactions;
            
           var inter_end_date="";
            
            if(assignment.end_date!=null && assignment.end_date!="")
          //  inter_end_date=$.datepicker.formatDate('dd M yy ', new Date(assignment.end_date.split('-')[0], assignment.end_date.split('-')[1] - 1, assignment.end_date.split('-')[2]));
            	inter_end_date =moment(assignment.end_date).format('DD/MM/YYYY');
            
            
           console.log("inter_end_date"+inter_end_date);
            var trForExamTable = '<tr class=\"no-border Total" ><td valign="middle" data-title="Live Lecture Name">' + assignment.name + '</td><td  class="lmstextaligncenter" data-title="End Date">' + inter_end_date + '</td>';
            if (assignment.label == "Expired") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="Expired"> Expired </span></td></tr>';
            }
     /*
            else if ($('#heading' + courseId).find('#whetherCourseExpired').html() == "Expired") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><span class="lightgreytext" style="text-decoration:none;" data-staticKey="Expired"> Expired </span></td></tr>';
            }
      */
            else if(assignment.label == "Launch") {
                trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\'' + domain + assignment.launch + '\',\'\',\'Y\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="Launch"> Launch </span></a></td></tr>';
            }


            $(trForExamTable).appendTo('#table' + courseId + 'Interaction tbody');
            $(trForExamTable).appendTo('#interactionModalTable' + courseId + ' tbody');
        }

        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }

     
    }
    else {
        $('#table' + courseId + 'Interaction thead').html("<tr><th data-staticKey=\"No Live Lectures found.\">No Live Lectures found. </th></tr>");
        $('#interactionModalTable' + courseId + ' thead').html("<tr><th data-staticKey=\"No Live Lectures found.\">No Live Lectures found. </th></tr>");
    }

    /*$('#tableheadAssign'+courseId).removeAttr('onclick');*/
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
}
/*function getFormattedDate(Date){
		 var Dt = Date.getDate();
		 var mon = Date.getMonth();
		 var Year = Date.getFullYear();
		 var Month = "";
		 if(mon=='0'){Month = 'Jan';}
		 if(mon=='1'){Month = 'Feb';}
		 if(mon=='2'){Month = 'Mar';}
		 if(mon=='3'){Month = 'Apr';}
		 if(mon=='4'){Month = 'May';}
		 if(mon=='5'){Month = 'Jun';}
		 if(mon=='6'){Month = 'Jul';}
		 if(mon=='7'){Month = 'Aug';}
		 if(mon=='8'){Month = 'Sep';}
		 if(mon=='9'){Month = 'Oct';}
		 if(mon=='10'){Month = 'Nov';}
		 if(mon=='11'){Month = 'Dec';}
		 return Dt +' '+Month+', '+Year;
	}*/




function populateHandsonCourses(parsedData, ParamsAdd) {
    var courseId = "";
    var domain = "";

    if (ParamsAdd != "") {
        ParamsAddArr = ParamsAdd.split("@@");
        courseId = ParamsAddArr[1];
        domain = ParamsAddArr[7];
        domain = domain + "/LX/"
    }
    $('#table' + courseId + 'Handson thead tr').remove();
    $('#table' + courseId + 'Handson tbody tr').remove();

    $('#handsonModalTable' + courseId + ' thead tr').remove();
    $('#handsonModalTable' + courseId + ' tbody tr').remove();

	/*
	parsedData = JSON.parse('{"Identifier":"Course","JsonData":[{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152491,"view_result":"assessments_player/launch_assignment?id=152491&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152491,"is_closed":0,"assessment_name":"Pre Test","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152492,"view_result":"assessments_player/launch_assignment?id=152492&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152492,"is_closed":0,"assessment_name":"Ear Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152493,"view_result":"assessments_player/launch_assignment?id=152493&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152493,"is_closed":0,"assessment_name":"Ear Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152494,"view_result":"assessments_player/launch_assignment?id=152494&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152494,"is_closed":0,"assessment_name":"Tongue Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152495,"view_result":"assessments_player/launch_assignment?id=152495&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152495,"is_closed":0,"assessment_name":"Tongue Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152496,"view_result":"assessments_player/launch_assignment?id=152496&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152496,"is_closed":0,"assessment_name":"Skin Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:46+05:30","constraint2":"false","id":152497,"view_result":"assessments_player/launch_assignment?id=152497&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152497,"is_closed":0,"assessment_name":"Skin Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152498,"view_result":"assessments_player/launch_assignment?id=152498&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152498,"is_closed":0,"assessment_name":"Nose Assignment 1","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152499,"view_result":"assessments_player/launch_assignment?id=152499&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152499,"is_closed":0,"assessment_name":"Nose Assignment 2","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null},{"passing_marks":null,"launch":"","score":null,"pass_status":"","assignment_type":"Assignment","offline":null,"beginning_time":"2000-01-01T16:06:47+05:30","constraint2":"false","id":152500,"view_result":"assessments_player/launch_assignment?id=152500&origin_page=my_exams&chkd=#<Vcgbluser:0x007f81841051f0>&community_id=80933","time_constraint_type":4,"constraint1":"true","end_date":null,"assessment_status":null,"grade":null,"assessment_player_id":null,"status":"About to expire","vccourse_id":62799,"assessment_id":152500,"is_closed":0,"assessment_name":"Post Test","no_of_attempts":null,"community_id":80933,"total_assignments":11,"start_day":null,"assignment_end_date":"2018-02-01","ending_time":null,"is_completed":null,"end_day":null,"start_date":"2017-08-01","total_marks":null}]}').JsonData;
*/
    
    if (parsedData != null && parsedData.length > 0) {
        var newDiv = "";
        newDiv = newDiv + "<tr>"
        newDiv = newDiv + "<th data-staticKey=\"Hands-On\">Hands-On </th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Pass Status\">Pass Status</span></th>"
        newDiv = newDiv + "<th width=\"17%\" class=\"lmstextaligncenter\"><span data-staticKey=\"End Date\">End Date</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Status\">Status</span></th>"
        newDiv = newDiv + "<th width=\"15%\" class=\"lmstextaligncenter\"><span data-staticKey=\"Action\">Action</span></th>"
        newDiv = newDiv + "</tr>"
        $('#table' + courseId + 'Handson thead').append(newDiv);
        $('#handsonModalTable' + courseId + ' thead').append(newDiv);

        for (var i = 0; i < parsedData.length; i++) {
            var assignment = parsedData[i];
            courseId = assignment.vccourse_id;
            var totalCount = assignment.total_assignments;
            var exam_end_date="";
            
            if(assignment.assignment_end_date!=null && assignment.assignment_end_date!="")
            exam_end_date=$.datepicker.formatDate('dd M yy ', new Date(assignment.assignment_end_date.split('-')[0], assignment.assignment_end_date.split('-')[1] - 1, assignment.assignment_end_date.split('-')[2]));
     
            var trForExamTable = '<tr class=\"no-border Total" ><td valign="middle" data-title="Hands-On Name">' + assignment.assessment_name + '</td><td  class="lmstextaligncenter" data-title="Pass Status">' + assignment.pass_status + '</td><td  class="lmstextaligncenter" data-title="End date">';
            trForExamTable = trForExamTable + exam_end_date + '</td><td class="lmstextaligncenter" data-title=Status">' + assignment.status + '</td>';
     if(assignment.label == "Launch") {
    trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\'' + domain + assignment.launch + '\',\'\',\'Y\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="Launch"> Launch </span></a></td></tr>';
            }
     else if(assignment.label == "View Result / Launch") {
   trForExamTable = trForExamTable + '<td class="lmstextaligncenter" data-title="Action"><a class="btn-link lnkTrance" onclick="redirectToLXURL(\'' + domain + assignment.launch_report + '\',\'\',\'Y\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="View ResultLaunch">'+ " View Result " +'</span></a><span style="color:#23b4ec">'+"/"+'</span><a class="btn-link lnkTrance" onclick="redirectToLXURL(\'' + domain + assignment.launch + '\',\'\',\'Y\')" style="text-decoration:none;"><span class = "fw_ml_launch" data-staticKey="Launch">'+ "  Launch " +'</span></a></td></tr>';
             
            }

            $(trForExamTable).appendTo('#table' + courseId + 'Handson tbody');
            $(trForExamTable).appendTo('#handsonModalTable' + courseId + ' tbody');
        }

        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }

     
    }
    else {
        $('#table' + courseId + 'Handson thead').html("<tr><th data-staticKey=\"No Handson found.\">No Handson found. </th></tr>");
        $('#handsonModalTable' + courseId + ' thead').html("<tr><th data-staticKey=\"No Handson found.\">No Handson found. </th></tr>");
    }

    /*$('#tableheadAssign'+courseId).removeAttr('onclick');*/
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
}
function populateManageCoursesCurrent(parsedData) {
    var commObj = $('#accordion_LX');
    $('#accordion_LX table').remove();
    $('#courseManageFW-content').html('');
    var generateScreen = "";
    //commObj.append("<hr style='background-color: #ccc !important;border: medium none !important;height: 3px !important;margin-bottom: 24px !important;'>");
    var generateScreen = "";
    if (parsedData.length > 0) {
        generateScreen = generateScreen + "<table border=\"1\" class=\"tftable_LX\">" +
            "<tbody><tr><th width=\"52%\" data-staticKey=\"Course Name\">Course Name</th>" +
            "<th width=\"12%\" data-staticKey=\"Start Date\">Start Date</th>" +
            "<th width=\"12%\" data-staticKey=\"Enrollment Date\">Enrollment Date</th>" +
            "<th width=\"12%\" data-staticKey=\"Reports\">Reports</th>" +
            "</tr>";

        for (var i = 0; i < parsedData.length; i++) {

            var cmty = parsedData[i];
            var totalCount = cmty.total_courses;
            var dateStart = new Date(cmty.created_at_manage);
            var dateJoining = new Date(cmty.enrollment_date_manage);
            var domain = cmty.domain;
            //console.log(domain);
            generateScreen = generateScreen + "<tr>" +
                "<td>" +
                "<img width=\"42\" src=\"" + cmty.logo + "\" class=\"comminityIcon\">" +
                "<div style=\"padding-left: 50px;margin-top:-50px;padding-top:13px;\">" +
                "   <span class=\"comHeading\"><b>" + cmty.name +
                " </b>" +
                " </span><br>" +
                "</div>" +
                "</td>" +
                "<td>" + dateStart.getDate() + "/" + (Number(dateStart.getMonth()) + 1) + "/" + dateStart.getFullYear() + "</td>" +
                "<td>" + dateJoining.getDate() + "/" + (Number(dateJoining.getMonth()) + 1) + "/" + dateJoining.getFullYear() + "</td>" +
                "<td>" + dateJoining.getDate() + "/" + (Number(dateJoining.getMonth()) + 1) + "/" + dateJoining.getFullYear() + "</td>" +
                "</tr>";

        }
        generateScreen = generateScreen + "</tbody></table>";
        // commObj.append(generateScreen);
        $('#courseManageFW-content').html(generateScreen);
        $('#courseManageFW-content').css({ 'display': 'block' });
        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box_managecourse').removeClass('clickable_LX');
            $('#next_managecourse').removeClass('clickable_LX');
            $('#page2_managecourse').removeClass('clickable_LX');
        }
        else {
            $('#next_managecourse').addClass('clickable_LX');
        }
        $('.pagination_div_LX').remove();

        var paginationDiv = '<div align="center" class="pagination_div_LX"><span  id="prev_managecourse"><img align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX"><span class = \"fw_ml_page\" data-staticKey="Page">Page</span> <input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"><span data-staticKey="of"> of </span>' + noOfPages + '<span data-staticKey="Pages"> Pages </span></span> <span id="next"><img align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
        //commObj.append(paginationDiv);
        $('#courseManageFW-content').append(paginationDiv);
        $('.clickable_LX').keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                var btnIdentifier = this.id;

                var pageNo = $('#' + btnIdentifier).val();

                if (btnIdentifier == 'prev') {
                    pageNo = Number(pageNo) - 1;
                }
                else if (btnIdentifier == 'inputPage') {
                    pageNo = pageNo;
                }
                else if (btnIdentifier == 'next') {
                    pageNo = Number(pageNo) + 1;
                }
                fnGetPvcData("ManageCurrentCourse", "current", pageNo);
            }
        });
    }
    else {
        $('#SubsSearchBar_managecourses').css({ 'display': 'none' });
        $('#SubsSearchBarMob_managecourses').css({ 'display': 'none' });
        commObj.append('<div data-staticKey="No Courses have been subscribed">No Courses have been subscribed</div>');
    }
}
function populateManageCoursesUpcoming(parsedData) {

    var commObj = $('#accordion_LX');
    $('#accordion_LX table').remove();

    var generateScreen = "";
    //commObj.append("<hr style='background-color: #ccc !important;border: medium none !important;height: 3px !important;margin-bottom: 24px !important;'>");
    var generateScreen = "";
    if (parsedData.length > 0) {
        generateScreen = generateScreen + "<table border=\"1\" class=\"tftable_LX\">" +
            "<tbody><tr><th width=\"52%\" data-staticKey=\"Course Name\">Course Name</th>" +
            "<th width=\"12%\" data-staticKey=\"Start Date\">Start Date</th>" +
            "<th width=\"12%\" data-staticKey=\"Enrollment Date\">Enrollment Date</th>" +
            "</tr>";

        for (var i = 0; i < parsedData.length; i++) {

            var cmty = parsedData[i];
            ////console.log(cmty);
            var totalCount = cmty.total_courses;
            var dateStart = new Date(cmty.created_at_manage);
            var dateJoining = new Date(cmty.enrollment_date_manage);
            var totalCount = cmty.total_courses;

            generateScreen = generateScreen + "<tr>" +
                "<td>" +
                "<img width=\"42\" src=\"" + cmty.logo + "\" class=\"comminityIcon\">" +
                "<div style=\"padding-left: 50px;margin-top:-50px;padding-top:13px;\">" +
                "   <span class=\"comHeading\"><b>" + cmty.name +
                " </b>" +
                " </span><br>" +
                "</div>" +
                "</td>" +
                "<td>" + dateStart.getDate() + "/" + (Number(dateStart.getMonth()) + 1) + "/" + dateStart.getFullYear() + "</td>" +
                "<td>" + dateJoining.getDate() + "/" + (Number(dateJoining.getMonth()) + 1) + "/" + dateJoining.getFullYear() + "</td>" +
                "</tr>";

        }
        generateScreen = generateScreen + "</tbody></table>";
        commObj.append(generateScreen);
        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }
        $('.pagination_div_LX').remove();

        var paginationDiv = '<div align="center" class="pagination_div_LX"><span  id="prev"><img align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX"><span class = \"fw_ml_page\"  data-staticKey="Page">Page</span> <input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"><span data-staticKey="of"> of </span> ' + noOfPages + '<span data-staticKey="Pages"> Pages </span></span> <span id="next"><img align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
        commObj.append(paginationDiv);
        $('.clickable_LX').keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                var btnIdentifier = this.id;

                var pageNo = $('#' + btnIdentifier).val();

                if (btnIdentifier == 'prev') {
                    pageNo = Number(pageNo) - 1;
                }
                else if (btnIdentifier == 'inputPage') {
                    pageNo = pageNo;
                }
                else if (btnIdentifier == 'next') {
                    pageNo = Number(pageNo) + 1;
                }
                fnGetPvcData("ManageUpcomingCourse", "", pageNo);
            }
        });
    }
    else {
        commObj.append('<div data-staticKey="No Records.">No Records.</div>');
    }

}
function populateManageCoursesHistory(parsedData) {

    var commObj = $('#accordion_LX');
    $('#accordion_LX table').remove();

    var generateScreen = "";
    //commObj.append("<hr style='background-color: #ccc !important;border: medium none !important;height: 3px !important;margin-bottom: 24px !important;'>");
    var generateScreen = "";

    if (parsedData.length > 0) {
        generateScreen = generateScreen + "<table border=\"1\" class=\"tftable_LX\">" +
            "<tbody><tr><th width=\"52%\" data-staticKey=\"Course Name\">Course Name</th>" +
            "<th width=\"12%\" data-staticKey=\"Start Date\">Start Date</th>" +
            "<th width=\"12%\" data-staticKey=\"Enrollment Date\">Enrollment Date</th>" +
            "<th width=\"12%\" data-staticKey=\"Reports\">Reports</th>" +
            "</tr>";

        for (var i = 0; i < parsedData.length; i++) {

            var cmty = parsedData[i];
            // //console.log(cmty);
            var totalCount = cmty.total_courses;
            var dateStart = new Date(cmty.created_at_manage);
            var dateJoining = new Date(cmty.enrollment_date_manage);

            generateScreen = generateScreen + "<tr>" +
                "<td>" +
                "<img width=\"42\" src=\"" + cmty.logo + "\" class=\"comminityIcon\">" +
                "<div style=\"padding-left: 50px;margin-top:-50px;padding-top:13px;\">" +
                "   <span class=\"comHeading\"><b>" + cmty.name +
                " </b>" +
                " </span><br>" +
                "</div>" +
                "</td>" +
                "<td>" + dateStart.getDate() + "/" + (Number(dateStart.getMonth()) + 1) + "/" + dateStart.getFullYear() + "</td>" +
                "<td>" + dateJoining.getDate() + "/" + (Number(dateJoining.getMonth()) + 1) + "/" + dateJoining.getFullYear() + "</td>" +
                "<td>" + dateJoining.getDate() + "/" + (Number(dateJoining.getMonth()) + 1) + "/" + dateJoining.getFullYear() + "</td>" +
                "</tr>";

        }
        generateScreen = generateScreen + "</tbody></table>";
        commObj.append(generateScreen);
        var noOfPages = Math.ceil(Number(totalCount) / 10);
        if (totalCount < 10) {
            $('.next_box').removeClass('clickable_LX');
            $('#next').removeClass('clickable_LX');
            $('#page2').removeClass('clickable_LX');
        }
        else {
            $('#next').addClass('clickable_LX');
        }
        $('.pagination_div_LX').remove();

        var paginationDiv = '<div align="center" class="pagination_div_LX"><span  id="prev"><img align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX"><span class = \"fw_ml_page\" data-staticKey="Page">Page</span> <input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"><span data-staticKey="of"> of </span>' + noOfPages + ' <span data-staticKey="Pages"> Pages</span></span> <span id="next"><img align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
        commObj.append(paginationDiv);
        $('.clickable_LX').keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                var btnIdentifier = this.id;

                var pageNo = $('#' + btnIdentifier).val();

                if (btnIdentifier == 'prev') {
                    pageNo = Number(pageNo) - 1;
                }
                else if (btnIdentifier == 'inputPage') {
                    pageNo = pageNo;
                }
                else if (btnIdentifier == 'next') {
                    pageNo = Number(pageNo) + 1;
                }
                fnGetPvcData("ManageHistoryCourse", "", pageNo);
            }
        });

    }
    else {
        $('#SubsSearchBar_managecourses').css({ 'display': 'none' });
        $('#SubsSearchBarMob_managecourses').css({ 'display': 'none' });
        commObj.append('<div data-staticKey="No courses have been subscribed">No courses have been subscribed.</div>');
    }



}
function populateManageCourses(parsedData, ParamsAdd) {

    if (ParamsAdd == "current")
        populateManageCoursesNew(parsedData, 'current');
    else if (ParamsAdd == "upcoming")
        populateManageCoursesNew(parsedData, 'upcoming');
    else if (ParamsAdd == "history")
        populateManageCoursesNew(parsedData, 'history');
    else if (ParamsAdd == "template")
        populateManageCoursesNew(parsedData, 'courseTemplate');
    else {
        $('#tabContainer').html('');
        $('#mainDropDown').val('managecourses');
        $('#tabs1-1_LX').hide();
        $('#tabs1-2_LX').hide();
        $('#tabs1-3_LX').show();
        $('#tabContainer').html("<div id=tabsLevel1_LX class=\"mycourses_LX ui-tabs_LX ui-widget_LX ui-widget-content_LX ui-corner-all_LX \">" +
            "<ul class=\"ui-tabs-nav_LX ui-helper-reset_LX ui-helper-clearfix_LX ui-widget-header_LX ui-corner-all_LX\" role=tablist>" +
            "<li id = 'courseTemplate' class=\"ui-state-default_LX ui-corner-top_LX ui-tabs-active_LX ui-state-active_LX\" role=tab tabindex=0 aria-controls=tabs1-1 aria-labelledby=ui-id-1 aria-selected=true aria-expanded=true>" +
            "<a  onclick=\"javascript : fnGetPvcData('courseTemplate','','1')\" class=ui-tabs-anchor_LX role=presentation tabindex=-1 id=ui-id-1 data-staticKey=\"Course Template\">Course Template</a>" +
            "</li>" +
            "<li id = 'current' class=\"ui-state-default_LX ui-corner-top_LX \" role=tab tabindex=0 aria-controls=tabs1-2 aria-labelledby=ui-id-2 aria-selected=true aria-expanded=true>" +
            "<a  onclick=\"javascript : fnGetPvcData('ManageCurrentCourse','','1')\" class=ui-tabs-anchor_LX role=presentation tabindex=-1 id=ui-id-1><span class='fw_ml_currentcourses'data-staticKey=\"Current Courses\">Current Courses</span></a>" +
            "</li>" +
            "<li id='upcoming' class=\"ui-state-default_LX ui-corner-top_LX\" role=tab tabindex=-1 aria-controls=tabs1-3 aria-labelledby=ui-id-3 aria-selected=false aria-expanded=false>" +
            "<a  onclick=\"javascript : fnGetPvcData('ManageUpcomingCourse','','1')\" class=ui-tabs-anchor_LX role=presentation tabindex=-1 id=ui-id-2><span class='fw_ml_upcomingcourses' data-staticKey=\"Upcoming Courses\">Upcoming Courses</span></a>" +
            "</li>" +
            "<li id='history' class=\"ui-state-default_LX ui-corner-top_LX\" role=tab tabindex=-1 aria-controls=tabs1-4 aria-labelledby=ui-id-4 aria-selected=false aria-expanded=false>" +
            "<a  onclick=\"javascript : fnGetPvcData('ManageHistoryCourse','','1')\" class=ui-tabs-anchor_LX role=presentation tabindex=-1 id=ui-id-3><span class='fw_ml_historycourses' data-staticKey=\"History Courses\">History Courses</span></a>" +
            "</li>" +
            "</ul>" +
            "<div id=tabs1-1_LX aria-labelledby=ui-id-1 class=\"ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX\" role=tabpanel aria-hidden=false>" +
            "<div id=accordion_LX class=\"ui-accordion_LX ui-widget_LX ui-helper-reset_LX \" role=tablist></div>" +
            "</div>" +
            "<div id=tabs1-2_LX aria-labelledby=ui-id-2 class=\"ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX\" role=tabpanel aria-hidden=false>" +
            "<div id=accordion_LX class=\"ui-accordion_LX ui-widget_LX ui-helper-reset_LX \" role=tablist></div>" +
            "</div>" +
            "<div id=tabs1-3_LX aria-labelledby=ui-id-3 class=\"ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX\" role=tabpanel aria-hidden=false>" +
            "</div>" +
            "<div id=tabs1-4_LX aria-labelledby=ui-id-4 class=\"ui-tabs-panel_LX ui-widget-content_LX ui-corner-bottom_LX\" role=tabpanel aria-hidden=false>" +

            "</div>" +
            "</div>");
        var commObj = $('#accordion_LX');
        var generateScreen = "";
        //commObj.append("<hr style='background-color: #ccc !important;border: medium none !important;height: 3px !important;margin-bottom: 24px !important;'>");
        var generateScreen = "";
        if (parsedData.length > 0) {
        	 if(typeof window.fnGetPopulateMngCoursesPreFuncForResponse == 'function')
                 fnGetPopulateMngCoursesPreFuncForResponse(parsedData);
    	   
     	   if(typeof window.fnBuildFormMngCoursesCustomizedGrid == 'function') 
		  {
     		 fnBuildFormMngCoursesCustomizedGrid(parsedData);
		  }
		  else
			 {
            generateScreen = generateScreen + "<table border=\"1\" class=\"tftable_LX\">" +
                "<tbody><tr><th width=\"52%\" data-staticKey=\"Course Name\">Course Name</th>" +
                "<th width=\"12%\"  data-staticKey=\"Start Date\">Start Date</th>" +
                "<th width=\"12%\" data-staticKey=\"Enrollment Date\">Enrollment Date</th>" +
                "</tr>";

            for (var i = 0; i < parsedData.length; i++) {

                var cmty = parsedData[i];
                ////console.log(cmty);
                var totalCount = cmty.total_courses;
                var dateStart = new Date(cmty.created_at_manage);
                var dateJoining = new Date(cmty.enrollment_date_manage);

                generateScreen = generateScreen + "<tr>" +
                    "<td>" +
                    "<img width=\"42\" src=\"" + cmty.logo + "\" class=\"comminityIcon\">" +
                    "<div style=\"padding-left: 50px;margin-top:-50px;padding-top:13px;\">" +
                    "   <span class=\"comHeading\"><b>" + cmty.name +
                    " </b>" +
                    " </span><br>" +
                    "</div>" +
                    "</td>" +
                    "<td>" + dateStart.getDate() + "/" + (Number(dateStart.getMonth()) + 1) + "/" + dateStart.getFullYear() + "</td>" +
                    "<td>" + dateJoining.getDate() + "/" + (Number(dateJoining.getMonth()) + 1) + "/" + dateJoining.getFullYear() + "</td>" +
                    "</tr>";

            }
            generateScreen = generateScreen + "</tbody></table>";
            commObj.append(generateScreen);
            var noOfPages = Math.ceil(Number(totalCount) / 10);
            if (totalCount < 10) {
                $('.next_box').removeClass('clickable_LX');
                $('#next').removeClass('clickable_LX');
                $('#page2').removeClass('clickable_LX');
            }
            else {
                $('#next').addClass('clickable_LX');
            }
            $('.pagination_div_LX').remove();

            var paginationDiv = '<div align="center" class="pagination_div_LX"><span  id="prev"><img align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX"><span class = \"fw_ml_page\" data-staticKey="Page">Page </span><input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"><span data-staticKey="of"> of </span> ' + noOfPages + ' <span data-staticKey="Pages"> Pages</span></span> <span id="next"><img align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
            commObj.append(paginationDiv);
            $('.clickable_LX').keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    var btnIdentifier = this.id;

                    var pageNo = $('#' + btnIdentifier).val();

                    if (btnIdentifier == 'prev') {
                        pageNo = Number(pageNo) - 1;
                    }
                    else if (btnIdentifier == 'inputPage') {
                        pageNo = pageNo;
                    }
                    else if (btnIdentifier == 'next') {
                        pageNo = Number(pageNo) + 1;
                    }
                    fnGetPvcData("courseTemplate", "", pageNo);
                }
            });

        }}
        else {
        	
	        if(typeof window.fnGetPopulateMngCoursesPreFuncForNoResponse == 'function')
	        	fnGetPopulateMngCoursesPreFuncForNoResponse();
 			
        	
            $('#SubsSearchBar_managecourses').css({ 'display': 'none' });
            $('#SubsSearchBarMob_managecourses').css({ 'display': 'none' });
            commObj.append('<div data-staticKey="No courses have been subscribed">No courses have been subscribed</div>');
            
            if(typeof window.fnGetPopulateMngCoursesPostFuncForNoResponse == 'function')
            	fnGetPopulateMngCoursesPostFuncForNoResponse();
        }

    }
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
}
function populateCurrentCourses(parsedData,Type){

	//console.log(Type);
	$('#courseFW-content').html('');

	var imagePath ="";
	var courseExpired = "";
	var today = new Date();

//	var examModalDiv = "<div class=\"modal fade ExamModal\" tabindex=\"-1\" role=\"dialog\"></div>"
//	$('#courseFW-content').append(examModalDiv);
//	$('.ExamModal').html('');

//	var assignmentModalDiv =  "<div class=\"modal fade AssignmentModal\" tabindex=\"-1\" role=\"dialog\"></div>"
//	$('#courseFW-content').append(assignmentModalDiv);
//	$('.AssignmentModal').html('');
	
		if(!parsedData.length && Type=="current") {
			fnGetPvcDataFW('history');
		}
		
		if(!parsedData.length && Type=="history") {		// to check for empty Completed section
			$('#course_current').find('a').click();
		}
		
		if(Type=="history")		// if parsedData is not empty
			Type="historyCourse";

			var confirmModal="";
			confirmModal=confirmModal+"<div class=\"modal fade modelsml\" id=\"confirmModal\" data-slug=\"\" data-courseid=\"\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" style=\"padding-right: 17px;\">"
			confirmModal=confirmModal+"<div class=\"modal-dialog \" role=\"document\">"
			confirmModal=confirmModal+"<div class=\"modal-content\">"
			confirmModal=confirmModal+"<div class=\"modal-body\">"
			confirmModal=confirmModal+"<div class=\"modeltext\"> <i class=\"modelimg\"></i>"
			confirmModal=confirmModal+"<p><span data-staticKey=\"Please confirm if you want to mark this as complete?\">Please confirm if you want to mark this as complete? </span></p>"
			confirmModal=confirmModal+"</div>"
			confirmModal=confirmModal+"</div>"
			confirmModal=confirmModal+"<div class=\"modal-footer\"> <a class=\"nobtn  pull-left\" style=\"width:50%\" data-dismiss=\"modal\"><span data-staticKey=\"No\"> No </span></a> <a class=\"yesbtn showtick  pull-right\" style=\"width:50%\" data-dismiss=\"modal\" id=\"confirmComplete\"><span data-staticKey=\"Yes\"> Yes </span></a> </div>"
			confirmModal=confirmModal+"</div>"
			confirmModal=confirmModal+"</div>"
			confirmModal=confirmModal+"</div>"
			
			$('body').append(confirmModal);
	
			var markAsCompResultModal="";
			markAsCompResultModal=markAsCompResultModal+"<div class=\"modal fade modelsml\" id=\"markAsCompResultModal\" data-courseid=\"\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" style=\"padding-right: 17px;\">"
			markAsCompResultModal=markAsCompResultModal+"<div class=\"modal-dialog \" role=\"document\">"
			markAsCompResultModal=markAsCompResultModal+"<div class=\"modal-content\">"
			markAsCompResultModal=markAsCompResultModal+"<div class=\"modal-body\">"
			markAsCompResultModal=markAsCompResultModal+"<div class=\"modeltext\"> <i class=\"modelimg\"></i>"
			markAsCompResultModal=markAsCompResultModal+"<p><span data-staticKey=\"Could not mark course as complete.\">Could not mark course as complete.</span></p>"
			markAsCompResultModal=markAsCompResultModal+"</div>"
			markAsCompResultModal=markAsCompResultModal+"</div>"
			markAsCompResultModal=markAsCompResultModal+"<div class=\"modal-footer\"> <a data-dismiss=\"modal\"><span data-staticKey=\"Ok\">OK</span></a></div>"
			markAsCompResultModal=markAsCompResultModal+"</div>"
			markAsCompResultModal=markAsCompResultModal+"</div>"
			markAsCompResultModal=markAsCompResultModal+"</div>"
			
			$('body').append(markAsCompResultModal);

	var newDiv="";
	if(Type == "currentCourse" && parsedData.length > 0)
	newDiv=newDiv+"<div class=\"medium notifyTxt \"><span data-staticKey=\"Courses once marked as complete can be viewed from the COMPLETED section.\">Courses once marked as complete can be viewed from the COMPLETED section.</span></div><br/> <br/>";
	
	newDiv=newDiv+"<div class=\"panel-group dashboardaccordions\" id=\"dashboardaccordion\" role=\"tablist\" aria-multiselectable=\"true\">";
	if(!parsedData.length){
		
		if(typeof window.fnGetPopulateCurrentCoursesPreFuncForNoResponse == 'function') 
			fnGetPopulateCurrentCoursesPreFuncForNoResponse();
		
        $('#courseFW-content').html('<div id="noCourseFW" class="noSubsDataTxt" style="margin: 0 auto; text-align: center;font-size: 14px;" data-staticKey="You have no active courses at the moment.">You have no active courses at the moment.</div>');
       return;
   }
	
	
	if(parsedData.length>0)
		{
		
	if(typeof window.fnGetPopulateCurrentCoursesPreFuncForResponse == 'function')
		fnGetPopulateCurrentCoursesPreFuncForResponse(parsedData);

	 if(typeof window.fnBuildFormCurrentCoursesCustomizedGrid == 'function') 
		  {
		 fnBuildFormCurrentCoursesCustomizedGrid(parsedData);
		  }
		 else
			 {
    for(i=0;i<parsedData.length;i++){
		var data=parsedData[i];
		var domain = data.domain;
		var courseimage = data.logo;
		var totalCount=data.total_courses;
		var paramsAdd="",sharedOrgId="";
		var courseid=data.courseid;
         if(data.vcgblorganization_id!=null) sharedOrgId=data.vcgblorganization_id;
		var course_end_date=data.c_course_end_date;
		var course_type=data.c_course_type;
		var enroll_start_date=data.cu_enroll_start_date;
		var enroll_end_date=data.cu_enroll_end_date;
		var course_end_date_check = new Date(course_end_date);
		var enroll_end_date_check = new Date(enroll_end_date);
		///LX/INDEXES/AppLaunchSAML?serviceid=1&c_id=certificate-in-business-skills-b3&app_id=9519
		var launch_course_home = domain+data.launch_course+"&type=iEvolve&lsamltype=abc";
		//var launch_course_path = "/LX/contents/content_home?eForm=Y&c_id="+data.slug+"&content_player=true";
		//var launch_course_home = domain+"/LX/home/login_launch_key?c_id="+data.slug+"&type=iEvolve&lsamltype=abc";
		
		var launch_course_path = "/LX/contents/content_home?eForm=Y&c_id="+data.slug+"&content_player=true";		
		if("isCAABEnabled" in data)		
		{		
		var cabval=data.isCAABEnabled;
		if(validateData(cabval))	
		launch_course_path = "/LX/INDEXES/AppLaunchSAML?serviceid=13&eForm=Y&c_id="+data.slug+"&comm_target_orgId="+sharedOrgId+"";		
		}		
		
		var exam_total_count=data.count[0].exam.total_count;
		if(exam_total_count==undefined || exam_total_count==null || exam_total_count=="" || exam_total_count=="null")
			exam_total_count='0';
		
		var assessment_total_count=data.count[1].assignment.total_count;
		if(assessment_total_count==undefined || assessment_total_count==null || assessment_total_count=="" || assessment_total_count=="null")
			assessment_total_count='0';
		
		var assessment_abt_expire=data.count[1].assignment.abt_expire;
		if(assessment_abt_expire==undefined || assessment_abt_expire==null || assessment_abt_expire=="" || assessment_abt_expire=="null")
			assessment_abt_expire='0';
		
		var assessment_evaluated_count=data.count[1].assignment.evaluated_count;
		if(assessment_evaluated_count==undefined || assessment_evaluated_count==null || assessment_evaluated_count=="" || assessment_evaluated_count=="null")
			assessment_evaluated_count='0';
		
		var assessment_pending_count=data.count[1].assignment.pending_count;
		if(assessment_pending_count==undefined || assessment_pending_count==null || assessment_pending_count=="" || assessment_pending_count=="null")
			assessment_pending_count='0';
		
		var assessment_submited_count=data.count[1].assignment.submited_count;
		if(assessment_submited_count==undefined || assessment_submited_count==null || assessment_submited_count=="" || assessment_submited_count=="null")
			assessment_submited_count='0';
		
		var interaction_total_count=data.count[3].interaction.interaction_total_count;
		if(interaction_total_count==undefined || interaction_total_count==null || interaction_total_count=="" || interaction_total_count=="null")
			interaction_total_count='0';
		
		
		var handson_total_count=data.count[2].handson.total_count;
		if(handson_total_count==undefined || handson_total_count==null || handson_total_count=="" || handson_total_count=="null")
			handson_total_count='0';
		
		var handson_abt_expire=data.count[2].handson.abt_expire;
		if(handson_abt_expire==undefined || handson_abt_expire==null || handson_abt_expire=="" || handson_abt_expire=="null")
			handson_abt_expire='0';
		
		var handson_evaluated_count=data.count[2].handson.evaluated_count;
		if(handson_evaluated_count==undefined || handson_evaluated_count==null || handson_evaluated_count=="" || handson_evaluated_count=="null")
			handson_evaluated_count='0';
		
		var handson_pending_count=data.count[2].handson.pending_count;
		if(handson_pending_count==undefined || handson_pending_count==null || handson_pending_count=="" || handson_pending_count=="null")
			handson_pending_count='0';
		
		var handson_submited_count=data.count[2].handson.submiited_count;
		if(handson_submited_count==undefined || handson_submited_count==null || handson_submited_count=="" || handson_submited_count=="null")
			handson_submited_count='0';
		
		
		
		
		 if(! (courseimage.includes('https://')))
			{
				imagePath = domain+courseimage;
			}
			else {
				imagePath = courseimage;
			}
				
   	 //console.log(domain);
		var collapse = (exam_total_count>0 || assessment_total_count>0)?"collapse":"";
		newDiv=newDiv+"<div class=\"panel panel-default\" id='accordion"+courseid +"'>"
					newDiv=newDiv+""
					newDiv=newDiv+"<div class=\"accordion-group showTrance toggleAccordianHeaderColor\">"
					newDiv=newDiv+"<div class=\"panel-heading clearfix\" role=\"tab\" id=\"heading"+courseid +"\">"
					newDiv=newDiv+"<div class=\"posRelative\">"
					newDiv=newDiv+"<div class=\"pull-left imgwrp\" style=\"width:70px\">"
					newDiv=newDiv+"<div class=\"image-container\"><img style=\"max-width: 100%;\"  onerror=\"this.src='/EForms/images/onlineAppForm/default_user_group.png'\" src=\"" +imagePath +"\" class=\"\"></div>"
					newDiv=newDiv+"</div>"
					newDiv=newDiv+"<div class=\"rgtpanel\">"
					newDiv=newDiv+"<div class=\"row\">"
					newDiv=newDiv+"<div class=\"col-md-5 col-sm-8 leftdiv\" style=\"padding-left:0\" >"
					newDiv=newDiv+"<div class=\"courseDetailsDiv\">"
					newDiv=newDiv+"<a><h4 class=\"removemargin no-collapsable\"  onclick=\"redirectToLXURL('"+launch_course_home+"','"+sharedOrgId+"','Y');\">"+data.name+"</h4></a>"

                        newDiv=newDiv+"<div class=\"dashboardDate clearfix\">"

						if(data.c_course_type==2){
                                newDiv=newDiv+"<div class=\"pull-left\"><span data-staticKey=\"Start\"> Start </span> : " +fnGetDate(data.cu_enroll_start_date)+ "</div>"
								newDiv=newDiv+"<div style=\"margin-left:5px\" class=\"pull-left\">-</div>"
								newDiv=newDiv+"<div style=\"margin-left:5px\" class=\"pull-left\"><span data-staticKey=\"End\">End </span> : " +fnGetDate(data.cu_enroll_end_date)+"</div>"
                           }
						else{
                                newDiv=newDiv+"<div class=\"pull-left\"><span data-staticKey=\"Start\">Start </span>:" +fnGetDate(data.c_course_start_date)+"</div>"
								newDiv=newDiv+"<div style=\"margin-left:5px\" class=\"pull-left\">-</div>"
								newDiv=newDiv+"<div style=\"margin-left:5px\" class=\"pull-left\"><span data-staticKey=\"End\">End </span>: "+fnGetDate(data.c_course_end_date)+"</div>"
                           }


							if(data.c_course_type==2){
                                    newDiv=newDiv+"<div class=\"pull-left timeC hidden-xs\"><div class=\"inline-block\" data-staticKey=\"Self Paced\">Self Paced</div>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"<div class=\"visible-xs timeC timeBxs pull-left\"><div class=\"inline-block\" data-staticKey=\"Self Paced\">Self Paced</div></div>"
							}
							else {
									var timeLeft = Math.floor((new Date(data.c_course_end_date).getTime() - new Date().getTime())/(60*60*24*30*1000));
									var timeToDisplay="";
									if(timeLeft>=1)
										timeToDisplay = timeLeft + " <span data-staticKey=\"Months left\">Months left</span>"
									else if(timeLeft==0)
										timeToDisplay = "<span data-staticKey=\"Less than 1 Month left\">Less than 1 Month left</span>"
									newDiv=newDiv+"<div class=\"pull-left timeC hidden-xs\"><div class=\"inline-block\" data-staticKey=\"Regular\">Regular</div><div class=\"inline-block marginleft10\"><img src=\"images/time.png\" style=\"margin-top: -2px;\">" + timeToDisplay +" </div></div>"
							//		newDiv=newDiv+"</div>"
									newDiv=newDiv+"<div class=\"visible-xs timeC timeBxs pull-left\"><div class=\"inline-block\" data-staticKey=\"Regular\">Regular</div><div class=\"inline-block marginleft10\"><img src=\"images/time.png\" style=\"margin-top: -2px;\"> " + timeToDisplay +"</div></div>"
							}


                      newDiv=newDiv+"</div>"	// dashboardDate ends
					  newDiv=newDiv+"</div>"	// courseDetailsDiv ends

						newDiv=newDiv+"<div class=\"fwprogress\">"
						newDiv=newDiv+"<div style=\"width:" +data.percentage_completion+"%;\" class=\"progress-bar\">  </div>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"<div class=\"pull-left progresstext\"> <span class=\"markedAsComplete\" data-staticKey=\"Marked as Complete\" style=\"display:none\"><i></i>Marked as Complete</span> <span class=\"percentageCompleted\">" +data.percentage_completion +"% <span data-staticKey=\"Completed\">Completed</span></span></div>"

						newDiv=newDiv+"</div>" // col-md-5 ends


						newDiv=newDiv+"<div class=\"col-md-7 col-sm-4 posRelative rightdiv\" style=\"padding-left:0\">"

						console.log("launch link: " +domain+launch_course_path);

					/*
						if(data.c_course_type==2){
							if(today<enroll_end_date_check){
								newDiv=newDiv+"<div class=\"pull-right launchwrp\" > <a title=\"Launch Course Content\" target=\"_blank\" onclick=\"javascript: redirectToLXURL('"+domain+launch_course_path+"')\" class=\"pendinglable pull-left \"><i></i><span>Launch</span></a>"
								 courseExpired = 'true';
							}
							else
								newDiv=newDiv+"<div class=\"pull-right margintop30 fontsize13 expiredTxt text-center\"> <a id=\"courseExpired\" class=\"expiredColor\">Expired</a>"
						}
						else {
							if(today<course_end_date_check){
								newDiv=newDiv+"<div class=\"pull-right launchwrp\" > <a title=\"Launch Course Content\" target=\"_blank\" onclick=\"javascript: redirectToLXURL('"+domain+launch_course_path+"')\" class=\"pendinglable pull-left \"><i></i><span>Launch</span></a>"
								 courseExpired = 'true';
							}
							else
								newDiv=newDiv+"<div class=\"pull-right margintop30 fontsize13 expiredTxt text-center\"> <a id=\"courseExpired\" class=\"expiredColor\">Expired</a>"
						}
					*/
					
						if(Type == 'expiredCourse') {
							newDiv=newDiv+"<div class=\"pull-right margintop30 fontsize13 expiredTxt text-center\"> <a id=\"courseExpired\" class=\"expiredColor\"><span id=\"whetherCourseExpired\" data-staticKey=\"Expired\">Expired</a>"
						}
						else {
							newDiv=newDiv+"<div class=\"pull-right launchwrp\" > <a title=\"Launch Course Content\" data-staticKey=\"Launch Course Content\" target=\"_blank\" data-staticKeyType=\"title\" onclick=\"javascript: redirectToLXURL('"+domain+launch_course_path+"','"+sharedOrgId+"','Y');\" class=\"pendinglable pull-left \"><i></i><span data-staticKey=\"Launch\">Launch</span></a>"
							courseExpired = 'true';
						}
						

						newDiv=newDiv+"<div class=\"btn-group marginleft10 margintop20 \">"
						newDiv=newDiv+"<button type=\"button\" class=\"btn btn-default dropdown-toggle hidden-lg hidden-md removeborder Launchbtn\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">"
						newDiv=newDiv+"<i class=\"fa fa-ellipsis-v font18 greyicon\"></i>"
						newDiv=newDiv+"</button>"
			
						newDiv=newDiv+"<ul class=\"dropdown-menu dropdown-menu-right\">"

				if(data.count[0].exam.total_count>0)
							newDiv=newDiv+"<li><a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\".ExamModal" +courseid +"\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','total@@"+data.courseid+"','1','1');\">"+data.count[0].exam.total_count+"+ <span data-staticKey=\"Exams\">Exams</span> ("+data.count[0].exam.pending_count+" <span data-staticKey=\"pending\">pending</span>)</a></li>"
						else
							newDiv=newDiv+"<li><a href=\"javascript:void(0);\">"+data.count[0].exam.total_count+"+ <span data-staticKey=\"Exams\">Exam</span> ("+data.count[0].exam.pending_count+" <span data-staticKey=\"pending\">pending</span>)</a></li>"

						paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_evaluated_count+"@@"+course_type+"@@"+domain;

				if(assessment_total_count>0)
							newDiv=newDiv+"<li><a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\".AssignmentModal" +courseid +"\"  onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\">" +assessment_total_count+" <span data-staticKey=\"Assignments\">Assignments</span> ("+assessment_pending_count+" <span data-staticKey=\"pending\">pending</span>)</a></li>"
						else
							newDiv=newDiv+"<li><a href=\"javascript:void(0);\">" +assessment_total_count+" <span data-staticKey=\"Assignments\">Assignments</span> ("+assessment_pending_count+" <span data-staticKey=\"pending\">pending</span>)</a></li>"
							
							
				if(interaction_total_count>0)
								newDiv=newDiv+"<li><a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\".interactionModal" +courseid +"\"  onclick=\"javascript : fnGetPvcData('interaction','"+paramsAdd+"','1','1')\">" +interaction_total_count+" <span data-staticKey=\"interaction\">Live Lectures</span></a></li>"
							else
								newDiv=newDiv+"<li><a href=\"javascript:void(0);\">" +interaction_total_count+" <span data-staticKey=\"interaction\">Live Lectures</span></a></li>"
								
								
				if(handson_total_count>0)
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\".handsonModal" +courseid +"\"  onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\">" +handson_total_count+" <span data-staticKey=\"handson\">Hands-On</span> ("+handson_pending_count+" <span data-staticKey=\"pending\">pending</span>)</a></li>"
				else
								newDiv=newDiv+"<li><a href=\"javascript:void(0);\">" +handson_total_count+" <span data-staticKey=\"handson\">Hands-On</span> ("+handson_pending_count+" <span data-staticKey=\"pending\">pending</span>)</a></li>"		

						newDiv=newDiv+"</ul>"
						
				/*		newDiv=newDiv+"<div class=\"menuSlider comm-menuSlider \">"
						newDiv=newDiv+"<div class=\"toggleMenu\"></div>"
						newDiv=newDiv+"<div class=\"show-toggleMenu\" style=\"display: none;\">"
						newDiv=newDiv+"<div class=\"Sldrblock clearfix\">"
						newDiv=newDiv+"<div class=\"SldrlinkData\">"
						newDiv=newDiv+"<ul class=\"courseslide\">"
						newDiv=newDiv+"<li class=\"exams\">"
						newDiv=newDiv+"<div class=\"examnormal \">"
						newDiv=newDiv+"<a data-table=\".examtotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot forWeb\" href=\"javascript:void(0)\">"
						newDiv=newDiv+"<div class=\"courseCount margintop8\">"+data.count[0].exam.total_count+" </div>"
						newDiv=newDiv+"<div class=\"margintop3\">Exam</div>"
						newDiv=newDiv+"<div class=\"pendingBox\">"+data.count[0].exam.pending_count+" Pending</div>"
						newDiv=newDiv+"</a>"
						newDiv=newDiv+"<a data-toggle=\"modal\" data-target=\".ExamModal\" class=\"Sldr_Div_link linktot forMob Sldr_Div_activelink\" href=\"javascript:void(0)\">"
						newDiv=newDiv+"<div class=\"courseCount margintop8\">"+data.count[0].exam.total_count+" </div>"
						newDiv=newDiv+"<div class=\"margintop3\">Exam</div>"
						newDiv=newDiv+"<div class=\"pendingBox\">"+data.count[0].exam.pending_count+" Pending</div>"
						newDiv=newDiv+"</a>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</li>"
						newDiv=newDiv+"</ul>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"<div class=\"Sldrblock clearfix\">"
						newDiv=newDiv+"<div class=\"SldrlinkData\">"
						newDiv=newDiv+"<ul class=\"courseslide\">"
						newDiv=newDiv+"<li class=\"assignment SldractiveLi\">"
						newDiv=newDiv+"<a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot forWeb\" href=\"javascript:void(0)\">"
						newDiv=newDiv+"<div align=\"center\" class=\"courseCount posRelative margintop8\">" +assessment_total_count+" </div>"
						newDiv=newDiv+"<div class=\"margintop3\">Assignments</div>"
						newDiv=newDiv+"<div class=\"pendingBox\">"+assessment_pending_count+" Pending</div>"
						newDiv=newDiv+"</a>"
						newDiv=newDiv+"<a data-toggle=\"modal\" data-target=\".AssignmentModal\" class=\"Sldr_Div_link linktot forMob\" href=\"javascript:void(0)\">"
						newDiv=newDiv+"<div align=\"center\" class=\"courseCount posRelative margintop8\">" +assessment_total_count+" </div>"
						newDiv=newDiv+"<div class=\"margintop3\">Assignments</div>"
						newDiv=newDiv+"<div class=\"pendingBox\">"+assessment_pending_count+" Pending</div>"
						newDiv=newDiv+"</a>"
						newDiv=newDiv+"</li>"
						newDiv=newDiv+"</ul>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"
				*/		
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"	//pull-right launchwrp/pull-right margintop30 ends

						if((data.count[0].exam.total_count!=0) || (assessment_total_count!=0) || interaction_total_count!=0 || handson_total_count!=0) {
							
								var onlyOneZero = false;
							
								if(!(data.count[0].exam.total_count!=0 && assessment_total_count!=0 && interaction_total_count!=0 && handson_total_count!=0 ))
									onlyOneZero = true;
							
									newDiv=newDiv+"<div class=\"pull-right Sldr_Div exam-assg1 hide-exam1\">"
									newDiv=newDiv+"<div class=\"Sldrpanel clearfix\">"
								
							if(data.count[0].exam.total_count!=0) {
								
								if(onlyOneZero)
									newDiv=newDiv+"<div class=\"Sldrblock\" style=\"width:100%\">"
								else
									newDiv=newDiv+"<div class=\"Sldrblock \">"
									
									newDiv=newDiv+"<div class=\"SldrlinkData\">"
									newDiv=newDiv+"<ul class=\"courseslide\">"
									newDiv=newDiv+"<li class=\"exams\">"
									newDiv=newDiv+"<div class=\"examnormal \">"
								
								// disabling hover for Completed Courses
								if(Type=="historyCourse")
									newDiv=newDiv+" <a data-table=\".examtotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" >"
								else	
									newDiv=newDiv+" <a data-table=\".examtotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot\" href=\"javascript:void(0)\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','total@@"+data.courseid+"','1','1');\">"
									
								/*	
									else
										newDiv=newDiv+" <a data-table=\".examtotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" href=\"javascript:void(0)\" >"
								*/
								
									newDiv=newDiv+"<div class=\"courseCount margintop8\">"+data.count[0].exam.total_count+" </div>"
									newDiv=newDiv+"<div class=\"margintop3\"><span data-staticKey=\"Exam\">Exam</span></div>"
									newDiv=newDiv+"<div class=\"pendingBox\">"+data.count[0].exam.pending_count+" <span data-staticKey=\"Pending\">Pending</span></div>"
									newDiv=newDiv+"</a> </div>"
									newDiv=newDiv+"</li>"
									newDiv=newDiv+"</ul>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"</div>"
							}
									
							if(assessment_total_count!=0) {	
							
								if(onlyOneZero)
									newDiv=newDiv+"<div class=\"Sldrblock\" style=\"width:100%\">"
								else
									newDiv=newDiv+"<div class=\"Sldrblock \">"
									
									
									newDiv=newDiv+"<div class=\"SldrlinkData\">"
									newDiv=newDiv+"<ul class=\"courseslide\">"
									
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_total_count+"@@"+course_type+"@@"+domain;
									
									newDiv=newDiv+"<li class=\"assignment SldractiveLi\">"
									
								// disabling hover for Completed Courses
								if(Type=="historyCourse")
									newDiv=newDiv+"<a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" >"
								else
									newDiv=newDiv+"<a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot\" href=\"javascript:void(0)\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\">"
								/*
									else
										newDiv=newDiv+"<li class=\"assignment SldractiveLi\"> <a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" href=\"javascript:void(0)\">"
								*/
								
									newDiv=newDiv+"<div align=\"center\" class=\"courseCount posRelative margintop8\">" +assessment_total_count+" </div>"
									newDiv=newDiv+"<div class=\"margintop3\"><span data-staticKey=\"Assignments\">Assignments</span></div>"
									newDiv=newDiv+"<div class=\"pendingBox\">"+assessment_pending_count+" <span data-staticKey=\"Pending\">Pending</span></div>"
									newDiv=newDiv+"</a> </li>"
									newDiv=newDiv+"</ul>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"</div>"
							}
							
							if(interaction_total_count!=0) {	
								
								if(onlyOneZero)
									newDiv=newDiv+"<div class=\"Sldrblock\" style=\"width:100%\">"
								else
									newDiv=newDiv+"<div class=\"Sldrblock \">"
									
									
									newDiv=newDiv+"<div class=\"SldrlinkData\">"
									newDiv=newDiv+"<ul class=\"courseslide\">"
									
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+interaction_total_count+"@@"+course_type+"@@"+domain;
									
									newDiv=newDiv+"<li class=\"exams\">"
									
								// disabling hover for Completed Courses
								if(Type=="historyCourse")
									newDiv=newDiv+"<a data-table=\".interactiontotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" >"
								else
									newDiv=newDiv+"<a data-table=\".interactiontotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot\" href=\"javascript:void(0)\" onclick=\"javascript : fnGetPvcData('interaction','"+paramsAdd+"','1','1')\">"
								/*
									else
										newDiv=newDiv+"<li class=\"assignment SldractiveLi\"> <a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" href=\"javascript:void(0)\">"
								*/
								
									
									newDiv=newDiv+"<div class=\"courseCount margintop8\">" +interaction_total_count+" </div>"
									newDiv=newDiv+"<div class=\"margintop3\"><span data-staticKey=\"interaction\">Live Lectures</span></div>"
									newDiv=newDiv+"<div class=\"pendingBox\">"+interaction_total_count+" <span data-staticKey=\"Pending\">Pending</span></div>"
									newDiv=newDiv+"</a> </li>"
									newDiv=newDiv+"</ul>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"</div>"
							}
							
	                          if(handson_total_count!=0) {	
								
								if(onlyOneZero)
									newDiv=newDiv+"<div class=\"Sldrblock\" style=\"width:100%\">"
								else
									newDiv=newDiv+"<div class=\"Sldrblock \">"
									
									
									newDiv=newDiv+"<div class=\"SldrlinkData\">"
									newDiv=newDiv+"<ul class=\"courseslide\">"
									
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_total_count+"@@"+course_type+"@@"+domain;
									
									newDiv=newDiv+"<li class=\"assignment SldractiveLi\">"
									
								// disabling hover for Completed Courses
								if(Type=="historyCourse")
									newDiv=newDiv+"<a data-table=\".handsontotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" >"
								else
									newDiv=newDiv+"<a data-table=\".handsontotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot\" href=\"javascript:void(0)\" onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\">"
								/*
									else
										newDiv=newDiv+"<li class=\"assignment SldractiveLi\"> <a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" href=\"javascript:void(0)\">"
								*/
								
									newDiv=newDiv+"<div align=\"center\" class=\"courseCount posRelative margintop8\">" +handson_total_count+" </div>"
									newDiv=newDiv+"<div class=\"margintop3\"><span data-staticKey=\"handson\">Hands-On</span></div>"
									newDiv=newDiv+"<div class=\"pendingBox\">"+handson_pending_count+" <span data-staticKey=\"Pending\">Pending</span></div>"
									newDiv=newDiv+"</a> </li>"
									newDiv=newDiv+"</ul>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"</div>"
							}
									
							
							
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"<div class=\"right-arrow right-arrow"+(i+1) + "\" style=\"display: none;\"></div>"
									newDiv=newDiv+"</div>"	//pull-right Sldr_Div exam-assg1 ends
							}
				
					/*
						newDiv=newDiv+"<div class=\"pull-right Sldr_Div hidden-sm hidden-xs\">"
						newDiv=newDiv+"<div class=\"Sldrpanel clearfix\">"
						newDiv=newDiv+"<div class=\"Sldrblock\">"
						newDiv=newDiv+"<div class=\"SldrlinkData\">"
						newDiv=newDiv+"<ul class=\"courseslide\">"
						newDiv=newDiv+"<li class=\"exams\">"	
						

						// Adding totalCountZero class for avoiding hover effect
						if(data.count[0].exam.total_count!=0)
							newDiv=newDiv+"<div class=\"examnormal \"> <a data-table=\".examtotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot\" href=\"javascript:void(0)\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','total@@"+data.courseid+"','1','1');\">"
						else
							newDiv=newDiv+"<div class=\"examnormal \"> <a data-table=\".examtotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" href=\"javascript:void(0)\" >"

						newDiv=newDiv+"<div class=\"courseCount margintop8\">"+data.count[0].exam.total_count+" </div>"
						newDiv=newDiv+"<div class=\"margintop3\">Exam</div>"
						newDiv=newDiv+"<div class=\"pendingBox\">"+data.count[0].exam.pending_count+" Pending</div>"
						newDiv=newDiv+"</a> </div>"		// examnormal ends
						newDiv=newDiv+"</li>"
						newDiv=newDiv+"</ul>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"		// sldrblock ends
						newDiv=newDiv+"<div class=\"Sldrblock \">"
						newDiv=newDiv+"<div class=\"SldrlinkData\">"
						newDiv=newDiv+"<ul class=\"courseslide\">"


						paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_total_count+"@@"+course_type+"@@"+domain;
						// Adding totalCountZero class for avoiding hover effect
						if(assessment_total_count!=0)
							newDiv=newDiv+"<li class=\"assignment SldractiveLi\"> <a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot \" href=\"javascript:void(0)\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\">"
						else
							newDiv=newDiv+"<li class=\"assignment SldractiveLi\"> <a data-table=\".assignmenttotalTable\" data-parent=\"#accordion1\" class=\"Sldr_Div_link linktot totalCountZero\" href=\"javascript:void(0)\">"

						newDiv=newDiv+"<div align=\"center\" class=\"courseCount posRelative margintop8\">" +assessment_total_count+" </div>"
						newDiv=newDiv+"<div class=\"margintop3\">Assignments</div>"
						newDiv=newDiv+"<div class=\"pendingBox\">" +assessment_pending_count+" Pending</div>"
						newDiv=newDiv+"</a> </li>"
						newDiv=newDiv+"</ul>"
						newDiv=newDiv+"</div>"
						newDiv=newDiv+"</div>"		// sldrblock ends
						newDiv=newDiv+"</div>"		// sldrpanel ends
						newDiv=newDiv+"</div>"		// pull-right sldr_div hidden-sm ends
				*/

				
					  if(Type=="historyCourse" || Type=='currentCourse') {

						newDiv=newDiv+"<div class=\"pull-right hidden-sm hidden-xs newDesign_dynamicPanel\" id=\"newDesign_dynamicPanel_1\" style=\"display: block;\">"

						if(data.certificate_link!=null && data.certificate_link!=undefined && data.certificate_link!="" && data.certificate_link!="NA" && data.certificate_link!="na"){

							newDiv=newDiv+"<div class=\"newwDesign_certificate dynamicAdded pull-right\">"
							newDiv=newDiv+"<!--   <div class=\"newDesign_certificateIcon\"></div>-->"
							newDiv=newDiv+"<svg xml:space=\"preserve\" enable-background=\"new 0 0 20 20\" viewBox=\"0 0 20 20\" class=\"newDesign_certificateIcon\" y=\"0px\" x=\"0px\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">"
							newDiv=newDiv+"<circle r=\"9.958\" cy=\"10.083\" cx=\"9.958\" fill=\"#73a7da\" clip-rule=\"evenodd\" fill-rule=\"evenodd\"/>"
							newDiv=newDiv+"<path d=\"M15.472,15.456l-1.946-0.672l-0.648,2.019l-2.786-4.552L7.2,16.803L6.51,14.734l-2.068,0.689l3.336-4.985l2.444,1.449l2.109-1.297L15.472,15.456z\" fill=\"#6EFEA6\" clip-rule=\"evenodd\" fill-rule=\"evenodd\"/>"
							newDiv=newDiv+"<circle r=\"3.969\" cy=\"8.531\" cx=\"10.101\" fill=\"#FFD060\" clip-rule=\"evenodd\" fill-rule=\"evenodd\"/>"
							newDiv=newDiv+"<circle r=\"1.898\" cy=\"8.586\" cx=\"10.148\" fill=\"#FFFFFF\"/>"
							newDiv=newDiv+"</svg>"
							newDiv=newDiv+"<a onclick=\"redirectToLXURL('"+domain+data.certificate_link+"','"+sharedOrgId+"');\" class=\"certificateText lnkTrance\"><span data-staticKey=\"Download Certificate\">Download Certificate</span></a>"
							newDiv=newDiv+"</div>"
						}

						if(data.report_link!=null && data.report_link!=undefined && data.report_link!="" && data.report_link!="NA" && data.report_link!="na"){
							newDiv=newDiv+"<div class=\"newwDesign_report dynamicAdded pull-right\">"
							newDiv=newDiv+"<!--<div class=\"newDesign_reportIcon\"></div>-->"
							newDiv=newDiv+"<svg xml:space=\"preserve\" enable-background=\"new 0 0 20 20\" viewBox=\"0 0 20 20\" class=\"newDesign_reportIcon\" y=\"0px\" x=\"0px\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">"
							newDiv=newDiv+"<g id=\"Layer_8\">"
							newDiv=newDiv+"<circle r=\"9.958\" cy=\"10.083\" cx=\"9.958\" fill=\"#73a7da\" clip-rule=\"evenodd\" fill-rule=\"evenodd\"/>"
							newDiv=newDiv+"<g id=\"Rectangle_1_1_\">"
							newDiv=newDiv+"<g>"
							newDiv=newDiv+"<rect height=\"7.832\" width=\"2.61\" fill=\"#6EFEA6\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"4.344\" x=\"13.004\"/>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"<g id=\"Rectangle_1_copy_1_\">"
							newDiv=newDiv+"<g>"
							newDiv=newDiv+"<rect height=\"6.092\" width=\"2.611\" fill=\"#FFD060\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"6.084\" x=\"8.652\"/>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"<g id=\"Rectangle_1_copy_2_1_\">"
							newDiv=newDiv+"<g>"
							newDiv=newDiv+"<rect height=\"4.351\" width=\"2.61\" fill=\"#E4F1FB\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"7.825\" x=\"4.301\"/>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"<g id=\"Rectangle_2_1_\">"
							newDiv=newDiv+"<g>"
							newDiv=newDiv+"<rect height=\"1.74\" width=\"11.313\" fill=\"#E4F1FB\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"13.916\" x=\"4.301\"/>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"</g>"
							newDiv=newDiv+"</svg>"
							newDiv=newDiv+"<div onclick=\"redirectToLXURL('"+domain+data.report_link+"','"+sharedOrgId+"');\" class=\"reportText lnkTrance\"><span data-staticKey=\"View Report\">View Report</span></div>"
							newDiv=newDiv+"</div>"

						}

						newDiv=newDiv+"</div>"
					  }
					  
					  if(data.markcomp_flag==1) {
							newDiv=newDiv+"<div class=\"greenbtnSpan hideinmobile pull-right\">"
							newDiv=newDiv+"<a class=\"btn-small greenbtn markasread tooltipTipster\" data-toggle=\"modal\" data-target=\"#confirmModal\" data-slug=\""+data.slug +"\" data-courseid=\""+courseid +"\" data-backdrop=\"static\" data-keyboard=\"false\">"
							newDiv=newDiv+"<i class=\"makemark\"></i>"
							newDiv=newDiv+"<span class=\"sanssB\" data-staticKey=\"Mark as Complete\">Mark as Complete</span >"
							newDiv=newDiv+"</a>"
							newDiv=newDiv+"</div>"
						}


                        newDiv=newDiv+"</div>"		// col-md-7 ends
						newDiv=newDiv+"</div>"		// row ends
						newDiv=newDiv+"</div>"		// rgtpanel ends
						newDiv=newDiv+"</div>"		// posRelative ends
						newDiv=newDiv+"</div>"		// panel-heading ends

						newDiv=newDiv+"<div class=\"accordion-body collapse\" id=\"collapse" +courseid +"\">"
						newDiv=newDiv+"<div class=\"accordion-inner clearfix\">"


				if(exam_total_count != 0) {

						newDiv=newDiv+"<div class=\"examtotalTable examtable displaynone\" style=\"display: block;\">"
						newDiv=newDiv+"<div class=\"headSummery clearfix posRelative\">"
						newDiv=newDiv+"<li data-name=\"Total\" class=\"\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','total@@"+data.courseid+"','1','1')\"><span data-staticKey=\"Total\">TOTAL</span> ("+data.count[0].exam.total_count+")</li>"

						if(data.count[0].exam.appeared_count>0)
							newDiv=newDiv+"<li data-name=\"Attempted\" class=\"\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','completed@@"+data.courseid+"','1','1')\"><span data-staticKey=\"Attempted\">ATTEMPTED </span>("+data.count[0].exam.appeared_count+") </li>"
						else
							newDiv=newDiv+"<li data-name=\"Attempted\" class=\"countZero\"><span data-staticKey=\"Attempted\">ATTEMPTED</span> ("+data.count[0].exam.appeared_count+") </li>"

						if(data.count[0].exam.pending_count>0)
							newDiv=newDiv+"<li data-name=\"Pending\" class=\"\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','pending@@"+data.courseid+"','1','1')\"><span data-staticKey=\"Pending\">PENDING </span>("+data.count[0].exam.pending_count+") </li>"
						else
							newDiv=newDiv+"<li data-name=\"Pending\" class=\"countZero\"><span data-staticKey=\"Pending\">PENDING</span> ("+data.count[0].exam.pending_count+") </li>"

						if(data.count[0].exam.abt_expire>0)
							newDiv=newDiv+"<li data-name=\"Expired\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','aboutToExpire@@"+data.courseid+"','1','1')\" ><span data-staticKey=\"About To Expire\">ABOUT TO EXPIRE </span>("+data.count[0].exam.abt_expire+") </li>"
						else
							newDiv=newDiv+"<li data-name=\"Expired\" class=\"countZero\"><span data-staticKey=\"About To Expire\">ABOUT TO EXPIRE</span> ("+data.count[0].exam.abt_expire+") </li>"

						if(data.count[0].exam.eval_count>0)
							newDiv=newDiv+"<li data-name=\"Evaluated\" onclick=\"javascript : fnGetPvcData('exams@@"+domain+"','evaluated@@"+data.courseid+"','1','1')\" ><span data-staticKey=\"Evaluated\">EVALUATED</span> ("+data.count[0].exam.eval_count+") </li>"
						else
							newDiv=newDiv+"<li data-name=\"Evaluated\" class=\"countZero\" ><span data-staticKey=\"Evaluated\">EVALUATED</span> ("+data.count[0].exam.eval_count+") </li>"

						newDiv=newDiv+"<div class=\"closeD pull-right\" data-tooltip=\"tooltip\" data-original-title=\"Close\"></div>"
						newDiv=newDiv+"</div>"		//headSummery ends
						newDiv=newDiv+"<div class=\"whiteBg exmSubtable\">"
						newDiv=newDiv+"<table id='table" +courseid +"Exam' class=\"table  mycoursetable\">"
						newDiv=newDiv+"<thead></thead>"
						newDiv=newDiv+"<tbody></tbody>"


						newDiv=newDiv+"</table>"
						newDiv=newDiv+"</div>"	//whitebg ends
						newDiv=newDiv+"</div>"	//examtotaltable ends
						
						
						
						
						
						
						modalDiv="";
						modalDiv=modalDiv+"<div class=\"modal fade ExamModal ExamModal" +courseid +"\" tabindex=\"-1\" role=\"dialog\" style=\"padding-left: 0px;\">"
						modalDiv=modalDiv+"<div class=\"modal-dialog\">"
						modalDiv=modalDiv+"<div class=\"modal-content\">"
						modalDiv=modalDiv+"<div class=\"modal-header\">"
						modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
						modalDiv=modalDiv+"<h4 class=\"modal-title\">"+data.count[0].exam.total_count+" <span data-staticKey=\"Exam\">Exam</span> ("+data.count[0].exam.total_count+" <span data-staticKey=\"Pending\">pending</span>)</h4>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"<div class=\"modal-body clearfix\">"
						modalDiv=modalDiv+"<div class=\"tabledropdown pull-right col-sm-4 col-xs-12 padding0\">"
						modalDiv=modalDiv+"<div class=\"form-group\">"
						modalDiv=modalDiv+"<select class=\"selectpicker form-control examModalDD\" id=\"examModalDD"+courseid +"\" title=\"Total ("+data.count[0].exam.total_count+")\">"
						
						modalDiv=modalDiv+"<option value=\"exams@@"+domain+",total@@"+data.courseid+",1,1\"><span data-staticKey=\"Total\">Total</span> ("+data.count[0].exam.total_count+") </option>"
						if(data.count[0].exam.appeared_count>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",completed@@"+data.courseid+",1,1\"><span data-staticKey=\"Attempted\">Attempted</span> ("+data.count[0].exam.appeared_count+") </option>"
						else
							modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Attempted\">Attempted</span> ("+data.count[0].exam.appeared_count+") </option>"
						if(data.count[0].exam.pending_count>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",pending@@"+data.courseid+",1,1\"><span data-staticKey=\"Pending\">Pending</span> ("+data.count[0].exam.pending_count+")  </option>"
						else
							modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Pending\">Pending</span> ("+data.count[0].exam.pending_count+")  </option>"
						if(data.count[0].exam.abt_expire>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",aboutToExpire@@"+data.courseid+",1,1)\"><span data-staticKey=\"About To Expire\">About To Expire</span> ("+data.count[0].exam.abt_expire+")  </option>"
						else
							modalDiv=modalDiv+"<option disabled><span data-staticKey=\"About To Expire\">About To Expire</span> ("+data.count[0].exam.abt_expire+")  </option>"
						if(data.count[0].exam.eval_count>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",evaluated@@"+data.courseid+",1,1\"><span data-staticKey=\"Evaluated\">Evaluated</span>("+data.count[0].exam.eval_count+")</option>"
						else
							modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Evaluated\">Evaluted</span>("+data.count[0].exam.eval_count+")</option>"
						
						modalDiv=modalDiv+"</select>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"<div>"
						modalDiv=modalDiv+"<div>"
						modalDiv=modalDiv+"<table class=\"table  mycoursetable no-more-tables\" id=\"examModalTable"+courseid +"\" >"
						modalDiv=modalDiv+"<thead>"
						modalDiv=modalDiv+"</thead>"
						modalDiv=modalDiv+"<tbody>"
						modalDiv=modalDiv+"</tbody>"
						modalDiv=modalDiv+"</table>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
								
					/*
						modalDiv="";
						modalDiv=modalDiv+"<div class=\"modal fade ExamModal ExamModal" +courseid +"\" tabindex=\"-1\" role=\"dialog\">"
						modalDiv=modalDiv+"<div class=\"modal-dialog\">"
						modalDiv=modalDiv+"<div class=\"modal-content\">"
						modalDiv=modalDiv+"<div class=\"modal-header\">"
						modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
						modalDiv=modalDiv+"<h4 class=\"modal-title\">"+data.count[0].exam.total_count+" Exam ("+data.count[0].exam.pending_count+" pending)</h4>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"<div class=\"modal-body clearfix\">"
						modalDiv=modalDiv+"<div class=\"tabledropdown pull-right col-sm-4 col-xs-12 padding0\"> <div class=\"form-group\">"
						
						modalDiv=modalDiv+"<select class=\"selectpicker form-control\" id=\"examModalDD\" title=\"Total ("+data.count[0].exam.total_count+")\" >"
						modalDiv=modalDiv+"<option value=\"exams@@"+domain+",total@@"+data.courseid+",1,1\">Total ("+data.count[0].exam.total_count+") </option>"
						if(data.count[0].exam.appeared_count>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",completed@@"+data.courseid+",1,1\">Attempted ("+data.count[0].exam.appeared_count+") </option>"
						else
							modalDiv=modalDiv+"<option disabled>Attempted ("+data.count[0].exam.appeared_count+") </option>"
						if(data.count[0].exam.pending_count>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",pending@@"+data.courseid+",1,1\">Pending ("+data.count[0].exam.pending_count+")  </option>"
						else
							modalDiv=modalDiv+"<option disabled>Pending ("+data.count[0].exam.pending_count+")  </option>"
						if(data.count[0].exam.abt_expire>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",aboutToExpire@@"+data.courseid+",1,1)\">About To Expire ("+data.count[0].exam.abt_expire+")  </option>"
						else
							modalDiv=modalDiv+"<option disabled>About To Expire ("+data.count[0].exam.abt_expire+")  </option>"
						if(data.count[0].exam.eval_count>0)
							modalDiv=modalDiv+"<option value=\"exams@@"+domain+",evaluated@@"+data.courseid+",1,1\">Evaluted("+data.count[0].exam.eval_count+")</option>"
						else
							modalDiv=modalDiv+"<option disabled>Evaluted("+data.count[0].exam.eval_count+")</option>"
						modalDiv=modalDiv+"</select>"
						modalDiv=modalDiv+"</div></div>"

						modalDiv=modalDiv+"<div>"
						modalDiv=modalDiv+"<div>"
						modalDiv=modalDiv+"<table class=\"table  mycoursetable\" id=\"examModalTable\">"
						modalDiv=modalDiv+"<thead>"

						modalDiv=modalDiv+"</thead>"
						modalDiv=modalDiv+"<tbody>"

						// Body populated in populateExamCourses()
						modalDiv=modalDiv+"</tbody>"
						modalDiv=modalDiv+"</table>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"
						modalDiv=modalDiv+"</div>"

						modalDiv=modalDiv+"</div>" 	//<!-- /.modal-content -->
						modalDiv=modalDiv+"</div>"	//<!-- /.modal-dialog -->
						modalDiv=modalDiv+"</div>"

				*/	
						$('#courseFW-content').append(modalDiv);

				//		$('.ExamModal').html('');
				//		$('.ExamModal').append(modalDiv);
						}


						paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_total_count+"@@"+course_type+"@@"+domain;
						if(assessment_total_count !=0) {
									newDiv=newDiv+"<!-- assignment table -->"

									newDiv=newDiv+"<div class=\"assignmenttotalTable examtable displaynone\" style=\"display: none;\">"
									newDiv=newDiv+"<div class=\"headSummery clearfix posRelative\">"
									newDiv=newDiv+"<li data-name=\"Total\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\" class=\"activeTableHead\"><span data-staticKey=\"Total\">TOTAL</span> ("+assessment_total_count+")</li>"

									paramsAdd="completed@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_submited_count+"@@"+course_type+"@@"+domain;

									if(assessment_submited_count>0)
										newDiv=newDiv+"<li data-name=\"Submitted\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\"><span data-staticKey=\"SUBMITTED\">SUBMITTED</span>  ("+assessment_submited_count+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Submitted\" class=\"countZero\"><span data-staticKey=\"SUBMITTED\">SUBMITTED</span> ("+assessment_submited_count+") </li>"

									paramsAdd="evaluated@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_evaluated_count+"@@"+course_type+"@@"+domain;

									if(assessment_evaluated_count>0)
										newDiv=newDiv+"<li data-name=\"Evaluated\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\"><span data-staticKey=\"EVALUATED\">EVALUATED</span>  ("+assessment_evaluated_count+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Evaluated\" class=\"countZero\" ><span data-staticKey=\"EVALUATED\">EVALUATED</span> ("+assessment_evaluated_count+") </li>"

									paramsAdd="pending@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_pending_count+"@@"+course_type+"@@"+domain;

									if(assessment_pending_count>0)
										newDiv=newDiv+"<li data-name=\"Pending\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\"><span data-staticKey=\"Pending\">PENDING</span>  ("+assessment_pending_count+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Pending\" class=\"countZero\"><span data-staticKey=\"Pending\">PENDING</span> ("+assessment_pending_count+") </li>"

									paramsAdd="aboutToExpire@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_abt_expire+"@@"+course_type+"@@"+domain;

									if(assessment_abt_expire>0)
										newDiv=newDiv+"<li data-name=\"Expired\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\"><span data-staticKey=\"EXPIRED\">EXPIRED</span>  ("+assessment_abt_expire+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Expired\" class=\"countZero\"><span data-staticKey=\"About To Expire\">About To Expire</span> ("+assessment_abt_expire+") </li>"

									newDiv=newDiv+"<div class=\"closeD pull-right\" data-tooltip=\"tooltip\" data-original-title=\"Close\"></div>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"<div class=\"whiteBg exmSubtable\">"
									newDiv=newDiv+"<table id='table" +courseid +"Assign' class=\"table  Total-Table mycoursetable\">"
									newDiv=newDiv+"<thead>"
									// table header populated in populateAssignmentCourses()
									newDiv=newDiv+"</thead>"
									newDiv=newDiv+"<tbody>"
									// Body populated in populateAssignmentCourses()
									newDiv=newDiv+"</tbody>"
									newDiv=newDiv+"</table>"
									newDiv=newDiv+"</div>"	// whitebg ends

									newDiv=newDiv+"<div data-section=\"Assignments\" class=\"footerSummery\"><span data-staticKey=\"Displaying all\">Displaying all</span> "+assessment_total_count+" <span data-staticKey=\"Assignments\">Assignments</span></div>"

						/*
									newDiv=newDiv+"<nav class=\"pull-right\">"
									newDiv=newDiv+"<ul class=\"pagination pagination-sm\">"
									newDiv=newDiv+"<!--<li>"
									newDiv=newDiv+"<a href=\"javascript:void(0);\" aria-label=\"Previous\" title=\"Previous\" data-tooltip=\"tooltip\""
									newDiv=newDiv+"<span aria-hidden=\"true\">&laquo;</span>"
									newDiv=newDiv+"</a>"
									newDiv=newDiv+"</li>-->"
									newDiv=newDiv+"<li class=\"active\"><a href=\"javascript:void(0);\">1</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">2</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">3</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">4</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">5</a></li>"
									newDiv=newDiv+"<li>"
									newDiv=newDiv+"<a href=\"javascript:void(0);\" aria-label=\"Next\" title=\"Next\" data-tooltip=\"tooltip\">"
									newDiv=newDiv+"<i class=\"fa fa-angle-right\"></i>"
									newDiv=newDiv+"</a>"
									newDiv=newDiv+"</li>"
									newDiv=newDiv+"</ul>"
									newDiv=newDiv+"</nav>"
							*/

									newDiv=newDiv+"</div>";		//assignmenttotalTable ends

									
									
									modalDiv="";
									modalDiv=modalDiv+"<div class=\"modal fade AssignmentModal AssignmentModal" +courseid +"\" tabindex=\"-1\" role=\"dialog\" style=\"padding-left: 0px;\">"
									modalDiv=modalDiv+"<div class=\"modal-dialog\">"
									modalDiv=modalDiv+"<div class=\"modal-content\">"
									modalDiv=modalDiv+"<div class=\"modal-header\">"
									modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
									modalDiv=modalDiv+"<h4 class=\"modal-title\">"+assessment_total_count+" <span data-staticKey=\"Assignments\">Assignment</span> ("+assessment_pending_count+" <span data-staticKey=\"pending\">pending</span>)</h4>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div class=\"modal-body clearfix\">"
									modalDiv=modalDiv+"<div class=\"tabledropdown pull-right col-sm-4 col-xs-12 padding0\">"
									modalDiv=modalDiv+"<div class=\"form-group\">"
									modalDiv=modalDiv+"<select class=\"selectpicker form-control\" id=\"assignmentModalDD\" title=\"Total ("+assessment_total_count+")\">"
									
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_total_count+"@@"+course_type+"@@"+domain;
									modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\"><span data-staticKey=\"Total\">Total</span> ("+assessment_total_count+") </option>"

									paramsAdd="completed@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_submited_count+"@@"+course_type+"@@"+domain;
									if(assessment_submited_count>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\"><span data-staticKey=\"Submitted\">Submitted</span> ("+assessment_submited_count+") </option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Submitted\">Submitted</span> ("+assessment_submited_count+") </option>"

									paramsAdd="pending@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_pending_count+"@@"+course_type+"@@"+domain;
									if(assessment_pending_count>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\"><span data-staticKey=\"Pending\">Pending</span> ("+assessment_pending_count+")  </option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Pending\">Pending</span> ("+assessment_pending_count+")  </option>"

									paramsAdd="aboutToExpire@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_abt_expire+"@@"+course_type+"@@"+domain;
									if(assessment_abt_expire>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\"><span data-staticKey=\"About To Expire\">About To Expire</span> ("+assessment_abt_expire+")  </option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"About To Expire\">About To Expire</span> ("+assessment_abt_expire+")  </option>"

									paramsAdd="evaluated@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_evaluated_count+"@@"+course_type+"@@"+domain;
									if(assessment_evaluated_count>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\"><span data-staticKey=\"Evaluated\">Evaluated</span>("+assessment_evaluated_count+")</option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Evaluated\">Evaluated</span>("+assessment_evaluated_count+")</option>"
										
									modalDiv=modalDiv+"</select>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div>"
									modalDiv=modalDiv+"<table class=\"table  mycoursetable no-more-tables\" id=\"assignmentModalTable" +courseid +"\" >"
									modalDiv=modalDiv+"<thead>"
									modalDiv=modalDiv+"<tr>"
									modalDiv=modalDiv+"<th data-staticKey=\"Assessment Name\">Assessment Name</th>"
									modalDiv=modalDiv+"<th class=\"lmstextaligncenter\" data-staticKey=\"No of Attempts\">No of Attempts</th>"
									modalDiv=modalDiv+"<th width=\"17%\" class=\" lmstextaligncenter\" data-staticKey=\"End Date\">End Date</th>"
									modalDiv=modalDiv+"<th width=\"15%\" class=\" lmstextaligncenter\" data-staticKey=\"Status\">Status</th>"
									modalDiv=modalDiv+"<th width=\"15%\" class=\"lmstextaligncenter \" data-staticKey=\"Action\"> Action</th>"
									modalDiv=modalDiv+"</tr>"
									modalDiv=modalDiv+"</thead>"
									modalDiv=modalDiv+"<tbody>"

									modalDiv=modalDiv+"</tbody>"
									modalDiv=modalDiv+"</table>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									
							/*		
									modalDiv="";
									modalDiv=modalDiv+"<div class=\"modal fade AssignmentModal AssignmentModal" +courseid +"\" tabindex=\"-1\" role=\"dialog\">"
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_evaluated_count+"@@"+course_type+"@@"+domain;
									modalDiv=modalDiv+"<div class=\"modal-dialog\">"
									modalDiv=modalDiv+"<div class=\"modal-content\">"
									modalDiv=modalDiv+"<div class=\"modal-header\">"
									modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
									modalDiv=modalDiv+"<h4 class=\"modal-title\">"+assessment_total_count+" Assignment ("+assessment_pending_count+" pending)</h4>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div class=\"modal-body clearfix\">"
									modalDiv=modalDiv+"<div class=\"tabledropdown pull-right col-sm-4 col-xs-12 padding0\"> <div class=\"form-group\">"
									modalDiv=modalDiv+"<select class=\"selectpicker form-control\" id=\"assignmentModalDD\" title=\"Total ("+assessment_total_count+")\" >"
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_total_count+"@@"+course_type+"@@"+domain;
									modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\">Total ("+assessment_total_count+") </option>"

									paramsAdd="completed@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_submited_count+"@@"+course_type+"@@"+domain;
									if(assessment_submited_count>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\">Submitted ("+assessment_submited_count+") </option>"
									else
										modalDiv=modalDiv+"<option disabled>Submitted ("+assessment_submited_count+") </option>"

									paramsAdd="pending@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_pending_count+"@@"+course_type+"@@"+domain;
									if(assessment_pending_count>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\">Pending ("+assessment_pending_count+")  </option>"
									else
										modalDiv=modalDiv+"<option disabled>Pending ("+assessment_pending_count+")  </option>"

									paramsAdd="aboutToExpire@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_abt_expire+"@@"+course_type+"@@"+domain;
									if(assessment_abt_expire>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\">About To Expire ("+assessment_abt_expire+")  </option>"
									else
										modalDiv=modalDiv+"<option disabled>About To Expire ("+assessment_abt_expire+")  </option>"

									paramsAdd="evaluated@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+assessment_evaluated_count+"@@"+course_type+"@@"+domain;
									if(assessment_evaluated_count>0)
										modalDiv=modalDiv+"<option value=\"assignment,"+paramsAdd+",1,1\">Evaluted("+assessment_evaluated_count+")</option>"
									else
										modalDiv=modalDiv+"<option disabled>Evaluted("+assessment_evaluated_count+")</option>"


									modalDiv=modalDiv+"</select>"
									modalDiv=modalDiv+"</div></div>"
									modalDiv=modalDiv+"<div>"
									modalDiv=modalDiv+"<table class=\"table  mycoursetable\" id=\"assignmentModalTable\">"
									modalDiv=modalDiv+"<thead>"
									modalDiv=modalDiv+"<tr>"
									modalDiv=modalDiv+"<th>Assessment Name</th>"
									modalDiv=modalDiv+"<th width=\"17%\" class=\"lmstextaligncenter\">End Date</th>"
									modalDiv=modalDiv+"<th width=\"15%\" class=\"lmstextaligncenter\">Grade</th>"
									modalDiv=modalDiv+"<th width=\"15%\" class=\"lmstextaligncenter\">Marks</th>"
									modalDiv=modalDiv+"<th width=\"15%\" class=\"lmstextaligncenter\">Status</th>"
									modalDiv=modalDiv+"<th width=\"6%\" class=\"lmstextaligncenter\">Action</th>"
									modalDiv=modalDiv+"</tr>"
									modalDiv=modalDiv+"</thead>"
									modalDiv=modalDiv+"<tbody>"

									// tbody populated in populateAssignmentCourses()
									modalDiv=modalDiv+"</tbody>"
									modalDiv=modalDiv+"</table>"
									modalDiv=modalDiv+"</div>"

									modalDiv=modalDiv+"</div>"

									modalDiv=modalDiv+"</div><!-- /.modal-content -->"
									modalDiv=modalDiv+"</div><!-- /.modal-dialog -->"
									modalDiv=modalDiv+"</div>"
							*/
							
									$('#courseFW-content').append(modalDiv);

								//	$('.AssignmentModal').html('');
								//	$('.AssignmentModal').append(modalDiv);
							}
						
						
						
						paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+interaction_total_count+"@@"+course_type+"@@"+domain;
						if(interaction_total_count !=0) {
								
									newDiv=newDiv+"<div class=\"interactiontotalTable examtable displaynone\" style=\"display: none;\">"
									newDiv=newDiv+"<div class=\"headSummery clearfix posRelative\">"
								//	newDiv=newDiv+"<li data-name=\"Total\" onclick=\"javascript : fnGetPvcData('assignment','"+paramsAdd+"','1','1')\" class=\"activeTableHead\"><span data-staticKey=\"Total\">TOTAL</span> ("+assessment_total_count+")</li>"
									newDiv=newDiv+"<div class=\"closeD pull-right\" data-tooltip=\"tooltip\" data-original-title=\"Close\"></div>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"<div class=\"whiteBg exmSubtable\">"
									newDiv=newDiv+"<table id='table" +courseid +"Interaction' class=\"table  Total-Table mycoursetable\">"
									newDiv=newDiv+"<thead>"
									// table header populated in populateAssignmentCourses()
									newDiv=newDiv+"</thead>"
									newDiv=newDiv+"<tbody>"
									// Body populated in populateAssignmentCourses()
									newDiv=newDiv+"</tbody>"
									newDiv=newDiv+"</table>"
									newDiv=newDiv+"</div>"	// whitebg ends

									newDiv=newDiv+"<div data-section=\"interaction\" class=\"footerSummery\"><span data-staticKey=\"Displaying all\">Displaying all</span> "+interaction_total_count+" <span data-staticKey=\"inteaction\">Live Lectures</span></div>"

						/*
									newDiv=newDiv+"<nav class=\"pull-right\">"
									newDiv=newDiv+"<ul class=\"pagination pagination-sm\">"
									newDiv=newDiv+"<!--<li>"
									newDiv=newDiv+"<a href=\"javascript:void(0);\" aria-label=\"Previous\" title=\"Previous\" data-tooltip=\"tooltip\""
									newDiv=newDiv+"<span aria-hidden=\"true\">&laquo;</span>"
									newDiv=newDiv+"</a>"
									newDiv=newDiv+"</li>-->"
									newDiv=newDiv+"<li class=\"active\"><a href=\"javascript:void(0);\">1</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">2</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">3</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">4</a></li>"
									newDiv=newDiv+"<li><a href=\"javascript:void(0);\">5</a></li>"
									newDiv=newDiv+"<li>"
									newDiv=newDiv+"<a href=\"javascript:void(0);\" aria-label=\"Next\" title=\"Next\" data-tooltip=\"tooltip\">"
									newDiv=newDiv+"<i class=\"fa fa-angle-right\"></i>"
									newDiv=newDiv+"</a>"
									newDiv=newDiv+"</li>"
									newDiv=newDiv+"</ul>"
									newDiv=newDiv+"</nav>"
							*/

									newDiv=newDiv+"</div>";		//assignmenttotalTable ends

									
									
									modalDiv="";
									modalDiv=modalDiv+"<div class=\"modal fade interactionModal interactionModal" +courseid +"\" tabindex=\"-1\" role=\"dialog\" style=\"padding-left: 0px;\">"
									modalDiv=modalDiv+"<div class=\"modal-dialog\">"
									modalDiv=modalDiv+"<div class=\"modal-content\">"
									modalDiv=modalDiv+"<div class=\"modal-header\">"
									modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
									modalDiv=modalDiv+"<h4 class=\"modal-title\">"+interaction_total_count+" <span data-staticKey=\"interaction\">Live Lectures</span> </h4>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div class=\"modal-body clearfix\">"
									modalDiv=modalDiv+"<div class=\"tabledropdown pull-right col-sm-4 col-xs-12 padding0\">"
									modalDiv=modalDiv+"<div class=\"form-group\">"
									//modalDiv=modalDiv+"<select class=\"selectpicker form-control\" id=\"interactionModalDD\" title=\"Total ("+assessment_total_count+")\">"	
								//	modalDiv=modalDiv+"</select>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div>"
									modalDiv=modalDiv+"<table class=\"table  mycoursetable no-more-tables\" id=\"interactionModalTable"+courseid +"\" >"
									modalDiv=modalDiv+"<thead>"
									
									modalDiv=modalDiv+"</thead>"
									modalDiv=modalDiv+"<tbody>"
									
									modalDiv=modalDiv+"</tbody>"
									modalDiv=modalDiv+"</table>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
							
							
									$('#courseFW-content').append(modalDiv);
		

		}
						

						if(handson_total_count !=0) {
							
									newDiv=newDiv+"<div class=\"handsontotalTable examtable displaynone\" style=\"display: none;\">"
									newDiv=newDiv+"<div class=\"headSummery clearfix posRelative\">"
									
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_total_count+"@@"+course_type+"@@"+domain;
									newDiv=newDiv+"<li data-name=\"Total\" onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\" class=\"activeTableHead\"><span data-staticKey=\"Total\">Total</span> ("+handson_total_count+")</li>"

									paramsAdd="completed@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_submited_count+"@@"+course_type+"@@"+domain;

									if(handson_submited_count>0)
										newDiv=newDiv+"<li data-name=\"Submitted\" onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\"><span data-staticKey=\"Submitted\">Submitted</span>  ("+handson_submited_count+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Submitted\" class=\"countZero\"><span data-staticKey=\"Submitted\">Submitted</span> ("+handson_submited_count+") </li>"

									paramsAdd="evaluated@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_evaluated_count+"@@"+course_type+"@@"+domain;

									if(handson_evaluated_count>0)
										newDiv=newDiv+"<li data-name=\"Evaluated\" onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\"><span data-staticKey=\"Evaluated\">Evaluated</span>  ("+handson_evaluated_count+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Evaluated\" class=\"countZero\" ><span data-staticKey=\"Evaluated\">Evaluated</span> ("+handson_evaluated_count+") </li>"

									paramsAdd="pending@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_pending_count+"@@"+course_type+"@@"+domain;

									if(handson_pending_count>0)
										newDiv=newDiv+"<li data-name=\"Pending\" onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\"><span data-staticKey=\"Pending\">Pending</span>  ("+handson_pending_count+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Pending\" class=\"countZero\"><span data-staticKey=\"Pending\">Pending</span> ("+handson_pending_count+") </li>"

									paramsAdd="aboutToExpire@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_abt_expire+"@@"+course_type+"@@"+domain;

									if(handson_abt_expire>0)
										newDiv=newDiv+"<li data-name=\"Expired\" onclick=\"javascript : fnGetPvcData('handson','"+paramsAdd+"','1','1')\"><span data-staticKey=\"Expired\">Expired</span>  ("+handson_abt_expire+") </li>"
									else
										newDiv=newDiv+"<li data-name=\"Expired\" class=\"countZero\"><span data-staticKey=\"About To Expire\">About To Expire</span> ("+handson_abt_expire+") </li>"

									newDiv=newDiv+"<div class=\"closeD pull-right\" data-tooltip=\"tooltip\" data-original-title=\"Close\"></div>"
									newDiv=newDiv+"</div>"
									newDiv=newDiv+"<div class=\"whiteBg exmSubtable\">"
									newDiv=newDiv+"<table id='table" +courseid +"Handson' class=\"table  Total-Table mycoursetable\">"
									newDiv=newDiv+"<thead>"
									// table header populated in populateAssignmentCourses()
									newDiv=newDiv+"</thead>"
									newDiv=newDiv+"<tbody>"
									// Body populated in populateAssignmentCourses()
									newDiv=newDiv+"</tbody>"
									newDiv=newDiv+"</table>"
									newDiv=newDiv+"</div>"	// whitebg ends

									newDiv=newDiv+"<div data-section=\"handson\" class=\"footerSummery\"><span data-staticKey=\"Displaying all\">Displaying all</span> "+handson_total_count+" <span data-staticKey=\"handson\">Hands-Ons</span></div>"


									newDiv=newDiv+"</div>";		

									
									
									modalDiv="";
									modalDiv=modalDiv+"<div class=\"modal fade handsonModal handsonModal" +courseid +"\" tabindex=\"-1\" role=\"dialog\" style=\"padding-left: 0px;\">"
									modalDiv=modalDiv+"<div class=\"modal-dialog\">"
									modalDiv=modalDiv+"<div class=\"modal-content\">"
									modalDiv=modalDiv+"<div class=\"modal-header\">"
									modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
									modalDiv=modalDiv+"<h4 class=\"modal-title\">"+handson_total_count+" <span data-staticKey=\"handson\">Hands-On</span> ("+handson_pending_count+" <span data-staticKey=\"pending\">pending</span>)</h4>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div class=\"modal-body clearfix\">"
									modalDiv=modalDiv+"<div class=\"tabledropdown pull-right col-sm-4 col-xs-12 padding0\">"
									modalDiv=modalDiv+"<div class=\"form-group\">"
									modalDiv=modalDiv+"<select class=\"selectpicker form-control\" id=\"handsonModalDD\" title=\"Total ("+handson_total_count+")\">"
									
									paramsAdd="total@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_total_count+"@@"+course_type+"@@"+domain;
									modalDiv=modalDiv+"<option value=\"handson,"+paramsAdd+",1,1\"><span data-staticKey=\"Total\">Total</span> ("+handson_total_count+") </option>"

									paramsAdd="completed@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_submited_count+"@@"+course_type+"@@"+domain;
									if(handson_submited_count>0)
										modalDiv=modalDiv+"<option value=\"handson,"+paramsAdd+",1,1\"><span data-staticKey=\"Submitted\">Submitted</span> ("+handson_submited_count+") </option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Submitted\">Submitted</span> ("+handson_submited_count+") </option>"

									paramsAdd="pending@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_pending_count+"@@"+course_type+"@@"+domain;
									if(handson_pending_count>0)
										modalDiv=modalDiv+"<option value=\"handson,"+paramsAdd+",1,1\"><span data-staticKey=\"Pending\">Pending</span> ("+handson_pending_count+")  </option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Pending\">Pending</span> ("+handson_pending_count+")  </option>"

									paramsAdd="aboutToExpire@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_abt_expire+"@@"+course_type+"@@"+domain;
									if(handson_abt_expire>0)
										modalDiv=modalDiv+"<option value=\"handson,"+paramsAdd+",1,1\"><span data-staticKey=\"About To Expire\">About To Expire</span> ("+handson_abt_expire+")  </option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"About To Expire\">About To Expire</span> ("+handson_abt_expire+")  </option>"

									paramsAdd="evaluated@@"+courseid+"@@"+course_end_date+"@@"+enroll_start_date+"@@"+enroll_end_date+"@@"+handson_evaluated_count+"@@"+course_type+"@@"+domain;
									if(handson_evaluated_count>0)
										modalDiv=modalDiv+"<option value=\"handson,"+paramsAdd+",1,1\"><span data-staticKey=\"Evaluated\">Evaluated</span>("+handson_evaluated_count+")</option>"
									else
										modalDiv=modalDiv+"<option disabled><span data-staticKey=\"Evaluated\">Evaluated</span>("+handson_evaluated_count+")</option>"
										
									modalDiv=modalDiv+"</select>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"<div>"
									modalDiv=modalDiv+"<table class=\"table  mycoursetable no-more-tables\" id=\"handsonModalTable"+courseid +"\" >"
									modalDiv=modalDiv+"<thead>"
									
									modalDiv=modalDiv+"</thead>"
									modalDiv=modalDiv+"<tbody>"
									
									modalDiv=modalDiv+"</tbody>"
									modalDiv=modalDiv+"</table>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									modalDiv=modalDiv+"</div>"
									
						
									$('#courseFW-content').append(modalDiv);

								//	$('.AssignmentModal').html('');
								//	$('.AssignmentModal').append(modalDiv);
							}
						
						
						
						
									newDiv=newDiv+"</div>";		// accordion-inner clearfix ends
									newDiv=newDiv+"</div>";		// accordion-body collapse ends
									newDiv=newDiv+"</div>";		// accordion-group showTrance toggleAccordianHeaderColor ends
									newDiv=newDiv+"</div>";		// panel panel-default activeacordion ends
									
						
						
    }	
    }
    }	
		
	newDiv=newDiv+"<div class=\"container-fluid marginbottom20 \" style=\"padding-left: 0px ! important; padding-top: 8px !important;\">";
	if(parsedData.length>0){
		newDiv=newDiv+"<p class=\"pagenumbertext\"><span class=\"sansSB\">"+parsedData.length+"</span> <span data-staticKey=\"of\">of</span>  <span data-staticKey=\"Total\">Total</span> "+totalCount+" <span data-staticKey=\"Courses\">Courses</span> </p>";
		
		if(typeof window.fnGetPopulateCurrentCoursesPostFuncForResponse == 'function')
			fnGetPopulateCurrentCoursesPostFuncForResponse(parsedData);
		  
		}
	else{
		
		if(typeof window.fnGetPopulateCurrentCoursesPreFuncForNoResponse == 'function') 
			fnGetPopulateCurrentCoursesPreFuncForNoResponse();
		
		$('#SubsSearchBar_courses').css({'display':'none'});
		$('#SubsSearchBarMob_courses').css({'display':'none'});

		if(Type == 'currentCourse')
			$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have no active courses at the moment.">You have no active courses at the moment.</div>');
			else if(Type == 'upcomingCourse')
				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have no upcoming courses.">You have no upcoming courses.</div>');
			else if(Type == 'historyCourse')
				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have not completed any course. Go to current courses tab and complete a course.">You have not completed any course. Go to current courses tab and complete a course.</div>');
			else if(Type == 'expiredCourse')
				$('#courseCF').append('<div id=\"noCourseFW\" class=\"noSubsDataTxt\" style=\"margin: 0 auto; text-align: center;font-size: 14px;\" data-staticKey="You have no expired courses.">You have no expired courses.</div>');
		
		
		if(typeof window.fnGetPopulateCurrentCoursesPostFuncForNoResponse == 'function') 
			fnGetPopulateCurrentCoursesPostFuncForNoResponse();

		//newDiv=newDiv+"<div style=\"margin: 0 auto; width:280px;font-size: 14px;\" data-staticKey=\"No Courses have been subscribed\">No Courses have been subscribed.</div>";
		}
	var pageCount=totalCount/10;
	if(pageCount>1){newDiv=newDiv+"<div class=\" bottompagenum\">";
	//var pageCount=totalCount/10;
	var currPage=$('#PageForCourse').val();
	if(currPage==1){
				newDiv=newDiv+"<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" onclick=\"fnGetPvcData('"+Type+"','',Number("+currPage+")+1);\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
				}
				else if(currPage==pageCount){
				newDiv=newDiv+"<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\" onclick=\"fnGetPvcData('"+Type+"','',Number("+currPage+")-1);\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
				}
				else{
					newDiv=newDiv+"<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\" onclick=\"fnGetPvcData('"+Type+"','',Number("+currPage+")-1);\"><i class=\"fa fa-angle-left\"data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" onclick=\"fnGetPvcData('"+Type+"','',Number("+currPage+")+1);\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
				}

	//newDiv=newDiv+"<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\"></i> Back</a> <a class=\"btn btn-default\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
	newDiv=newDiv+"<nav class=\"hidden-sm hidden-xs\">";

	newDiv=newDiv+"<ul class=\"pagination\">";

	for(var i=1;i<pageCount+1;i++){
		if(i==currPage){
			newDiv=newDiv+"<li class=\"active\" id=\"Page"+i+"\"><a style=\"cursor:pointer\" onclick=\"fnGetPvcData('"+Type+"','','"+i+"');\">"+i+"</a></li>";
		}else{
			newDiv=newDiv+"<li id=\"Page"+i+"\"><a style=\"cursor:pointer\" onclick=\"fnGetPvcData('"+Type+"','','"+i+"');\">"+i+"</a></li>";
		}
	}
	newDiv=newDiv+"</ul>";

	newDiv=newDiv+"</nav>";
	newDiv=newDiv+"</div>";}
	newDiv=newDiv+"</div>";		// container-fluid marginbottom20 ends
	newDiv=newDiv+"</div>";		// panel-group dashboardaccordions ends
//	newDiv=newDiv+"</div>";
	$('#courseFW-content').append(newDiv);
	 $('#courseFW-content').css({'display':'block'});
	$( ".ddForSubType" ).click(function() {
		var id=$(this).attr('id');
		$($('#'+id).parent().parent().siblings('button').contents()[0]).html($('#'+id+' a span.text').html())
		});
	$('.no-collapsable').on('click', function (e) {
	    e.stopPropagation();
	});
	/*
	 if(windowclosecourseId!=""){
	        $("#courseFW-content #heading"+windowclosecourseId+" a").click();
	        windowclosecourseId="";
	    }
	*/
	loadHorizontalTabs();
	if($('#isFormMultilingualRequired').val()!=null && $('#isFormMultilingualRequired').val() == "Y")
	multilingualFormStaticValue("Subscription");
}


function clickOfslideButton(idTemp, type) {
    if (type == "current") {
        fnGetPvcData('exams', 'total@@' + idTemp, '1');
        $(".ui-accordion-header-icon_LX").removeClass("ui-icon-triangle-1-s_LX").addClass("ui-icon-triangle-1-e_LX");
        $(".ui-accordion-header_LX").removeClass("ui-accordion-header-active_LX");
        $(".ui-accordion-header_LX").removeClass("ui-state-active_LX");
        if ($("#" + idTemp).next().css("display") == "block") {
            $("#" + idTemp).next().slideUp();
            $("#" + idTemp).removeClass("ui-accordion-header-active_LX");
            $("#toggle" + idTemp).siblings(".ui-accordion-header-icon_LX").removeClass("ui-icon-triangle-1-s_LX").addClass("ui-icon-triangle-1-e_LX");
            return false;
        }
        else {
            $("#" + idTemp).next().slideDown();
            $("#" + idTemp).addClass("ui-accordion-header-active_LX");
            $("#toggle" + idTemp).siblings(".ui-accordion-header-icon_LX").removeClass("ui-icon-triangle-1-e_LX").addClass("ui-icon-triangle-1-s_LX");
            return false;
        }
    }

    else {
        fnGetPvcData('history', 'total@@' + idTemp, '1');
        $(".ui-accordion-header-icon_LX").removeClass("ui-icon-triangle-1-s_LX").addClass("ui-icon-triangle-1-e_LX");
        $(".ui-accordion-header_LX").removeClass("ui-accordion-header-active_LX");
        $(".ui-accordion-header_LX").removeClass("ui-state-active_LX");
        $("#colourHistoryMainDiv" + idTemp).toggle();
        if ($("#colourHistoryMainDiv" + idTemp).css("display") == "block") {
            //$("#colourHistoryMainDiv"+idTemp).slideUp();
            $("#history" + idTemp).removeClass("ui-accordion-header-active_LX");
            $("#toggleHistory" + idTemp).siblings(".ui-accordion-header-icon_LX").removeClass("ui-icon-triangle-1-s_LX").addClass("ui-icon-triangle-1-e_LX");
            return false;
        }
        else {
            // $("#colourHistoryMainDiv"+idTemp).slideDown();
            $("#history" + idTemp).addClass("ui-accordion-header-active_LX");
            $("#toggleHistory" + idTemp).siblings(".ui-accordion-header-icon_LX").removeClass("ui-icon-triangle-1-e_LX").addClass("ui-icon-triangle-1-s_LX");
            return false;
        }
    }
}
function populateEnablers(parsedData, commId) {
////console.log(parsedData);
	var newDiv="";
	var imagePath="";

	var modalDiv="";

//	modalDiv=modalDiv+"<div class=\"modal FeedsModal fade \" id=\"FeedsModal"+commId +"\" tabindex=\"-1\" role=\"dialog\">"
	modalDiv=modalDiv+"<div class=\"modal-dialog\">"
    modalDiv=modalDiv+"<div class=\"modal-content\">"
    modalDiv=modalDiv+"<div class=\"modal-header\">"
    modalDiv=modalDiv+"<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>"
    modalDiv=modalDiv+"<h4 class=\"modal-title\"><span data-staticKey=\"Latest Feeds\">LATEST FEEDS</span> </h4>"
    modalDiv=modalDiv+"</div>"

    modalDiv=modalDiv+"<div class=\"modal-body clearfix mobscroll\">"
	modalDiv=modalDiv+"<div>"
	modalDiv=modalDiv+"<div class=\"padding20\">"

	
	if(parsedData.length>0){
		
     if(typeof window.fnGetPopulateEnablersPreFunctionForResponse == 'function') {
			
			fnGetPopulateEnablersPreFunctionForResponse(parsedData);
		   }
		
		
		 if(typeof window.fnBuildFormEnablersCustomizedGrid == 'function') {
			 fnBuildFormEnablersCustomizedGrid(parsedData);
     	   }

		 else
			 {

		for (var i=0;i<parsedData.length;i++) {
			 var enabler = parsedData[i];
			 var enabler_title=enabler.enabler_title;
			 var enabler_desc=enabler.enabler_desc;
			 var autherimage=enabler.autherimage;
			 var enabler_type=enabler.enabler_type;
			 var permalink=enabler.permalink;
			 var created_at= new Date(enabler.created_at);
			 var user_name=enabler.user_name;
        	 var domain = enabler.domain;
			 var view_count = enabler.view_count;


        	 if(autherimage == undefined)
        		 {
					modalDiv=modalDiv+"<div style=\"font-size: 15px;\" data-staticKey=\"No Feeds available\"> No Feeds available. </div>";
        		 	newDiv=newDiv+"<div style=\"font-size: 15px;\" data-staticKey=\"No Feeds available\"> No Feeds available. </div>";
        		 	break;
        		 }
        	 else if(! (autherimage.includes(domain)))
        		 {
        		 	imagePath = domain+autherimage;
        		 }
        	 else
        		 imagePath = autherimage;
        	 ////console.log(domain);




					if(i==0)
						newDiv=newDiv+"<div>"
					else
						newDiv=newDiv+"<div class=\"dottedborder\">"
					newDiv=newDiv+"<div class=\"enablerUserDiv\">"
					newDiv=newDiv+"<div class=\"enablerIcon pull-left\">"
					newDiv=newDiv+"<div class=\"enabler-blog\"></div>"
					newDiv=newDiv+"</div>"
					newDiv=newDiv+"<div class=\"topalign  pull-left enablerUserimage\"> <a style=\"cursor: default;\"><div class=\"timelinephotoarea\"><img width=\"50\" height=\"50\" src=\"" +imagePath +"\" class=\"img-circle\"></div></a> </div>"
					newDiv=newDiv+"<div class=\"topalign enablerUsername\"> "
								//	  <!--<div class="tmlnename"> <a href="#nogo" title="John Hernandez">John Hernandez</a> </div>-->
					newDiv=newDiv+"<div class=\"tmlneDescptnhdr Semibold\">" +enabler_title +" </div>"
					newDiv=newDiv+"<div class=\"tmlneUserdetail\">By " +user_name +"<span class=\"views\"> " +fnGetDateTime(created_at) +" </span> <span class=\"views\">" +view_count +" <span data-staticKey=\"Views\">Views</span></span> </div>"
					newDiv=newDiv+"</div>"
					newDiv=newDiv+"</div>"


					newDiv=newDiv+"<div class=\"tmlneDescptntext\">" +enabler_desc +" </div>"
					newDiv=newDiv+"</div>"


					modalDiv=modalDiv+"<div class=\"enablerUserDiv\">"
                    modalDiv=modalDiv+"<div class=\"clearfix\" ><div style=\"padding: 10px; margin: auto; width: 100px;\" class=\"clearfix\"><div class=\"enablerIcon pull-left\">"
                    modalDiv=modalDiv+"<div class=\"enabler-blog \"></div>"
                    modalDiv=modalDiv+"</div>"
					modalDiv=modalDiv+"<div class=\"topalign  pull-left enablerUserimage\"> <a style=\"cursor: default;\"><div class=\"timelinephotoarea\"><img width=\"50\" height=\"50\" class=\"img-circle\" src=\"" +imagePath +"\"></div></a> </div></div>"


                    if(i==0)
						modalDiv=modalDiv+"<div>"
					else
						modalDiv=modalDiv+"<div class=\"dottedborder\">"
                    modalDiv=modalDiv+"<div class=\"tmlneDescptnhdr Semibold text-center\"> " +enabler_title +"</div>"
                    modalDiv=modalDiv+"</div>"



                    modalDiv=modalDiv+"<div class=\"topalign enablerUsername removemargin padding0\" style=\"min-height:auto; padding-bottom:10px; padding-top:10px\"> "


                    modalDiv=modalDiv+"<div class=\"tmlneUserdetail\"><span data-staticKey=\"By\">By</span> " +user_name +" <span class=\"views\"> " +fnGetDateTime(created_at) +" </span> <span class=\"views\">" +view_count +" <span data-staticKey=\"Views\">Views</span></span> </div>"
                    modalDiv=modalDiv+"</div>"
                    modalDiv=modalDiv+"</div>"


                    modalDiv=modalDiv+"<div class=\"tmlneDescptntext removemargin padding0\">" +enabler_desc +"</div>"

		}

	}
		  if(typeof window.fnGetPopulateEnablersPostFunctionForResponse == 'function') {
				
			  fnGetPopulateEnablersPostFunctionForResponse(parsedData);
			 } 
	}
	else
		{
		
		   if(typeof window.fnGetPopulateEnablersPreFunctionForNoResponse == 'function')
			   fnGetPopulateEnablersPreFunctionForNoResponse();
			
		   
		   
		modalDiv=modalDiv+"<div style=\"font-size: 15px;\" data-staticKey=\"No Feeds available\"> No Feeds available. </div>";
		newDiv=newDiv+"<div style=\"font-size: 15px;\" data-staticKey=\"No Feeds available\"> No Feeds available. </div>";
		
		  if(typeof window.fnGetPopulateEnablersPostFunctionForNoResponse == 'function')
			  fnGetPopulateEnablersPostFunctionForNoResponse();
		  
		}
	if(newDiv=="") {
		modalDiv=modalDiv+"<div style=\"font-size: 15px;\" data-staticKey=\"No Feeds available\"> No Feeds available. </div>";
		newDiv=newDiv+"<div style=\"font-size: 15px;\" data-staticKey=\"No Feeds available\"> No Feeds available. </div>";
	}

	modalDiv=modalDiv+"</div>"
    modalDiv=modalDiv+"</div>"
    modalDiv=modalDiv+"</div>"

    modalDiv=modalDiv+"</div>"
	modalDiv=modalDiv+"</div>"
	modalDiv=modalDiv+"</div>"

	$("#FeedsModal").html(modalDiv);

	$("#panel"+commId).html(newDiv);
	$("#panel"+commId).css('background','#f8fbfe')

	if($('#isFormMultilingualRequired').val()!=null && $('#isFormMultilingualRequired').val() == "Y")
	multilingualFormStaticValue("Subscription");

}
function populateCommunity(parsedData, pageNo) {
    ////console.log('comm ui');
    if (parsedData.length > 0) {
    	
    	
    	  if(typeof window.fnGetPopulateCommunityPreFuncForResponse == 'function')
    	  fnGetPopulateCommunityPreFuncForResponse(parsedData);
    	   
    	  
    	  
    	  if(typeof window.fnBuildFormCommunityCustomizedGrid == 'function') {
    		  fnBuildFormCommunityCustomizedGrid(parsedData);
      	   }

    		 else
    			 {
        $('#community-content').html("");
        var cmty0 = parsedData[0];
        var totalCount0 = cmty0.total_courses;
        var newDiv = "",sharedOrgId="";
        newDiv = newDiv + "<div role=\"tabpanel\" class=\"tab-pane active\" id=\"Upcoming\">";
        newDiv = newDiv + "<div class=\"accordionWrp container-fluid\">";
        //newDiv=newDiv+"<p class=\"pagenumbertext\"><span class=\"sansSB\">"+parsedData.length+"</span> of Total "+totalCount0+" Communities </p>";
        newDiv = newDiv + "<div class=\"panel-group dashboardaccordions communityaccordion\" id=\"dashboardaccordion\" role=\"tablist\" aria-multiselectable=\"true\">";
        //console.log(parsedData.length);
        for (var i = 0; i < parsedData.length; i++) {

            var cmty = parsedData[i];
            var totalCount = cmty.total_courses;
            var commId = cmty.id;
            var member_count = cmty.member_count;
            var launch_course = cmty.launch_course;
            var mob_url = cmty.mob_url;
            var slug = cmty.slug;
            var name = cmty.name;
            var logo = cmty.logo;
            var dateStart = new Date(cmty.created_at);
            var dateJoining = new Date(cmty.joined_on);

            var domain = cmty.domain;
            if(cmty.vcgblorganization_id!=null)
					  sharedOrgId=cmty.vcgblorganization_id;
            //console.log(domain);/LX/INDEXES/AppLaunchSAML?serviceid=1&c_id=certificate-in-business-skills-b3&app_id=9519
            //var domain_launch_course = domain+"/LX/home/login_launch_key?c_id="+slug+"&type=iEvolve&lsamltype=abc&showmemwidget=true"
//            var domain_launch_course = domain + launch_course + "&type=iEvolve&lsamltype=abc&showmemwidget=true";
            
            //   var domain_launch_course = domain + launch_course + "&type=iEvolve&lsamltype=abc&showmemwidget=true";		            var domain_launch_course = domain + launch_course + "&type=iEvolve&lsamltype=abc&showmemwidget=true";
  		  var domain_launch_course = domain + launch_course + "&type=iEvolve&lsamltype=abc&showmemwidget=true";		
  					
  		if("isCAABEnabled" in cmty)		
  		{
  		var cabval=cmty.isCAABEnabled;
  		if(validateData(cabval))	
  		domain_launch_course = domain + "/LX/INDEXES/AppLaunchSAML?serviceid=1&eForm=Y&c_id="+slug+"&comm_target_orgId="+sharedOrgId+"&from_external=true&type=iEvolve&lsamltype=abc&showmemwidget=true";		
  		}	
  		
  		
            newDiv = newDiv + "<div class=\"panel panel-default\" id=\"accordion1\">";


            newDiv = newDiv + "<div class=\"accordion-group showTrance toggleAccordianHeaderColor\">";
            newDiv = newDiv + "<div class=\"panel-heading clearfix\" role=\"tab\" id=\"headingOne\" style=\"padding-bottom: 5px;\">";
            newDiv = newDiv + "<div class=\"posRelative\">";
            newDiv = newDiv + "<div class=\"pull-left imgwrp\" style=\"width:70px\">";
            newDiv = newDiv + "<div class=\"image-container\"><img style=\"max-width: 100%;\"  onerror=\"this.src='/EForms/images/onlineAppForm/default_user_group.png'\" src=\"" + logo + "\" height=\"50\" width=\"50\"></div>";
            newDiv = newDiv + "</div>";		//pull-left imgwrp ends
            newDiv = newDiv + "<div class=\"rgtpanel\">";
            newDiv = newDiv + "<div class=\"row\">";
            newDiv = newDiv + "<div class=\"col-md-5 col-sm-7 leftdiv\" style=\"padding-left:0\">";
            newDiv = newDiv + "<div class=\"courseDetailsDiv\">";
            newDiv = newDiv + "<h3 class=\"removemargin\">" + name + "</h3>";

            newDiv = newDiv + "<div class=\"dashboardDate clearfix\">";
            newDiv = newDiv + "<div class=\"pull-left\"><span class=\"lightgreytext\"><span data-staticKey=\"Created\">Created</span>:</span> <span class=\"sansSB\">" + fnGetDateTime(dateStart) + "</span></div>";
            newDiv = newDiv + "<div class=\"pull-left joinwrp hidden-xs\"><i class=\"fa fa-user-plus orangetxt\"></i> <span data-staticKey=\"Joined\">Joined</span> :<span class=\"sansSB\">" + fnGetDate(dateJoining) + " </span></div>";
            newDiv = newDiv + "</div>";		// dashboardDate clearfix ends


            newDiv = newDiv + "<div class=\" visible-xs joinwrp timeBxs\"><i class=\"fa fa-user-plus orangetxt\"></i><span data-staticKey=\"Joined\"> Joined</span> :<span class=\"sansSB\">" + fnGetDate(dateJoining) + " </span></div>";


            newDiv = newDiv + "</div>";		// courseDetailsDiv ends
            newDiv = newDiv + "</div>";		// col-md-5 col-sm-7 leftdiv ends




            //			newDiv=newDiv+"</div>";

            newDiv = newDiv + "<div class=\"col-md-7 col-sm-5 posRelative rightdiv\" style=\"padding-left:0\">";

            newDiv = newDiv + "<div class=\"pull-right launchwrp\"> <a title=\"Launch Community\" data-staticKey=\"Launch Community\" data-staticKeyType=\"title\" target=\"_blank\" onclick=\"redirectToLXURL('" + domain_launch_course +"','"+sharedOrgId+"','Y');\" class=\"pendinglable pull-left \"><i></i><span data-staticKey=\"Launch\">Launch</span></a> ";


            newDiv = newDiv + "<div class=\"btn-group marginleft10 margintop20\">";
            newDiv = newDiv + "<button type=\"button\" class=\"btn btn-default dropdown-toggle hidden-lg hidden-md removeborder Launchbtn\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">";
            newDiv = newDiv + "<i class=\"fa fa-ellipsis-v font18\"></i>";
            newDiv = newDiv + "</button>"
            newDiv = newDiv + "<ul class=\"dropdown-menu dropdown-menu-right\">";


            newDiv = newDiv + "<li><a data-toggle=\"modal\" data-target=\"#FeedsModal\" onclick=\"fnGetPvcData('enabler','" + slug + "@@" + commId + "','1');\"><span data-staticKey=\"Latest Feeds\">Latest Feeds</span> </a></li>";

            newDiv = newDiv + "</ul>";
            newDiv = newDiv + "</div>";		//btn-group marginleft10 ends
            newDiv = newDiv + "</div>";		// pull-right launchwrp ends

            newDiv = newDiv + "<div class=\"pull-right Sldr_Div borderleft hidden-sm hidden-xs\">";
            newDiv = newDiv + "<div class=\"Sldrpanel clearfix\">";
            newDiv = newDiv + "<div class=\"Sldrblock\">";
            newDiv = newDiv + "<div class=\"SldrlinkData\">";
            newDiv = newDiv + "<ul class=\"courseslide\">";
            newDiv = newDiv + "<li class=\"exams\">";
            newDiv = newDiv + "<div class=\"examnormal \"> <a style=\"cursor:default\" href=\"javascript:void(0)\" class=\"_Sldr_Div_link linktot colorblack\" data-parent=\"#accordion1\" data-table=\".passingmarkstable\">";
            //  <!--<div class="courseCount margintop8">120 </div>-->

            newDiv = newDiv + "<div style=\"border:none; line-height:24px;\" class=\"margintop10\"><span data-staticKey=\"Total Subscriptions\">Total Subscriptions</span><span><strong>(" + member_count + ")</strong></span></div>";
            newDiv = newDiv + "</a> </div>";	// examnormal ends
            newDiv = newDiv + "</li>";
            newDiv = newDiv + "</ul>";
            newDiv = newDiv + "</div>";		//SldrlinkData ends
            newDiv = newDiv + "</div>";		//Sldrblock ends
            newDiv = newDiv + "<div class=\"Sldrblock\">";
            newDiv = newDiv + "<div class=\"SldrlinkData\">";
            newDiv = newDiv + "<ul class=\"courseslide\">";
            newDiv = newDiv + "<li class=\"assignment SldractiveLi\"> <a href=\"javascript:void(0)\" class=\"Sldr_Div_link linktot blueTxt\" data-parent=\"#accordion1\" data-table=\".attemtestable\" onclick=\"fnGetPvcData('enabler','" + slug + "@@" + commId + "','1');\">";
            //		<!--<div align="center" class="courseCount posRelative margintop8">99</div>-->
            newDiv = newDiv + "<div class=\"margintop10\"><span data-staticKey=\"Latest Feeds\">Latest Feeds</span></div>";

            newDiv = newDiv + "</a> </li>";
            newDiv = newDiv + "</ul>";
            newDiv = newDiv + "</div>";		// SldrlinkData ends
            newDiv = newDiv + "</div>";		// Sldrblock ends
            newDiv = newDiv + "</div>";		// Sldrpanel clearfix ends
            newDiv = newDiv + "</div>";		// pull-right Sldr_Div borderleft ends


            newDiv = newDiv + "</div>";		// col-md-7 col-sm-5 posRelative rightdiv ends
            newDiv = newDiv + "</div>";		// row ends
            newDiv = newDiv + "</div>";		// rgtpanel ends
            newDiv = newDiv + "</div>";		// posRelative ends
            newDiv = newDiv + "</div>";		// panel-heading clearfix ends

            newDiv = newDiv + "<div class=\"accordion-body collapse\" id=\"collapse1\" style=\"display: block;\">";
            newDiv = newDiv + "<div class=\"accordion-inner clearfix\">";


            newDiv = newDiv + "<div style=\"display: none;\" class=\"attemtestable examtable displaynone\">";
            newDiv = newDiv + "<div class=\"headSummery clearfix posRelative\">";
            newDiv = newDiv + "<li class=\"\" data-name=\"Total\"><span data-staticKey=\"Latest Feeds\">LATEST FEEDS</span></li>";
            newDiv = newDiv + "<div class=\"closeD pull-right\" data-tooltip=\"tooltip\" data-original-title=\"Close\"></div>";
            newDiv = newDiv + "</div>";		// headSummery ends

            newDiv = newDiv + "<div class=\"padding20\" style=\"background : #eee url('/EForms/images/onlineAppForm/form3090/iHUBLoader.gif') no-repeat scroll 50% 27%; padding-bottom:35px;\" id=\"panel" + commId + "\">";
            newDiv = newDiv + "</div>";		// padding20 ends
            newDiv = newDiv + "</div>";		// attemtestable examtable displaynone ends
            newDiv = newDiv + "</div>";		// accordion-inner clearfix ends
            newDiv = newDiv + "</div>";		// accordion-body collapse ends
            newDiv = newDiv + "</div>";		// accordion-group showTrance toggleAccordianHeaderColor ends
            newDiv = newDiv + "</div>";		// panel panel-default ends

        }

        newDiv = newDiv + "<div class=\"container-fluid marginbottom20 \" style=\"padding-left: 0px ! important; padding-top: 8px !important;\">";
        if (parsedData.length > 0) { newDiv = newDiv + "<p class=\"pagenumbertext\"><span class=\"sansSB\">" + parsedData.length + "</span> <span data-staticKey=\"of\">of</span>  <span data-staticKey=\"Total\">Total </span> " + totalCount + " <span data-staticKey=\"Communities\"> Communities </p>"; } else { $('#SubsSearchBar_communities').css({ 'display': 'none' }); newDiv = newDiv + "<div style=\"margin: 0 auto; width:110px; font-size: 17px;\" class=\"noSubsDataTxt\" data-staticKey=\"No Communities have been subscribed\">No Communities have been subscribed</div>"; } var pageCount = totalCount / 10;
        if (pageCount > 1) {
            newDiv = newDiv + "<div class=\" bottompagenum\">";
            //var pageCount=totalCount/10;
            var currPage = $('#PageForCommunity').val();
            //var pageToBeSet = Number(currPage)+1;
            if (currPage == 1) {
                newDiv = newDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\" ></i><span data-staticKey=\"Back\"> Back</span></a> <a class=\"btn btn-default\" onclick=\"fnGetPvcData('communities','',Number(" + currPage + ")+1);\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
            }
            else if (currPage == pageCount) {
                newDiv = newDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\" onclick=\"fnGetPvcData('communities','',Number(" + currPage + ")-1);\"><i class=\"fa fa-angle-left\"></i> <span data-staticKey=\"Back\"> Back</span></a> <a class=\"btn btn-default\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
            }
            else {
                newDiv = newDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\" onclick=\"fnGetPvcData('communities','',Number(" + currPage + ")-1);\"><i class=\"fa fa-angle-left\" ></i> <span data-staticKey=\"Back\"> Back</span></a> <a class=\"btn btn-default\" onclick=\"fnGetPvcData('communities','',Number(" + currPage + ")+1);\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
            }

            newDiv = newDiv + "<nav class=\"hidden-sm hidden-xs\">";
            newDiv = newDiv + "<ul class=\"pagination\">";

            for (var i = 1; i < pageCount + 1; i++) {
                if (i == currPage) {
                    newDiv = newDiv + "<li class=\"active\" id=\"Page" + i + "\"><a   style=\"cursor:pointer\" onclick=\"fnGetPvcData('communities','','" + i + "');\">" + i + "</a></li>";
                } else {
                    newDiv = newDiv + "<li id=\"Page" + i + "\"><a  style=\"cursor:pointer\" onclick=\"fnGetPvcData('communities','','" + i + "');\">" + i + "</a></li>";
                }
            }
            newDiv = newDiv + "</ul>";
            newDiv = newDiv + "</nav>";
            newDiv = newDiv + "</div>";
        }	// bottompagenum ends
        newDiv = newDiv + "</div>";		// container-fluid marginbottom20 ends
        newDiv = newDiv + "</div>";		// panel-group dashboardaccordions communityaccordion ends
        newDiv = newDiv + "</div>";
        newDiv = newDiv + "</div>";

        var mDiv = "<div class=\"modal fade \" id=\"FeedsModal\" tabindex=\"-1\" role=\"dialog\"></div>";
        $('body').append(mDiv);
        $('#community-content').html(newDiv);
        loadHorizontalTabs();
        loadHorizontalTabs();
        $('.no-collapsable').on('click', function (e) {
            e.stopPropagation();
        });
        
    }
        if(typeof window.fnGetPopulateCommunityPostFuncForResponse == 'function')
        	fnGetPopulateCommunityPostFuncForResponse(parsedData);
         
        
    } else {
    	

		   if(typeof window.fnGetPopulateCommunityPreFuncForNoResponse == 'function') 
			   fnGetPopulateCommunityPreFuncForNoResponse();
		
    	
        $('#community-content').html(""); var newDiv = ""; $('#SubsSearchBar_communities').css({ 'display': 'none' });
        newDiv = newDiv + "<div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 15px;\" data-staticKey=\"No Communities have been subscribed\">No Communities have been subscribed.</div>"; $('#community-content').html(newDiv);
        
        if(typeof window.fnGetPopulateCommunityPostFuncForNoResponse == 'function') 
        	fnGetPopulateCommunityPostFuncForNoResponse();
 		
        
        
    }
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
    //		 var noOfPages= Math.ceil(Number(totalCount)/10);
    //		 $('.pagination_div_LX').remove();
    //
    //
    //
    //		 var paginationDiv=	'<div align="center" class="pagination_div_LX"><span ><img  id="prev" onclick="paginationForCom(\'prev\')" align="middle" src="/EForms/images/admin/arrow-darkblue-left.png" style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span><span style="font-size: 16px; text-align: center;" class="blueText_LX">Page <input type="text" value="1" id="inputPage" class="clickable_LX" style="text-align:center;font-size:16px;height:40px;margin-right:5px;padding-left:15px;padding-right:15px;" size="1"> of '+noOfPages+' Pages</span> <span id="next" onclick="paginationForCom(\'next\')"><img  align="middle"  src="/EForms/images/admin/arrow-darkblue-right.png"  style="text-align: center; font-size: 16px; padding-left: 15px; padding-right: 15px; padding-bottom: 10px;"></span></div>';
    //		 commObj.append(paginationDiv);
    // if(totalCount<10) {
    //
    //			 $('#next').removeClass('clickable_LX');
    //			 $('#prev').removeClass('clickable_LX');
    //		 }
    //	 else
    //		 {
    //		 $('#next').addClass('clickable_LX');
    //		 $('#prev').addClass('clickable_LX');
    //		 }
    //			}
    //		else{
    //			 commObj.append('<div>No records.</div>');
    //		}
    //		if(pageNo!=""||pageNo!=undefined)
    //			{
    //			$('#inputPage').val(pageNo);
    //			}
    //
    //		$('.clickable_LX').keypress(function(event){
    //			  var keycode = (event.keyCode ? event.keyCode : event.which);
    //			  if(keycode == '13')
    //				  {
    //			var btnIdentifier=this.id;
    //
    //			var pageNo=$('#'+btnIdentifier).val();
    //
    //			if(btnIdentifier=='prev')
    //				{
    //					pageNo=Number(pageNo)-1;
    //				}
    //			else if(btnIdentifier=='inputPage')
    //				{
    //				pageNo=pageNo;
    //				}
    //			else if(btnIdentifier=='next')
    //				{
    //				pageNo=Number(pageNo)+1;
    //				}
    //			fnGetPvcData("communities","",pageNo);
    //		}
    //		});
    //
    //

}
function paginationForCom(btnIdentifier) {


    var pageNo = $('#inputPage').val();

    if (btnIdentifier == "prev") {
        pageNo = Number(pageNo) - 1;
    }
    else if (btnIdentifier == 'inputPage') {
        pageNo = pageNo;
    }
    else if (btnIdentifier == "next") {
        pageNo = Number(pageNo) + 1;
    }
    if (pageNo != 0)
        fnGetPvcData("communities", "", pageNo);

}


function searchOnEnterCheck(screentype, elementId) {
    //alert('In searchOnEnterCheck');
    var countChk = 0;
    $('#' + elementId).keypress(function (event) {
        if (countChk == 0) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
        }
        else {
            var keycode = "";
        }
        countChk = Number(countChk) + 1;

        {
            if (keycode == '13') {

                keycode = "";
                //var dropdownVal= "";
                //dropdownVal= $('#mainDropDown').val();
                switch (screentype) {
                    case "mycourses":
                        //var idOfSelected=$('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
                        var idOfSelected = $('.list-inline .active').find("a").text();
                        if (idOfSelected == "Current")
                            fnGetPvcData('currentCourse', '', "1");
                        else if (idOfSelected == "Upcoming")
                            fnGetPvcData('upcomingCourse', '', "1");
                        else if (idOfSelected == "History")
                            fnGetPvcData('historyCourse', '', "1");
                        break;
                    case "managecourses":
                        var idOfSelected = $('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
                        if (idOfSelected == "courseTemplate")
                            fnGetPvcData('courseTemplate', '', "1");
                        else if (idOfSelected == "current")
                            fnGetPvcData('ManageCurrentCourse', '', "1");
                        else if (idOfSelected == "upcoming")
                            fnGetPvcData('ManageUpcomingCourse', '', "1");
                        else if (idOfSelected == "history")
                            fnGetPvcData('ManageHistoryCourse', '', "1");
                        break;
                    case "communities":
                        //var idOfSelected=$('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
                        fnGetPvcData('communities', '', "1")
                }


            }
        }
    });
}
function searchOnEnterCheckMobile(screentype, elementId) {
    //alert('In searchOnEnterCheckMobile');
    //var dropdownVal= "";
    //dropdownVal= $('#mainDropDown').val();0
    elementIdForCToChkMob = elementId;
    switch (screentype) {
        case "mycourses":
            var idOfSelected = "";
            //var idOfSelected=$('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
            if (elementIdForCToChkMob == "courseSearchInput_LX")
                idOfSelected = $('#fwcoursetypepanel .list-inline .active').attr('id');//idOfSelected=$('#courseCF .tabLi .active').attr('id');
            else if (elementIdForCToChkMob == "courseSearchInputMob_LX")
                idOfSelected = $('#courseCF .dropdown-menu .active').attr('id');

            searchInput_LXVal = $("#" + elementIdForCToChkMob).val();
            if (elementIdForCToChkMob == "courseSearchInput_LX") {
                if (idOfSelected == "course_current")
                    fnGetPvcData('currentCourse', '', "1");
                else if (idOfSelected == "course_upcoming")
                    fnGetPvcData('upcomingCourse', '', "1");
                else if (idOfSelected == "course_history")
                    fnGetPvcData('historyCourse', '', "1");
            }
            else if (elementIdForCToChkMob == "courseSearchInputMob_LX") {
                if (idOfSelected == "course_current_mob")
                    fnGetPvcData('currentCourse', '', "1");
                else if (idOfSelected == "course_upcoming_mob")
                    fnGetPvcData('upcomingCourse', '', "1");
                else if (idOfSelected == "course_history_mob")
                    fnGetPvcData('historyCourse', '', "1");
            }
            break;
        case "managecourses":
            //var idOfSelected=$('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');

            if (elementIdForCToChkMob == "managecourseSearchInput_LX")
                idOfSelected = $('#fwmanagecoursetypepanel .list-inline .active').attr('id');//idOfSelected=$('#courseManageCF .tabLi .active').attr('id');
            else if (elementIdForCToChkMob == "managecourseSearchInputMob_LX")
                idOfSelected = $('#courseManageCF .dropdown-menu .active').attr('id');
            // idOfSelected=$('#courseCF .mobileCourseTypeFilter .active').find("a").text();
            searchInput_LXVal = $("#" + elementIdForCToChkMob).val();
            if (elementIdForCToChkMob == "managecourseSearchInput_LX") {
                if (idOfSelected == "managecourse_courseTemplate")
                    fnGetPvcData('courseTemplate', '', "1");
                else if (idOfSelected == "managecourse_current")
                    fnGetPvcData('ManageCurrentCourse', '', "1");
                else if (idOfSelected == "managecourse_upcoming")
                    fnGetPvcData('ManageUpcomingCourse', '', "1");
                else if (idOfSelected == "managecourse_history")
                    fnGetPvcData('ManageHistoryCourse', '', "1");
            }
            else if (elementIdForCToChkMob == "managecourseSearchInputMob_LX") {
                if (idOfSelected == "managecourse_courseTemplate_mob")
                    fnGetPvcData('courseTemplate', '', "1");
                else if (idOfSelected == "managecourse_current_mob")
                    fnGetPvcData('ManageCurrentCourse', '', "1");
                else if (idOfSelected == "managecourse_upcoming_mob")
                    fnGetPvcData('ManageUpcomingCourse', '', "1");
                else if (idOfSelected == "managecourse_history_mob")
                    fnGetPvcData('ManageHistoryCourse', '', "1");
            }
            break;
        case "communities":
            //var idOfSelected=$('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
            searchInput_LXVal = $("#commSearchInput_LX").val();
            fnGetPvcData('communities', '', "1")
    }
}

launchLXURL = function (verb, url, data, target) {
    var form = document.createElement("form");
    form.action = url;
    form.method = verb;
    form.target = target || "_self";

    form.style.display = 'none';
    document.body.appendChild(form);
    form.submit();
};

function redirectToLXURL(redirectURLLX,sharedOrgId, newWin) {
//	e.stopPropagation();
	
     $('.no-collapsable').on('click', function (e) { e.stopPropagation(); }); 
     
    $.get('/EForms/PVCConfigurationServlet').done(function (data) {
        console.log("Inside redirectToLXURL. Response data: " + data);

        var orgID = document.getElementById('orgId').value;
        var formID = document.getElementById('formId').value;

        if (data == "true") {
           
            var field = document.getElementById("loginField").value;
            var checksum = document.getElementById('checksum').value;
            var applnSequenceField = document.getElementById('applnSequenceField').value;
            var app_seq_no = document.getElementById(applnSequenceField).value;
            var entId = document.getElementById('entityId').value;
            var loginid = document.getElementById(field + '_div').innerHTML;
            var sessChk = document.getElementById('sessChk').value;
            var parameters = "orgId=" + orgID + "&formId=" + formID + "&checkSum=" + encodeURI(checksum) + "&appSeqNo=" + app_seq_no + "&entId=" + entId + "&loginid=" + loginid + "&applnSequenceField=" + applnSequenceField + "&sessChk=" + sessChk+"&sharedOrgId="+sharedOrgId+ "&subAction=LaunchLX";

            parameters = parameters + "&redirectURLLX=" + encodeURIComponent(redirectURLLX);
            var pValidationServlet = "/EForms/PVCConfigurationServlet?" + parameters;
            
            $.post(pValidationServlet)
             .done(function(o){
                 if(!o.url) { showError(); return;}
                 var container = newWin=='Y' && $('#ESubscriptionLaunchWindow').length ? 'ESubscriptionLaunchWindow' : '_blank';
                 window.open(o.url, container);
             /*    
                 if(redirectURLLX.indexOf("download_certificate_pdf")==-1 && redirectURLLX.indexOf("download_participant_report_card")==-1 && redirectURLLX.indexOf("content_home")==-1) {
                	 showConfirm("Kindly refresh the window.");
                 }
             */    
             })
             .fail(function(){showError()});
           
        }
        else {
            location.reload();
        }
    });


}
function set_course_complete(batch_start_date, batch_end_date, courseId) {
    var batch_start_dateSplit = batch_start_date.split("-");
    var batch_end_dateSplit = batch_end_date.split("-");

    //Start date
    start = new Date(batch_start_dateSplit[0], batch_start_dateSplit[1] - 1, batch_start_dateSplit[2]).getTime() / 1000;
    // End date
    end = new Date(batch_end_dateSplit[0], batch_end_dateSplit[1] - 1, batch_end_dateSplit[2]).getTime() / 1000;

    // Today's date
    today = new Date().getTime() / 1000;

    // Percent = the string, of the rounded number, of today / end date * 100
    var precentage_complete = Math.round((today - start) / (end - start) * 100)
    if (precentage_complete > 100) {
        precentage_complete = 100;
    }
    percent = String(precentage_complete) + "%"; // = ~ 64
    // alert(percent);
    //Change the markers left css to the percent variable
    $("#progressbar" + courseId).css('width', percent);
    return percent;
}
/*functions for online assessment tab*/
function activateCurrentTab(action) {
    if (action == "live") {
        $('#tabsLevel1_LX ul li').filter('#current_oa').addClass('ui-tabs-active_LX ui-state-active_LX');
        $('#tabsLevel1_LX ul li').filter('#upcoming_oa').removeClass('ui-tabs-active_LX ui-state-active_LX');
        $('#tabsLevel1_LX ul li').filter('#history_oa').removeClass('ui-tabs-active_LX ui-state-active_LX');
        
        $('.mainblueSubtab  ul li').eq(0).addClass('active');
        $('.mainblueSubtab  ul li').eq(1).removeClass('active');
		$('.mainblueSubtab  ul li').eq(2).removeClass('active');
		$(".btn-group .btn span.valueDrop").text(' CURRENT ');
        $(".btn-group .btn span.valueDrop").val(' CURRENT ');
    }
    else if (action == "future") {
        $('#tabsLevel1_LX ul li').filter('#current_oa').removeClass('ui-tabs-active_LX ui-state-active_LX');
        $('#tabsLevel1_LX ul li').filter('#upcoming_oa').addClass('ui-tabs-active_LX ui-state-active_LX');
        $('#tabsLevel1_LX ul li').filter('#history_oa').removeClass('ui-tabs-active_LX ui-state-active_LX');
        
        $('.mainblueSubtab  ul li').eq(0).removeClass('active');
        $('.mainblueSubtab  ul li').eq(1).addClass('active');
		$('.mainblueSubtab  ul li').eq(2).removeClass('active');
		$(".btn-group .btn span.valueDrop").text(' UPCOMING ');
        $(".btn-group .btn span.valueDrop").val(' UPCOMING ');
    }
    else if (action == "past") {
        $('#tabsLevel1_LX ul li').filter('#current_oa').removeClass('ui-tabs-active_LX ui-state-active_LX');
        $('#tabsLevel1_LX ul li').filter('#upcoming_oa').removeClass('ui-tabs-active_LX ui-state-active_LX');
        $('#tabsLevel1_LX ul li').filter('#history_oa').addClass('ui-tabs-active_LX ui-state-active_LX');
        
    	$('.mainblueSubtab  ul li').eq(0).removeClass('active');
        $('.mainblueSubtab  ul li').eq(1).removeClass('active');
		$('.mainblueSubtab  ul li').eq(2).addClass('active');
		$(".btn-group .btn span.valueDrop").text(' COMPLETED ');
        $(".btn-group .btn span.valueDrop").val(' COMPLETED ');
    }


}

function fnGetOnlineAssessmentData(action) {

    fnGetOnlineAssessmentData(action, '1');
}
function fnGetOnlineAssessmentDataFW(action) {
    $('.oa_container .searchinput').val("");
    fnGetOnlineAssessmentData(action, '1');
}

function fnGetOnlineAssessmentDataRefresh() {
     $('.oa_container .searchinput').val("");
    fnGetOnlineAssessmentData(oaTabFWFRefresh, '1');
}
function fnGetOnlineAssessmentDataSearch() {
    fnGetOnlineAssessmentData(oaTabFWFRefresh, '1');
}
function fnGetOnlineAssessmentData(action, page) {
    if (typeof window.fnGetDataFrameworkBeforeAjax == 'function') {

        fnGetDataFrameworkBeforeAjax('OA', page);

    }


    var condition = "live";
    var windowCloseEventCallAssId = "";
    if (action != "") {
        if (action.indexOf("liveDelay") >= 0) {
            windowCloseEventCallAssId = action.split("_")[1];
            action = "live";
        }
        oaTabFWFRefresh = action;
        condition = action;
        activateCurrentTab(action);
    }

 


    $('#PageForAssessment').val(page);
    var http_request = fnGetXMLHttpObject();

    var orgID = document.getElementById('orgId').value;

    var formId = document.getElementById('formId').value;

    var checksum = document.getElementById('checksum').value;
    var sessChk = document.getElementById('sessChk').value;

    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;

    var pageNo = page || "1";
    var searchVal = $('.oa_container .searchinput').val() || "";
    var entityId = document.getElementById('entityId').value;
    actionVal = action;
    var actionTaken = "GetMockXML";
    //document.cookie = "app_seq_no=" + app_seq_no;

    var parameters = "orgID=" + orgID + "&formId=" + formId + "&checksum=" + encodeURI(checksum) + "&sessChk=" + sessChk+ "&app_seq_no=" + app_seq_no + "&entityId=" + entityId + "&actionTaken=" + actionTaken + "&applnSequenceField=" + applnSequenceField + "&condition=" + condition + "&pageNo=" + pageNo;
    //alert("parameters:"+parameters);
    if (searchVal != undefined && searchVal != "")
        parameters = parameters + "&filterVal=" + searchVal;
    if (http_request != null) {
        $('#loader-indicator').show();
        var pValidationServlet = "/EForms/LaunchMock";

        http_request.open('POST', pValidationServlet, true);
        http_request.onreadystatechange = function () { fnPopulateOnlineAssessmentData(http_request, condition, pageNo, windowCloseEventCallAssId, searchVal); };
        http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        http_request.send(parameters);
    }

}

function fnViewReport(attempts, resultPublishDate, tabNameSet) {
    //code for handling report link

    var rightnow = new Date();
    var year = resultPublishDate.split("-")[0];
    var month = resultPublishDate.split("-")[1];
    var dayD = resultPublishDate.split("-")[2];
    var day = dayD.split(" ")[0];
    month = month - 1;
    var time = resultPublishDate.split(" ");
    var hours = time[1].split(":")[0];
    var minutes = time[1].split(":")[1];
    var seconds = time[1].split(":")[2];
    var milliseconds = time[1].split(".")[1];
    var startdate = new Date(year, month, day, hours, minutes, seconds, milliseconds);

    if (rightnow < startdate) {
        alert("Report will be available after " + resultPublishDate);

    }
    else {
        //window.open(attempts);
        jQuery('.overlayBG').css("display", "block");
        jQuery('#popupGrid').css({ 'display': 'block', 'position': 'absolute', 'top': '0px' });
        align_popupNewForReport();
        //var tabName = jQuery('#tabs').find('.tabs-selected:eq(0) span').html();
        document.getElementById('frame1').setAttribute("src", attempts);
        document.getElementById("frame1").style = "float:bottom";
        document.getElementById("frame1").style.display = "";
        document.getElementById("popuptitle").innerHTML = tabNameSet;
    }

    //code ends

}




function fnViewReportSecure(attempts, tabNameSet) {

    var field = document.getElementById("loginField").value;
    var orgID = document.getElementById('orgId').value;
    var formID = document.getElementById('formId').value;
    var checksum = "test";
    if (document.getElementById('checksum').value)
        checksum = document.getElementById('checksum').value;
    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;
    var entId = document.getElementById('entityId').value;
    var sessChk = document.getElementById('sessChk').value;
    var loginid = "";
    var url_encoded = encodeURIComponent(attempts);

    var subAction = "LaunchMock";
    var parameters = "orgId=" + orgID + "&formId=" + formID + "&appSeqNo=" + app_seq_no + "&checkSum=" + checksum + "&entId=" + entId + "&applnSequenceField=" + applnSequenceField + "&sessChk=" + sessChk + "&subAction=" + subAction + "&url=" + url_encoded;
    var pValidationServlet = "/EForms/PVCConfigurationServlet?" + parameters;

    $.post(pValidationServlet)
    .done(function (o) {
        if (!o.url) { showError(); return; }
        window.open(o.url, '_blank');
    })
    .fail(function () { showError() });

}



function align_popupNewForReport() {

    var window_height = jQuery(window).height();
    var window_width = jQuery(window).width();
    var popup_height = jQuery('.popup_div').height();
    var popup_width = jQuery('.popup_div').width();
    var marginTop = (window_height - (window_height - 30)) / 2;
    var marginLeft = (window_width - (window_width - 30)) / 2;
    //	jQuery('#frame1').attr('width',(window_width-30)).attr('height',(window_height-60));
    jQuery('#popupGrid').css({ marginLeft: marginLeft + 'px', marginTop: +marginTop + 'px' });
    $('#popupGrid').css({ height: '100%' });
    $('.popup_div').css({ height: '100%' });
    $('.popup_content').css({ height: '100%' });
}

function searchOnEnterCheckOA() {
    var countChk = 0;
    $('#searchInput_OA').keypress(function (event) {

        if (countChk == 0) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
        }
        else {
            var keycode = "";
        }
        countChk = Number(countChk) + 1;



        if (keycode == '13') {
            checkCount = 1;
            keycode = "";

            var idOfSelected = $('.ui-tabs-nav_LX, .ui-helper-reset_LX, .ui-helper-clearfix_LX, .ui-widget-header_LX, .ui-corner-all_LX li').find('.ui-tabs-active_LX').attr('id');
            if (idOfSelected == "current_oa") {
                $('#loader-indicator').show();
                fnGetOnlineAssessmentData('live', '1');
                return false;
            }
            else if (idOfSelected == "upcoming_oa") {
                $('#loader-indicator').show();
                fnGetOnlineAssessmentData('future', '1');
                return false;
            }
            else if (idOfSelected == "history_oa") {
                $('#loader-indicator').show();
                fnGetOnlineAssessmentData('past', '1');
                return false;
            }
        }
        else {
            keycode = "";
        }

    });
}


function fnPopulateOnlineAssessmentData(http_request, condition, pageNo, windowCloseEventCallAssId, searchVal) {
    if (http_request.readyState == 4) {
        if (http_request.status == 200) {
            if (http_request.responseText == "Internal Exception.") {
                console.log(http_request.responseText);
               $('#assessmentsDiv').empty().append('<div style="margin: 0 auto;text-align: center;font-size: 14px;" data-staticKey="No Assessment Subscribed for this Application.">No Assessment Subscribed for this Application.</div>');
                $('#loader-indicator').hide();
            }else if (http_request.responseText =='Session Expired'){
                showError("Your session has been expired. You must Login again.","Session Expired",2000);
                setTimeout(function(){location.reload()},2000);
            }
            else if (http_request.responseText != null) {

                var responseDoc = http_request.responseXML;
                if (responseDoc == null) {
                    var parser = new DOMParser();
                    responseDoc = parser.parseFromString(http_request.responseText, "application/xml");
                }
                OAresponseDoc = responseDoc;
                var $oa = $(responseDoc);
                var list = $oa.find("OnlineAssessmentList");

                if (list && list.length) {
                	
                    if(typeof window.fnBuildOnlineAssessmentDataCustomizedGrid == 'function') 
                     {
                    	fnBuildOnlineAssessmentDataCustomizedGrid(list);
             	     }
             
                    else
                    	{

                       	var checksum = document.getElementById('checksum').value;
                 var sessChk = document.getElementById('sessChk').value;
                   var entityId = document.getElementById('entityId').value;
                    var orgID = document.getElementById('orgId').value,
                        formId = document.getElementById('formId').value,
                        applnSequenceField = document.getElementById('applnSequenceField').value,
                        app_seq_no = document.getElementById(applnSequenceField).value,
                        totalCount = list[0].getAttribute("totalAssessmentCount") | 0,
                        pages = totalCount / 10,
                        x = $oa.find("OnlineAssessment");

                    if (x && x.length) {
                    	
                    	 if(typeof window.fnGetPopulateOnlineAssessmentPreFunctionForResponse == 'function')	
                    		 fnGetPopulateOnlineAssessmentPreFunctionForResponse(x);
                          	   
                        //required DOM
                        var tabContent = $('<div class="tab-content"></div>'),
                            accordionWrp = $('<div role="tabpanel" class="tab-pane active" id="currentcrs"><div class="accordionWrp"></div></div>'),
                            tablist = $('<div class="panel-group dashboardaccordions" id="dashboardaccordion" role="tablist" aria-multiselectable="true"></div>'),
                            tablistbtm = $('<div style="margin-top:30px" class="container-fluid marginbottom50 "></div>');

                        //populating tabs
                        x.each(function getTabs(idx, e) {

                            var as = getProps(e);

                            as.AssessmentLink += "&subscriptionFor=eforms&enrollment_id=" + formId +"&subscriptionId=" + as.SubscriptionId + "&app_seq_no=" + app_seq_no;

                            var attemptsList = e.getElementsByTagName("Attempt"),
                                attemptsTaken = attemptsList.length | 0;
                            
                            var downloadScoreCardMain="";
                            var downloadCertificateMain="";
                            
                            var passingMarksDivMob = as.ShowPassingMarks=="YES" ? "<div class=\"pull-left newAdd\"><span data-staticKey=\"Passing Marks\">Passing Marks</span> <span class=\"Semibold\">" + as.PassingMarks + "</span></div></div></div>" : "" ;
                            
                            var subscriptionsDiv = as.ShowNoOfSubscriptions=="YES"?"<div class=\"pull-left timeB timeBxs clearfix\"> <span data-staticKey=\"Number of subscriptions\">Number of subscriptions</span>: " +as.NoOfSubscription +" </div>" : "";

                            var launchDiv = condition=='live' ? '<a title=\"Launch Assessment\" data-staticKey=\"Launch Assessment\" data-staticKeyType=\"title\" target=\"_blank\" onclick=\"openerNewSecure(\'' + as.AssessmentLink + '\');\" class=\"pendinglable pull-left\"><i></i><span data-staticKey=\"Launch\">Launch</span></a>' : "";
                            
                            var resLink = as.ResultLink + "&subscriptionFor=eforms&enrollment_id=" + formId + "&subscriptionId=" + as.SubscriptionId + "&app_seq_no=" + app_seq_no + "&attemptId=1";
                            var reportDivMain = (attemptsTaken == 1 && condition=='past') ? '<div style="display: block;" class="hidden-sm hidden-xs newwDesign_report dynamicAdded pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"> <circle r="9.958" cy="10.083" cx="9.958" fill="#73a7da" clip-rule="evenodd" fill-rule="evenodd"></circle> <g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg><a onclick="fnViewReportSecure(\'' + resLink + '\', \'\')"> <div class="reportText lnkTrance" data-statickey="View report">View Report</div></a> </div>':"";
                            if(attemptsTaken==1 && condition=='past')
                        	{
                            	
                            	var aList = e.getElementsByTagName("Attempt")[0];
                            	  //console.log("aList"+aList);
                            	var val=getProps(aList);     
                            	var subId=as.SubscriptionId; 
                     			downloadScoreCardMain=val.DownloadScoreCard=="YES"?  '<div style="display: block;" class="hidden-sm hidden-xs newwDesign_report dynamicAdded pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"> <g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg><a onclick="fnGenerateHallCertScoreTicket	(\'' + orgID+ '\',\'' +as.AssessmentId+ '\',\'' + app_seq_no+ '\',\'' +subId+ '\',\'' +formId+ '\',\'' + val.AttemptId+ '\','+"'getScoreCardPath'"+')"><div class="reportText lnkTrance" data-statickey="Download Score Card">Download Score Card</div></a> </div>':"";
                     			downloadCertificateMain=val.DownloadCertficate=="YES"?  '<div style="display: block;" class="hidden-sm hidden-xs newwDesign_report dynamicAdded pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"><g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg><a onclick="fnGenerateHallCertScoreTicket(\'' + orgID+ '\',\'' +as.AssessmentId+ '\',\'' + app_seq_no+ '\',\'' +subId+ '\',\'' +formId+ '\',\'' + val.AttemptId+ '\','+"'getCertificatePath'"+')"><div class="reportText lnkTrance" data-statickey="Download Certificate">Download Certificate</div></a> </div>':"";
                     			
                          	}
                        
                    
                            var totalCountZeroClass = (attemptsTaken==0) ? "totalCountZero" : "" ;
                            var main = $('<div class="panel panel-default" id="accordion' + idx + '"><div class="accordion-group showTrance toggleAccordianHeaderColor"></div></div>'),
                                head = $('<div class="panel-heading clearfix" role="tab" id="headingOne"><div class="posRelative"></div></div>'),
                                    img = $('<div class="pull-left imgwrp" style="width:70px"> <div class="image-container"><img style=\"max-width: 100%;\" src="' + as.LogoPath + '" class=""></div> </div>'),
                                    panel = $('<div class="rgtpanel"><div class="row displayflexwrap"></div></div>');
                            var dateTimeDiv = as.ShowAssessmentDates=="YES" ? '<div class="pull-left"><span data-staticKey="Start">Start</span>: ' + as.StartDate + '</div> '+(as.EndDate && '<div style="margin-left:5px" class="pull-left">-</div> <div style="margin-left:5px" class="pull-left"><span data-staticKey="End">End</span>: ' + as.EndDate + '</div>') : "" ;
                            var left = $('<div class="col-md-5 col-sm-8 leftdiv" style="padding-left:0"> <div class="courseDetailsDiv"> <h3 class="removemargin">' + as.AssessmentName + '</h3>  <div class="dashboardDate clearfix">'+dateTimeDiv +'</div> <div class="pull-left timeB timeBxs"><img src="images/time.png" style="margin-top: -2px;"> <span><span data-staticKey="Alloted Time">Alloted Time</span>: ' + as.AssessmentDuration.split(" ")[0] +'&nbsp;<span data-staticKey="Hours">Hours</span>&nbsp;'+as.AssessmentDuration.split(" ")[2]+'&nbsp;<span data-staticKey="Minutes">minutes</span></div> <br>' + subscriptionsDiv + passingMarksDivMob),
                              right = $('<div class="col-md-7 col-sm-5 posRelative rightdiv" style="margin-left:auto"><div class="pull-right launchwrp">' + launchDiv + reportDivMain + downloadScoreCardMain+ downloadCertificateMain + '<div class="btn-group marginleft10 margintop20 "><button type="button" class="btn btn-default dropdown-toggle hidden-lg hidden-md removeborder Launchbtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-ellipsis-v font18 greyicon greyicon"></i></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="javascript:void(0);"  data-toggle="modal" data-target="#AttemptModal"><span class="totalAttemptsValue">' + as.MaxAttempts + ' </span><span data-staticKey="Total Attempts">Total Attempts</span> (<span class="takenAttemptsValue">' + attemptsTaken + '</span> <span data-staticKey="Taken">taken<span>)</a></li></ul></div></div><div class="pull-right Sldr_Div borderleft hidden-sm hidden-xs"><div class="Sldrpanel displayflex clearfix"><div class="Sldrblock"><div class="SldrlinkData"><ul class="courseslide"><li class="assignment SldractiveLi"><a href="javascript:void(0)" class="Sldr_Div_link linktot ' +totalCountZeroClass +'" data-parent="#accordion' + idx + '" data-table=".attemptstable"></a></li></ul></div></div></div></div></div>'),
                            body = '',loc = '';
                      
                            var downloadHallTicket=as.DownloadHallTicket=="YES"?"<div class=\"downloadHallTicketButton accordianButton htassessment\"><div class=\"halTktCatBtmIcon01 deactivated\" title=\"Download Hall Ticket\" data-statickey=\"Download Hall Ticket\" data-statickeytype=\"title\"><a href=\"#\" onclick=\"fnGenerateHallCertScoreTicket("+orgID+",'"+as.AssessmentId+"','"+app_seq_no+"','"+as.SubscriptionId+"','"+formId+"','"+""+"','"+"getHallTicketPath"+"')\"><i class=\"fa fa-download\" aria-hidden=\"true\"></i><span data-statickey=\"Hall Ticket\">Hall Ticket</span></a></div></div>":"";
                            
                            var passingMarksDiv = as.ShowPassingMarks=="YES" 
                            	? '<div class="Sldrblock"><div class="SldrlinkData"><ul class="courseslide"><li class="exams"><div class="examnormal "><a href="javascript:void(0)" class="Sldr_link hoverdisabled"><div class="courseCount margintop8">' + as.PassingMarks + '</div><div class="courseCount margintop8 assignmenttopborder" style="">' + as.TotalMarks + '</div><div style="border:none" class="pendingBox" data-staticKey="Passing Marks">Passing Marks</div></a></div></li></ul></div></div>'
                            	: '<div class="Sldrblock"><div class="SldrlinkData"><ul class="courseslide"><li class="exams"><div class="examnormal "><a href="javascript:void(0)" class="Sldr_link hoverdisabled"><div class="courseCount margintop8" style="">' + as.TotalMarks + '</div><div class="margintop3"><span data-staticKey="Total Marks">Total Marks</span></div></a></div></li></ul></div></div>';
                            
                            
                            var panelInner = right.find('.Sldrpanel');
                            panelInner.prepend(passingMarksDiv);
                            panelInner.prepend(downloadHallTicket);
                            
                            var attemptText;
                            if(as.ShowAttempts=="NO"){
                            	attemptText = (attemptsTaken==1) ? "<span data-staticKey=\"Attempt\">Attempt</span>" : "<span data-staticKey=\"Attempts\">Attempts</span>";
                            	right.find('.linktot').append('<div class="courseCount posRelative margintop8" align="center">' + attemptsTaken + '</div> <div class="margintop3">' + attemptText + '<br><span data-staticKey="Taken">taken</span></div>');
                            } 
                            else {
                            	attemptText = (as.MaxAttempts==1) ? "<span data-staticKey=\"Attempt\">Attempt</span>" : "<span data-staticKey=\"Attempts\">Attempts</span>";
                            	right.find('.linktot').append('<div class="courseCount posRelative margintop8" align="center">' + as.MaxAttempts + '</div> <div class="margintop3">' + attemptText + '</div> <div class="pendingBox">' + attemptsTaken + '&nbsp;<span data-staticKey="Taken">Taken</span></div>');
                                  }
                            	
                            	
                            if (as.ShowLaunchButton == 'NO' && launchDiv!='') 
							right.find('.launchwrp').empty();

                            if (as.BookingOpen == "YES" && validBookingDate(as.BookingAllowedTill)) 
							{
							
							//for Mobile UI
							  if (as.ShowLaunchButton == 'NO') 
								   { 
								       right.append('<div class="proct pull-right hidden-sm hidden-xs" onclick="fnGetSlotModal(\'OnlineAssessment\', \'' + as.AssessmentId + '\', \'' + as.SubscriptionId + '\')" data-toggle="modal" data-target="#proctModal"> <span class="proctoralIcon"></span> Proctored </div>');
								       right.append('<div class="proct pull-left hidden-lg hidden-md" onclick="fnGetSlotModal(\'OnlineAssessment\', \'' + as.AssessmentId + '\', \'' + as.SubscriptionId + '\')" data-toggle="modal" data-target="#proctModal"> <span class="proctoralIcon"></span> Proctored </div>');
								       right.append('<div class="pull-right btn-group marginleft10 margintop20 "><button type="button" class="btn btn-default dropdown-toggle hidden-lg hidden-md removeborder Launchbtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-ellipsis-v font18 greyicon greyicon"></i></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="javascript:void(0);"  data-toggle="modal" data-target="#AttemptModal"><span class="totalAttemptsValue">' + as.MaxAttempts + ' </span><span data-staticKey="Total Attempts">Total Attempts</span> (<span class="takenAttemptsValue">' + attemptsTaken + '</span> <span data-staticKey="Taken">taken<span>)</a></li></ul></div></div><div class="pull-right Sldr_Div borderleft hidden-sm hidden-xs"><div class="Sldrpanel displayflex clearfix"><div class="Sldrblock"><div class="SldrlinkData"><ul class="courseslide"><li class="assignment SldractiveLi"><a href="javascript:void(0)" class="Sldr_Div_link linktot ' +totalCountZeroClass +'" data-parent="#accordion' + idx + '" data-table=".attemptstable"></a></li></ul></div></div></div></div></div>');
								   }
							
							  else if (as.ShowLaunchButton == 'YES') 
							      {
								  right.append('<div class="proct pull-right" onclick="fnGetSlotModal(\'OnlineAssessment\', \'' + as.AssessmentId + '\', \'' + as.SubscriptionId + '\')" data-toggle="modal" data-target="#proctModal"> <span class="proctoralIcon"></span> Proctored </div>');
							      }
							
							      
                            
							};
                            if (as.TcBooked) {
                                var tc = {}; try { tc = JSON.parse(as.TcBooked); } catch (err) { }
                                var slotStart = as.SlotStartTime ? as.SlotStartTime.trim().split(/\s+/) : [];
                             
                                if (!(actionVal=='past'))
                                	{
                                loc = '<div class="locationChange row">' ;
                              //  if(as.AllowTcChange=='YES')
                                loc=loc+'<div class="addressInfo"><span class="locIcon"></span><p>' + (tc.tcAddress || '') + '<a onclick="fnShowDivs(\'OnlineAssessment\', \'' + as.AssessmentId + '\', \'' + as.SubscriptionId + '\', \'' + tc.tcState + '\',\'' + tc.tcCity + '\', \'' + tc.tcId + '\',\'addrInfo\')" data-toggle="modal" data-target="#proctModal" class="change"> Change </a></p></div>' ;
                              //  if(as.AllowSlotChange=='YES')                   
                                loc=loc+'<div class="slotInfo"><div><span class="semibold">Slot: </span>' + (slotStart[0] || '') + ' | ' + (slotStart[1] || '') + '<a onclick="fnShowDivs(\'OnlineAssessment\', \'' + as.AssessmentId + '\', \'' + as.SubscriptionId + '\', \'' + tc.tcState + '\',\'' + tc.tcCity + '\', \'' + tc.tcId + '\',\'slotInfo\')" data-toggle="modal" data-target="#proctModal" class="change"> Change </a></div></div>' ;
                                                        
                                loc=loc+'<div class="clearfix"></div>' ;
                                loc=loc+'</div>';
                                	}
                                
                                 
                                
                            }

                            panel.find('.row').append(left, right);
                            head.find('.posRelative').append(img, panel,loc);


                            if (attemptsTaken) {
                                //populating attempt tabs if attemptsTaken
                                body = $('<div class="accordion-body collapse" id="collapse' + idx + '"><div class="accordion-inner clearfix"><div style="display: block;" class="attemptstable examtable displaynone"></div></div></div>');
                                var headSummery = $('<div class="headSummery clearfix posRelative"> <li class="" data-name="Total"><span data-staticKey="TOTAL TAKEN">TOTAL TAKEN</span> (<span data-staticKey="'+ attemptsTaken +'">' + attemptsTaken + '</span>)</li> <div class="closeD pull-right" data-tooltip="tooltip" data-original-title="Close"></div> </div>'),
                                    content = $('<div class="padding20 attemptscrolldiv"></div>'),
                                    attemptsul = $('<ul class="list-inline clearfix owl-carousel" role="tablist"></ul>'),
                                    attempts = $('<div class ="tab-content"></div>'), list = [];



                                $(attemptsList).each(function getAttempts(i, atmpt) {
                                    var a = getProps(atmpt);
                                    a.ResultLink = as.ResultLink + "&subscriptionFor=eforms&enrollment_id=" + formId + "&subscriptionId=" + as.SubscriptionId + "&app_seq_no=" + app_seq_no + "&attemptId=" + a.AttemptId;
                                    a.ShowStatus = as.ShowStatus;
                                    a.ShowMarksObtained = as.ShowMarksObtained;
                                    a.ShowQuestionLevelReport = as.ShowQuestionLevelReport;
                                    a.ShowAssessmentDates = as.ShowAssessmentDates;
                                    list.push(a);

                                    var dateInfodiv1 = $('<div class="dateInfodiv dateInfodiv1 clearfix"> </div>'),
                                        atmptloc = '',
                                        starttime = a.StartTime && $('<div class="pull-left dateinfoLeft"> <div class="timestap clearfix "> <div class="pull-left"><i class="startdate"></i></div> <div class="pull-left"> <div data-staticKey="Start Date">Start Date</div> <div class="date">' + a.StartTime + '</div> </div> </div> </div>'),
                                        endtime = a.EndTime && $('<div class="pull-left dateinfoRight  "> <div class="timestap clearfix"> <div class="pull-left"><i class="enddate"></i></div> <div class="pull-left"> <div data-staticKey="End Date">End Date</div> <div class="date">' + a.EndTime + '</div> </div> </div> </div>'),
                                        dateInfodiv2 = $('<div class="dateInfodiv dateInfodiv2  clearfix"> </div>'),
                                        scorediv = $('<div class="pull-left dateinfoLeft"> <div class="timestap clearfix"> <div class="pull-left"><i class="Score"></i></div> <div class="pull-left"> <div data-staticKey="Score">Score</div> <div class="date">' + a.Score + '</div></div> </div> </div>');
                                        
                                        starttime = a.ShowAssessmentDates=="YES" ? starttime : "" ;
                                    	endtime = a.ShowAssessmentDates=="YES" ? endtime : "" ;
                                        
                                        scorediv = a.Score && a.ShowMarksObtained == "YES" ? scorediv : "" ;
                                        
                                     /*   progressdiv = a.status === 'progress'
                                            ? $('<div class="pull-left dateinfoRight width100"> <div class="timestap clearfix"> <div class="pull-left"><i class="fa fa-hourglass-half" aria-hidden="true"></i></div> <div class="pull-left"> <div class="orangetxt font18" data-staticKey="Progress">Progress</div> </div> </div> </div>')
                                            : "";
                                        var passfaildiv = a.status === 'Pass'
                                            ? $('<div class="pull-left dateinfoRight "> <div class="timestap passDiv clearfix"> <div class="pull-left"><i class="pass" style="color:#0C6"></i></div> <div class="pull-left"> <div data-staticKey="Pass">Pass</div> </div> </div> </div>')
                                            : $('<div class="pull-left dateinfoRight "> <div class="timestap failDiv clearfix"> <div class="pull-left"><i class="fail" style="color:#0C6"></i></div> <div class="pull-left"> <div data-staticKey="Fail">Fail</div> </div> </div> </div>'),
                                            
                                            */
                                        
                                        progressdiv=""; 
                                        passfaildiv="";
                                        
                                        switch (a.status){
                                            case 'Evaluation Pending': progressdiv = '<div class="pull-left dateinfoRight"> <div class="timestap clearfix"> <div class="pull-left"><i class="fa fa-hourglass-half" aria-hidden="true"></i></div> <div class="pull-left"> <div class="orangetxt font18" data-staticKey="Evaluation Pending">Evaluation Pending</div> </div> </div> </div>'; break;
                                            case 'progress': progressdiv = '<div class="pull-left dateinfoRight"> <div class="timestap clearfix"> <div class="pull-left"><i class="fa fa-hourglass-half" aria-hidden="true"></i></div> <div class="pull-left"> <div class="orangetxt font18" data-staticKey="Progress">Progress</div> </div> </div> </div>'; break;
                                            case 'Pass': passfaildiv = '<div class="pull-left dateinfoRight "> <div class="timestap passDiv clearfix"> <div class="pull-left"><i class="pass" style="color:#0C6"></i></div> <div class="pull-left"> <div data-staticKey="Pass">Pass</div> </div> </div> </div>';break;
                                            case 'Fail': passfaildiv = '<div class="pull-left dateinfoRight "> <div class="timestap failDiv clearfix"> <div class="pull-left"><i class="fail" style="color:#0C6"></i></div> <div class="pull-left"> <div data-staticKey="Fail">Fail</div> </div> </div> </div>';break;
                                        }    
                                        
                                        passfaildiv = a.ShowStatus=="YES" ? passfaildiv : "" ;
                                        
                                        var reportdiv = a.ShowQuestionLevelReport === 'YES'
                                            ? $('<div onclick="fnViewReportSecure(\'' + a.ResultLink + '\', \'\')" class="newwDesign_report dynamicAdded margintop10 pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"> <circle r="9.958" cy="10.083" cx="9.958" fill="#73a7da" clip-rule="evenodd" fill-rule="evenodd"></circle> <g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg> <div  style="cursor: pointer" class="reportText lnkTrance fontsize12" data-staticKey="View report">View Report</div> </div>')
                                            : "";
                                        
                                       // var downloadScoreCard=a.DownloadScoreCard=="YES"?"<div class=\"downloadHallTicketButton accordianButton htassessment\"><div class=\"halTktCatBtmIcon01 deactivated\" title=\"Download Score Card\" data-statickey=\"Download Score Card\" data-statickeytype=\"title\"><a href=\"#\" onclick=\"fnGenerateHallCertScoreTicket("+orgID+",'"+as.AssessmentId+"',"+app_seq_no+","+as.SubscriptionId+",'"+formId+"','"+a.AttemptId+"','"+"getScoreCardPath"+"')\"><i class=\"fa fa-download\" aria-hidden=\"true\"></i><span data-statickey=\"Score Card\">Score Card</span></a></div></div>":"";
                                       
                                            
                                      var downloadScoreCard=a.DownloadScoreCard=="YES"? $('<div onclick="fnGenerateHallCertScoreTicket(\'' + orgID+ '\',\'' +as.AssessmentId+ '\',\'' + app_seq_no+ '\',\'' +as.SubscriptionId+ '\',\'' +formId+ '\',\'' + a.AttemptId+ '\','+"'getScoreCardPath'"+')" class="newwDesign_report dynamicAdded margintop10 pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"><g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg> <div  style="cursor: pointer" class="reportText lnkTrance fontsize12" data-staticKey="Download Score Card">Download Score Card</div> </div>') : "";
                           		     var downloadCertificate=a.DownloadCertficate=="YES"? $('<div onclick="fnGenerateHallCertScoreTicket(\'' + orgID+ '\',\'' +as.AssessmentId+ '\',\'' + app_seq_no+ '\',\'' +as.SubscriptionId+ '\',\'' +formId+ '\',\'' + a.AttemptId+ '\','+"'getCertificatePath'"+')" class="newwDesign_report dynamicAdded margintop10 pull-left"><svg xml:space="preserve" enable-background="new 0 0 20 20" viewBox="0 0 20 20" class="newDesign_reportIcon" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1"> <g id="Layer_8"><g id="Rectangle_1_1_"> <g> <rect height="7.832" width="2.61" fill="#6EFEA6" clip-rule="evenodd" fill-rule="evenodd" y="4.344" x="13.004"></rect> </g> </g> <g id="Rectangle_1_copy_1_"> <g> <rect height="6.092" width="2.611" fill="#FFD060" clip-rule="evenodd" fill-rule="evenodd" y="6.084" x="8.652"></rect> </g> </g> <g id="Rectangle_1_copy_2_1_"> <g> <rect height="4.351" width="2.61" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="7.825" x="4.301"></rect> </g> </g> <g id="Rectangle_2_1_"> <g> <rect height="1.74" width="11.313" fill="#E4F1FB" clip-rule="evenodd" fill-rule="evenodd" y="13.916" x="4.301"></rect> </g> </g> </g> </svg> <div  style="cursor: pointer" class="reportText lnkTrance fontsize12" data-staticKey="Download Certificate">Download Certificate</div> </div>') : "";
                                     
                                        if(attemptsTaken==1 && condition=='past') 
                                        	{
    											reportdiv = "";
    											downloadScoreCard="";
                                            	downloadCertificate="";
                                        	}
                                            
                                        if(a.messageToBeShown==='Attempt in Progress') {
                                        	passfaildiv="";
                                        	reportdiv="";
                                        	endtime="";
                                        	scorediv="";
                                        	downloadScoreCard="";
                                        	downloadCertificate="";
                                        }

                                    dateInfodiv1.append(starttime, endtime);
                                    dateInfodiv2.append(progressdiv, scorediv, passfaildiv, reportdiv,downloadScoreCard,downloadCertificate);

                                    if(a.TcBooked){
                                        var atc={}; try{ atc = JSON.parse(a.TcBooked); } catch(err){}
                                        atmptloc = '<div class="clearfix"></div><div class="testCenterAddressPanel"> <h4>Test Center for this Attempt</h4> <div class="address"> <div class="pull-left"> <p>'+(atc.tcName||'')+'</p> <p>'+(atc.tcAddress||'')+'</p> </div> <div class="testDate pull-left"> <span class="slotIcon"></span> <span class="date">'+getDate(a.StartTime)+'</span> | <span class="time">'+(a.StartTime && a.StartTime.split(' ')[1] || '')+'</span> </div> <div class="clearfix"></div> </div> </div>';
                                    }

                                    $('<div role="tabpanel" class="tab-pane clearfix" id="tab' + idx + 'attempt' + a.AttemptId + '"></div>')
                                        .append(dateInfodiv1, dateInfodiv2,atmptloc).appendTo(attempts);

                                    attemptsul.append('<li><a href="#tab' + idx + 'attempt' + a.AttemptId + '" aria-controls="tab' + idx + 'attempt' + a.AttemptId + '" role="tab" data-toggle="tab"><span data-staticKey="Attempt">Attempt</span> <span data-staticKey="'+ a.AttemptId +'">'  + a.AttemptId + '</span></a></li>');

                                });
                                attemptsul.find('li:eq(0)').addClass('active');
                                attempts.find('.tab-pane:eq(0)').addClass('active');
                                content.append(attemptsul, attempts);
                                body.find('.attemptstable').append(headSummery, content);

                                //appending list for populating modals
                                right.find('[data-target="#AttemptModal"]').data('list', list); 
                                

                            }

                            main.find('.accordion-group').append(head, body);

                            tablist.append(main);// appending each element to tablist
                        });




                        //pagination
                        if (pages > 1) {
                            pageNo |= 0;
                            var nav = $('<nav class="hidden-sm hidden-xs">  </nav>'),
                                ul = $('<ul class="pagination">  </ul>'),
                                next = pageNo + 1, prev = pageNo && pageNo - 1;

                            for (var i = 1; i < pages + 1; i++) ul.append('<li><a id="' + i + '">' + i + '</a></li>');
                            ul.append('<li><a id="' + next + '" aria-label="Next" title="" data-tooltip="tooltip" data-original-title="Next"><i class="fa fa-angle-right"></i></a> </li>')
                                .on('click', 'a', function () {
                                    fnGetOnlineAssessmentData(condition, $(this).attr('id'));
                                }).find('li:contains(' + pageNo + ')').addClass('active');



                            nav.append(ul);
                            tablistbtm.append('<p class="pagenumbertext bottompagetext"><span class="sansSB">' + x.length + '</span> of Total ' + totalCount + ' Assessment </p>');//pagenumbertext

                            $('<div class="bottompagenum"></div>')
                                .append($('<div class="text-center visible-sm visible-xs"><a href="#" onclick="fnGetOnlineAssessmentData(\'' + condition + '\', ' + prev + ')" class="btn btn-default"><i class="fa fa-angle-left"></i> Back</a> <a href="#" onclick="fnGetOnlineAssessmentData(\'' + condition + '\',' + next + ')" class="btn btn-default">Next <i class="fa fa-angle-right"></i></a></div>'), nav)
                                .appendTo(tablistbtm);
                        }

                        accordionWrp.find('.accordionWrp').append(tablist, tablistbtm).end().appendTo(tabContent);
                        $('#assessmentsDiv').empty().append(tabContent);
                        
                        
                        if(typeof window.fnGetPopulateOnlineAssessmentPostFunctionForResponse == 'function')
                        	fnGetPopulateOnlineAssessmentPostFunctionForResponse(x);
                    

                    }
                    else 
                     {
                    	
                        if(typeof window.fnGetPopulateOnlineAssessmentPreFuncForNoResponse == 'function')
                        	fnGetPopulateOnlineAssessmentPreFuncForNoResponse();
                       
                        $('#SubsSearchBar_OA').css({ 'display': 'none' });
                        $('#SubsSearchBarMob_OA').css({ 'display': 'none' });
                        if (condition == 'live')
                            $('#assessmentsDiv').empty().append('<div class=\"noSubsDataTxt\" style="margin: 0 auto;text-align: center;font-size: 14px;" data-staticKey="You have no active assessments at the moment.">You have no active assessments at the moment.</div>');
                        else if (condition == 'future')
                            $('#assessmentsDiv').empty().append('<div class=\"noSubsDataTxt\" style="margin: 0 auto; text-align: center;font-size: 14px;" data-staticKey="You have no upcoming assessments.">You have no upcoming assessments.</div>');
                        else if (condition == 'past')
                            $('#assessmentsDiv').empty().append('<div class=\"noSubsDataTxt\" style="margin: 0 auto; text-align: center;font-size: 14px;" data-staticKey="You have not completed any assessment. Go to current assessment tab and take an assessment.">You have not completed any assessment. Go to current assessment tab and take an assessment.</div>');
                        
                        
                        if(typeof window.fnGetPopulateOnlineAssessmentPostFuncForNoResponse == 'function')
                        	fnGetPopulateOnlineAssessmentPostFuncForNoResponse();
                        
                       }
                    }}
                else {
                    $('#SubsSearchBar_OA').css({ 'display': 'none' });
                    $('#SubsSearchBarMob_OA').css({ 'display': 'none' });
                    if (condition == 'live')
                        $('#assessmentsDiv').empty().append('<div class=\"noSubsDataTxt\" style="margin: 0 auto;text-align: center;font-size: 14px;" data-staticKey="You have no active assessments at the moment.">You have no active assessments at the moment.</div>');
                    else if (condition == 'future')
                        $('#assessmentsDiv').empty().append('<div class=\"noSubsDataTxt\" style="margin: 0 auto; text-align: center;font-size: 14px;" data-staticKey="You have no upcoming assessments.">You have no upcoming assessments.</div>');
                    else if (condition == 'past')
                        $('#assessmentsDiv').empty().append('<div class=\"noSubsDataTxt\" style="margin: 0 auto; text-align: center;font-size: 14px;" data-staticKey="You have not completed any assessment. Go to current assessment tab and take an assessment.">You have not completed any assessment. Go to current assessment tab and take an assessment.</div>');

                }

                    $('#loader-indicator').hide();
                  
                }

                if (typeof window.fnBuildCustomizedGridForSubscriptionTabs == 'function') {
                    fnBuildCustomizedGridForSubscriptionTabs('OA', responseDoc);
                    $('#loader-indicator').hide();
                }
            }
            
            if (typeof window.fnPopulateDataFrameworkAfter == 'function') {
                fnPopulateDataFrameworkAfter('OA');
            }
            
            if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        	{
            multilingualFormStaticValue("Subscription");
            multilingualOtherValues();
        	}
        }
    }


function settingTheTabsOA() {
    $('.tabs-nav_LX').removeClass('tabs-nav');
    //alert('settingDone');
}
$(document).on("click", ".attempt-count_oa", function () {

    var idOfattempt = $(this).attr('id');
    idOfattempt = idOfattempt.replace('attempt-count_oa', '');
    $('.tooltip-arrow_oa').hide();
    $('.tooltip-details_oa').hide();
    $('.view-report_oa').hide();
    $('#tooltip-arrow_oa' + idOfattempt).show();
    $('#tooltip-details_oa' + idOfattempt).show();
    $('#view-report_oa' + idOfattempt).show();
    $(this).parents(".attempt-history_oa").find(".attempt-count_oa").removeClass("attempt-highlighted_oa");
    $(this).addClass("attempt-highlighted_oa");
    var topPos = $(this).position().top + $(this).parents(".attempt-history_oa .nano-content_oa").scrollTop() - 10;
    if (Number(topPos) < 0)
        topPos = 0;
    $(this).parents(".attempt-history_oa").find(".tooltip-arrow_oa").css("top", topPos);
    if ($(this).prev(".attempt-count_oa").length == 0)
        $(this).parents(".attempt-history_oa").find(".tooltip-details_oa").css("margin-top", (($(this).position().top + $(this).parents(".attempt-history_oa .nano-content_oa").scrollTop()) / 2) - 15);
    else if ($(this).next(".attempt-count_oa").length == 0)
        $(this).parents(".attempt-history_oa").find(".tooltip-details_oa").css("margin-top", (($(this).position().top + $(this).parents(".attempt-history_oa .nano-content_oa").scrollTop()) / 2) + 15);
    else
        $(this).parents(".attempt-history_oa").find(".tooltip-details_oa").css("margin-top", ($(this).position().top + $(this).parents(".attempt-history_oa .nano-content_oa").scrollTop()) / 2);
    $('.tooltip-details_oa').mCustomScrollbar("destroy");

    $(".tooltip-details_oa").mCustomScrollbar({
        axis: "x",// vertical and horizontal scrollbar
        theme: "3d",
        setWidth: false,
        autoHideScrollbar: true
    });

});

function clickOfSlideButtonForOA(subscriptionId) {
    $('#ui-id-' + subscriptionId).toggle();
    $('.tooltip-details_oa').mCustomScrollbar("destroy");
    if ($('#arrowOA' + subscriptionId).hasClass("ui-icon-triangle-1-e_LX")) {
        $('#arrowOA' + subscriptionId).removeClass('ui-icon-triangle-1-e_LX');
        $('#arrowOA' + subscriptionId).addClass('ui-icon-triangle-1-s_LX');
    }
    else {
        $('#arrowOA' + subscriptionId).addClass('ui-icon-triangle-1-e_LX');
        $('#arrowOA' + subscriptionId).removeClass('ui-icon-triangle-1-s_LX');
    }

    $(".tooltip-details_oa").mCustomScrollbar({
        axis: "x",// vertical and horizontal scrollbar
        theme: "3d",
        setWidth: false,
        autoHideScrollbar: true
    });


}
function openerNew(url) {
    var params = 'top=0, left=0';
    params += ', width=' + screen.width + ', height=' + screen.height + ',statusbar=no,toolbar=yes,location=no,directories=no,menubar=no,resizable=no';
    params += ', scrollbars=yes, status=no, fullscreen=yes';
    $('.no-collapsable').on('click', function (e) {
        e.stopPropagation();
    });

    var newwin = window.open(url, "_blank", params);
    if (window.focus) { newwin.focus() }
    //return false;
    $('.no-collapsable').on('click', function (e) {
        e.stopPropagation();
    });
}


function openerNewSecure(url) {

    var field = document.getElementById("loginField").value;
    var orgID = document.getElementById('orgId').value;
    var formID = document.getElementById('formId').value;
    var checksum = document.getElementById('checksum').value||"test";
    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;
    var entId = document.getElementById('entityId').value;
    var sessChk = document.getElementById('sessChk').value;
    var loginid = "";
    var url_encoded = encodeURIComponent(url);

    var subAction = "LaunchMock";
    var parameters = "orgId=" + orgID + "&formId=" + formID + "&appSeqNo=" + app_seq_no + "&checkSum=" + checksum + "&entId=" + entId + "&loginid=" + loginid + "&applnSequenceField=" + applnSequenceField + "&sessChk=" + sessChk + "&subAction=" + subAction + "&url=" + url_encoded;
    var pValidationServlet = "/EForms/PVCConfigurationServlet?" + parameters;

    $.post(pValidationServlet)
        .done(function (o) {
            if (!o.url) { showError(); return; }
            window.open(o.url, $('#ESubscriptionLaunchWindow').length ? 'ESubscriptionLaunchWindow' : '_blank')
        })
        .fail(function () { showError() });


}


function fnHandleAttempts(id) {

    //	$('.heading_oa').click(function (e){
    $('#' + id).removeClass('active_oa');
    $('#' + id).find(".btn_oa a").removeClass('btn_active_oa');
    $('#' + id).next('.content_oa').slideUp('slow').removeClass('active_oa');
    $('#' + id).find(".symbol_oa").html("+");
    if ($('#' + id).next('.content_oa').css('display') != 'block') {

        $('#' + id).addClass('active_oa');
        $('#' + id).find(".btn_oa a").addClass('btn_active_oa');
        $('#' + id).next('.content_oa').slideDown('slow');
        $('#' + id).find(".symbol_oa").html("\-");

    } else {
        $('#' + id).removeClass('active_oa');
        $('#' + id).find(".btn_oa a").removeClass('btn_active_oa');
        $('#' + id).next('.content_oa').slideUp('slow').removeClass('active_oa');
        $('#' + id).find(".symbol_oa").html("+");


    }
    //});
}
/*online assessment tab code*/

function fnGetTabForCourses(fragmentCount, tabDesc, tabId, tabType) {
    if (($('#tabLayout').val() == 'verticalWithIcon') || ($('#tabLayout').val() == 'verticalWithoutIcon')) {
        var xWidth = $('#container').width();
        xWidth = xWidth - 200;
        if ($(window).width() >= 768) {
            if (tabType.toLowerCase() == "managecourses")
                var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\" style = \"float:left; width:" + xWidth + "px;\"><input type=\"hidden\" id=\"PageForManageCourse\" value=\"1\">";
            else
                var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\" style = \"float:left; width:" + xWidth + "px;\"><input type=\"hidden\" id=\"PageForCourse\" value=\"1\">";
        } else {
            if (tabType.toLowerCase() == "managecourses")
                var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide col-sm-12 col-xs-12\"><input type=\"hidden\" id=\"PageForManageCourse\" value=\"1\">";
            else
                var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide col-sm-12 col-xs-12\"><input type=\"hidden\" id=\"PageForCourse\" value=\"1\">";
        }
    } else {
        if (tabType.toLowerCase() == "managecourses")
            var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\"><input type=\"hidden\" id=\"PageForManageCourse\" value=\"1\">";
        else
            var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\"><input type=\"hidden\" id=\"PageForCourse\" value=\"1\">";
    }
    if (tabType.toLowerCase() == "managecourses")
        newDiv = newDiv + "<div id=\"courseManageCF\" class=\"container-fluid\"><h3 class=\"margintop20 orangecolor\"><span id='" + tabId + "_Tab_Description' class=\"sansSB\">" + tabDesc + "</span></h3>";
    else
        newDiv = newDiv + "<div id=\"courseCF\" class=\"container-fluid\"><h3 class=\"margintop20 orangecolor\"><span id='" + tabId + "_Tab_Description' class=\"sansSB\">" + tabDesc + "</span></h3>";

    // Mobile View

	newDiv=newDiv+"<div class=\"row visible-sm visible-xs searchMobile\" style=\"margin-bottom:20px\">"
	newDiv=newDiv+"<div class=\"searchmobShow marginbottom10\">"
	
	if(tabType.toLowerCase()=="managecourses") {
	newDiv=newDiv+"<input id=\"managecourseSearchInputMob_LX\" type=\"text\" class=\"form-control searchinput displaynone\" aria-label=\"Text input with segmented button dropdown\" placeholder=\"Search for Courses...\" data-staticKey=\"Search for Courses...\" data-staticKeyType=\"placeholder\">"
	}
	else {
	newDiv=newDiv+"<input type=\"text\" id=\"courseSearchInputMob_LX\" class=\"form-control searchinput displaynone\" aria-label=\"Text input with segmented button dropdown\" data-staticKey=\"Search..\" data-staticKeyType=\"placeholder\" placeholder=\"Search...\">"
	}
	
	newDiv=newDiv+"</div>"
	
	newDiv=newDiv+"<div class=\"\">"
	newDiv=newDiv+"<div class=\"pull-left btn-group dashboardDrop open\">"
	newDiv=newDiv+"<button type=\"button\" class=\"btn btn-default dropdown-toggle fontsize12\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"><span class=\"valueDrop marginright5\" data-staticKey=\"Current Courses\">CURRENT COURSES</span><span class=\"caret\"></span></button>"
	
	if(tabType.toLowerCase()=="managecourses") {
		newDiv=newDiv+"<ul class=\"dropdown-menu\">"
		newDiv=newDiv+"<li id=\"managecourse_current_mob\" class=\"active\" ><a onclick=\"javascript : fnGetPvcDataFW('ManageCurrentCourse')\" href=\"#currentcrs\" aria-controls=\"currentcrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Current Courses\"> CURRENT COURSES </a></li>"
		newDiv=newDiv+"<li id=\"managecourse_upcoming_mob\"><a onclick=\"javascript : fnGetPvcDataFW('ManageUpcomingCourse')\" href=\"#upcomingcrs\" aria-controls=\"upcomingcrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Upcoming Courses\">UPCOMING COURSES</a></li>"
		newDiv=newDiv+"<li id=\"managecourse_history_mob\"><a onclick=\"javascript : fnGetPvcDataFW('ManageHistoryCourse')\" href=\"#completecrs\" aria-controls=\"completecrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Completed Courses\">COMPLETED COURSES</a></li>"
		newDiv=newDiv+"<li id=\"managecourse_courseTemplate_mob\"><a onclick=\"javascript : fnGetPvcDataFW('courseTemplate')\" href=\"#completecrs\" aria-controls=\"completecrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Course Template\">COURSE TEMPLATE</a></li>"
		newDiv=newDiv+"</ul>"
	}
	else {
		newDiv=newDiv+"<ul class=\"dropdown-menu\">"
		newDiv=newDiv+"<li id=\"course_current_mob\" class=\"active\"><a onclick=\"javascript : fnGetPvcDataFW('currentCourse')\" href=\"#currentcrs\" aria-controls=\"currentcrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Current Courses\"> CURRENT COURSES </a></li>"
		newDiv=newDiv+"<li id=\"course_upcoming_mob\"><a onclick=\"javascript : fnGetPvcDataFW('upcomingCourse')\" href=\"#upcomingcrs\" aria-controls=\"upcomingcrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Upcoming Courses\">UPCOMING COURSES</a></li>"
		newDiv=newDiv+"<li id=\"course_history_mob\"><a onclick=\"javascript : fnGetPvcDataFW('historyCourse')\" href=\"#completecrs\" aria-controls=\"completecrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Completed Courses\">COMPLETED COURSES</a></li>"
		newDiv=newDiv+"<li id=\"course_expired_mob\"><a onclick=\"javascript : fnGetPvcDataFW('expiredCourse')\" href=\"#expiredcrs\" aria-controls=\"expiredcrs\" role=\"tab\" data-toggle=\"tab\" data-staticKey=\"Expired Courses\">EXPIRED COURSES</a></li>"
		newDiv=newDiv+"</ul>"
	}
	newDiv=newDiv+"</div>"
	newDiv=newDiv+"<div class=\"pull-right\">"
	newDiv=newDiv+"<div class=\"inline-block media-middle searchmobhide\">"
	newDiv=newDiv+"<input type=\"text\" placeholder=\"Search for Courses...\" data-staticKey=\"Search for Courses...\" data-staticKeyType=\"placeholder\" aria-label=\"Text input with segmented button dropdown\" class=\"form-control searchinput\">"
	newDiv=newDiv+"</div>"
	newDiv=newDiv+"<div onclick=\"fnGetPvcDataRefresh();\" class=\"btn btn-bgcolor inline-block marginleft10\" title=\"\" data-tooltip=\"tooltip\" data-original-title=\"Reload\"><i class=\"fa fa-refresh\"></i></div>"
	newDiv=newDiv+"</div>"
	newDiv=newDiv+"<!-- /btn-group -->"
	newDiv=newDiv+"<!-- <input type=\"text\" class=\"form-control\" placeholder=\"Search..\" data-staticKey=\"Search..\" data-staticKeyType=\"placeholder\" aria-label=\"Text input with dropdown button\">-->"
	newDiv=newDiv+"</div>"
	newDiv=newDiv+"<!-- /input-group -->"
	newDiv=newDiv+"</div>"

    // END OF MOBILE VIEW

	
    newDiv = newDiv + "<div id=\" \" class=\"mainblueSubtab clearfix hidden-xs hidden-sm marginbottom20\">";

    if (tabType.toLowerCase() == "managecourses") {
        newDiv = newDiv + "<div  class=\"mainblueSubtab clearfix hidden-xs hidden-sm marginbottom20\">";
        newDiv = newDiv + "<div id=\"fwmanagecoursetypepanel\">";
    }
    else {
        newDiv = newDiv + "<div class=\"mainblueSubtab clearfix hidden-xs hidden-sm marginbottom20\">";
        newDiv = newDiv + "<div id=\"fwcoursetypepanel\">";
    }

    if (tabType.toLowerCase() == "managecourses") {
		/*newDiv=newDiv+"<ul class=\"list-inline pull-left tabLi\" role=\"tablist\">";
		newDiv=newDiv+"<li role=\"presentation\" class=\"active\" id=\"managecourse_current\" ><a  onclick=\"javascript : fnGetPvcDataFW('ManageCurrentCourse')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_current' data-staticKey=\"Current\">Current</a></li>";
		newDiv=newDiv+"<li role=\"presentation\" id=\"managecourse_upcoming\"><a   onclick=\"javascript : fnGetPvcDataFW('ManageUpcomingCourse')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_upcoming' data-staticKey=\"Upcoming\">Upcoming</span></a></li>";
		newDiv=newDiv+"<li role=\"presentation\" id=\"managecourse_history\"><a   onclick=\"javascript : fnGetPvcDataFW('ManageHistoryCourse')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_history' data-staticKey=\"History\">History</span></a></li>";
		newDiv=newDiv+"<li role=\"presentation\" id=\"managecourse_courseTemplate\"><a   onclick=\"javascript : fnGetPvcDataFW('courseTemplate')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_history' data-staticKey=\"Course Template\">Course Template</span></a></li>";
		*/

    	newDiv=newDiv+"<div class=\"clearfix\">"
		newDiv=newDiv+"<ul class=\"list-inline pull-left \" role=\"tablist\">"
		newDiv=newDiv+"<li id=\"managecourse_current\" role=\"presentation\" class=\"active\"><a onclick=\"javascript : fnGetPvcDataFW('ManageCurrentCourse')\" href=\"#currentcrs\" aria-controls=\"currentcrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"true\"><span data-staticKey=\"Current Courses\">CURRENT COURSES </span> </a></li>"
		newDiv=newDiv+"<li id=\"managecourse_upcoming\" role=\"presentation\" class=\"\"><a onclick=\"javascript : fnGetPvcDataFW('ManageUpcomingCourse')\" href=\"#upcomingcrs\" aria-controls=\"upcomingcrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"false\"><span data-staticKey=\"Upcoming Courses\">UPCOMING COURSES</span></a></li>"
		newDiv=newDiv+"<li id=\"managecourse_history\" role=\"presentation\" class=\"\"><a onclick=\"javascript : fnGetPvcDataFW('ManageHistoryCourse')\" href=\"#completecrs\" aria-controls=\"completecrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"false\"><span data-staticKey=\"Completed Courses\">COMPLETED COURSES</span></a></li>"
		newDiv=newDiv+"<li id=\"managecourse_coursetemplate\" role=\"presentation\" class=\"\"><a onclick=\"javascript : fnGetPvcDataFW('courseTemplate')\" href=\"#expiredcrs\" aria-controls=\"expiredcrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"false\"><span data-staticKey=\"Course Template\">COURSE TEMPLATE</span></a></li>"
		newDiv=newDiv+"</ul>"
		newDiv=newDiv+"<div class=\"pull-right\">"
		newDiv=newDiv+"<div class=\"inline-block media-middle\">"
		newDiv=newDiv+"<input type=\"text\" id=\"managecourseSearchInput_LX\" placeholder=\"Search for Courses...\" data-staticKey=\"Search for Courses...\" data-staticKeyType=\"placeholder\" aria-label=\"Text input with segmented button dropdown\" class=\"form-control searchinput\">"
		newDiv=newDiv+"</div>"
		newDiv=newDiv+"<div onclick=\"fnGetPvcDataRefresh();\" class=\"btn btn-bgcolor inline-block marginleft10\" title=\"\" data-tooltip=\"tooltip\" data-original-title=\"Reload\"><i class=\"fa fa-refresh\"></i></div>"
		newDiv=newDiv+"</div>"
		newDiv=newDiv+"</div>"


    } else {
		/*newDiv=newDiv+"<li role=\"presentation\" class=\"active\" id=\"course_current\" ><a   onclick=\"javascript : fnGetPvcDataFW('currentCourse')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_current' data-staticKey=\"Current\">Current</a></li>";
		newDiv=newDiv+"<li role=\"presentation\" id=\"course_upcoming\"><a   onclick=\"javascript : fnGetPvcDataFW('upcomingCourse')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_upcoming' data-staticKey=\"Upcoming\">Upcoming</span></a></li>";
		newDiv=newDiv+"<li role=\"presentation\" id=\"course_history\"><a   onclick=\"javascript : fnGetPvcDataFW('historyCourse')\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\" style=\"text-decoration:none\"><span class='fw_ml_history' data-staticKey=\"History\">History</span></a></li>";
		*/

        /*	
            newDiv = newDiv + "<div id=\"SubsDD_courses\" class=\"pull-right btn-group dashboardDrop sortgroup\">";
            newDiv = newDiv + "<span class=\"sortnew fontsize12\" data-staticKey=\"VIEW COURSES :\">VIEW COURSES: </span>";
    
            newDiv = newDiv + "<button type=\"button\" class=\"btn btn-default dropdown-toggle fontsize12\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><span class=\"valueDrop marginright5\">  Current</span><span class=\"caret\"></span></button>";
            newDiv = newDiv + "<ul class=\"dropdown-menu\">";
            newDiv = newDiv + "<li class=\"active\" id=\"course_current\"><a onclick=\"javascript : fnGetPvcDataFW('currentCourse')\"  aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\"> <span class='fw_ml_current' data-staticKey=\"Current\">Current</span> </a></li>";
            newDiv = newDiv + "<li class=\"\" id=\"course_upcoming\"><a onclick=\"javascript : fnGetPvcDataFW('upcomingCourse')\"  aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\">  <span class='fw_ml_upcoming' data-staticKey=\"Upcoming\">Upcoming</span>  </a></li>";
            newDiv = newDiv + "<li id=\"course_history\"><a onclick=\"javascript : fnGetPvcDataFW('historyCourse')\"  aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\"><span class='fw_ml_completed' data-staticKey=\"Completed\">Completed</span></a></li>";
            newDiv = newDiv + "</ul>";
            newDiv = newDiv + "</div>";
         */

    	newDiv=newDiv+"<div class=\"clearfix\">"
		newDiv=newDiv+"<ul class=\"list-inline pull-left \" role=\"tablist\">"
		newDiv=newDiv+"<li id=\"course_current\" role=\"presentation\" class=\"active\"><a onclick=\"javascript : fnGetPvcDataFW('currentCourse')\" href=\"#currentcrs\" aria-controls=\"currentcrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"true\" data-staticKey=\"Current Courses\">CURRENT COURSES  </a></li>"
		newDiv=newDiv+"<li id=\"course_upcoming\" role=\"presentation\" class=\"\"><a onclick=\"javascript : fnGetPvcDataFW('upcomingCourse')\" href=\"#upcomingcrs\" aria-controls=\"upcomingcrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"false\" data-staticKey=\"Upcoming Courses\">UPCOMING COURSES</a></li>"
		newDiv=newDiv+"<li id=\"course_history\" role=\"presentation\" class=\"\"><a onclick=\"javascript : fnGetPvcDataFW('historyCourse')\" href=\"#completecrs\" aria-controls=\"completecrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"false\" data-staticKey=\"Completed Courses\">COMPLETED COURSES</a></li>"
		newDiv=newDiv+"<li id=\"course_expired\" role=\"presentation\" class=\"\"><a onclick=\"javascript : fnGetPvcDataFW('expiredCourse')\" href=\"#expiredcrs\" aria-controls=\"expiredcrs\" role=\"tab\" data-toggle=\"tab\" aria-expanded=\"false\" data-staticKey=\"Expired Courses\">EXPIRED COURSES</a></li>"
		newDiv=newDiv+"</ul>"
		newDiv=newDiv+"<div class=\"pull-right\">"
		newDiv=newDiv+"<div class=\"inline-block media-middle\">"
		newDiv=newDiv+"<input type=\"text\" id=\"courseSearchInput_LX\" placeholder=\"Search...\" data-staticKey=\"Search..\" data-staticKeyType=\"placeholder\" aria-label=\"Text input with segmented button dropdown\" class=\"form-control searchinput\">"
		newDiv=newDiv+"</div>"
		newDiv=newDiv+"<div onclick=\"fnGetPvcDataRefresh();\" class=\"btn btn-bgcolor inline-block marginleft10\" title=\"\" data-tooltip=\"tooltip\" data-original-title=\"Reload\"><i class=\"fa fa-refresh\"></i></div>"
		newDiv=newDiv+"</div>"
		newDiv=newDiv+"</div>"

    }

    /*
      newDiv = newDiv + "</ul>";
      newDiv = newDiv + "<div class=\"pull-right col-md-4 \">";
      if (tabType.toLowerCase() == "managecourses") {
          newDiv = newDiv + "<div id=\"SubsSearchBar_managecourses\" style=\"display:none\">";
          newDiv = newDiv + "<div class=\"input-group col-md-9 col-sm-10 col-xs-8 pull-left col-xs-9\">";
          newDiv = newDiv + "<input type=\"text\" placeholder=\"Search...\" data-staticKey=\"Search..\" data-staticKeyType=\"placeholder\"  id=\"managecourseSearchInput_LX\"  aria-label=\"Text input with segmented button dropdown\" class=\"form-control searchinput managecourseSearchInput_LX\">";
          newDiv = newDiv + "<div class=\"input-group-addon\" style=\"cursor:pointer;\" onclick=\"searchOnEnterCheckMobile('managecourses','managecourseSearchInput_LX');\"><i class=\"fa fa-search blueTxt\"></i>"
          newDiv = newDiv + "</div>";
          newDiv = newDiv + "</div>";
          newDiv = newDiv + "<div class=\"input-group col-md-2 col-sm-1 col-xs-4 pull-right col-xs-2\">";
          newDiv = newDiv + "<div style=\"border: 1px solid lightgray; margin-right: 20px;\" onclick=\"fnGetPvcDataRefresh();\" class=\"btn pull-right\"><i class=\"fa fa-refresh blueTxt\"></i></div>";
          newDiv = newDiv + "</div>";
          newDiv = newDiv + "</div>";
      }
      else {
          newDiv = newDiv + "<div id=\"SubsSearchBar_courses\" style=\"display:none\">";
          newDiv = newDiv + "<div class=\"input-group col-md-9 col-sm-10 col-xs-8 pull-left col-xs-9\">";
          newDiv = newDiv + "<input type=\"text\" placeholder=\"Search...\" data-staticKey=\"Search..\" data-staticKeyType=\"placeholder\"  id=\"courseSearchInput_LX\"  aria-label=\"Text input with segmented button dropdown\" class=\"form-control searchinput courseSearchInput_LX\">";
          newDiv = newDiv + "<div class=\"input-group-addon\" style=\"cursor:pointer;\" onclick=\"searchOnEnterCheckMobile('mycourses','courseSearchInput_LX');\"><i class=\"fa fa-search blueTxt\"></i>"
          newDiv = newDiv + "</div>";
          newDiv = newDiv + "</div>";
          newDiv = newDiv + "<div class=\"input-group col-md-2 col-sm-1 col-xs-4 pull-right col-xs-2\">";
          newDiv = newDiv + "<div style=\"border: 1px solid lightgray; margin-right: 20px;\" onclick=\"fnGetPvcDataRefresh();\" class=\"btn pull-right\"><i class=\"fa fa-refresh blueTxt\"></i></div>";
          newDiv = newDiv + "</div>";
          newDiv = newDiv + "</div>";
      }
  */


    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    //newDiv=newDiv+"</div>";
    if (tabType.toLowerCase() == "managecourses")
        newDiv = newDiv + "<div class=\"tab-content\" id=\"courseManageFW-content\">";
    else
        newDiv = newDiv + "<div class=\"tab-content\" id=\"courseFW-content\">";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    $('#container-11').append(newDiv);

    DD();

}
function fnGetTabForCommunities(fragmentCount, tabDesc, tabId) {
    //console.log(22);
    if (($('#tabLayout').val() == 'verticalWithIcon') || ($('#tabLayout').val() == 'verticalWithoutIcon')) {
        var xWidth = $('#container').width();
        xWidth = xWidth - 200;
        if ($(window).width() >= 768)
            var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\" style = \" float:left; width:" + xWidth + "px;\"><input type=\"hidden\" id=\"PageForCommunity\" value=\"1\">";
        else
            var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide col-sm-12 col-xs-12\"><input type=\"hidden\" id=\"PageForCommunity\" value=\"1\">";
    }
    else {
        var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\"><input type=\"hidden\" id=\"PageForCommunity\" value=\"1\">";
    }
    newDiv = newDiv + "<div id=\"commCF\" class=\"container-fluid\">";
    newDiv = newDiv + "<h3 class=\"margintop20 orangecolor\"><span id='" + tabId + "_Tab_Description' class=\"sansSB\">" + tabDesc + "</span></h3>";
    /*newDiv=newDiv+"<div class=\"row visible-sm visible-xs searchMobile\" >";
        newDiv=newDiv+"<div class=\"form-group\">";
        newDiv=newDiv+"<div class=\"input-group\">";
        newDiv=newDiv+"<input type=\"text\" class=\"form-control\" placeholder=\"Search..\" id=\"commSearchInput_LX\" aria-label=\"Text input with dropdown button\">";
        newDiv=newDiv+"<div class=\"input-group-addon\" style=\"cursor:pointer;\" onclick=\"searchOnEnterCheckMobile('communities','commSearchInput_LX');\"><i class=\"fa fa-search blueTxt\"></i></div>";
        newDiv=newDiv+"</div>";
        newDiv=newDiv+"</div>";
        newDiv=newDiv+"</div>";*/
    newDiv = newDiv + "</div><div class=\"row container-fluid\">";
    newDiv = newDiv + "<div id=\"SubsSearchBar_communities\" class=\"mainblueSubtab clearfix container-fluid marginbottom20\">";

    newDiv = newDiv + "<div class=\"pull-right col-md-4 col-xs-12 clearfix removepadding\">";
    newDiv = newDiv + "<div class=\"input-group col-md-9 col-sm-9 col-xs-8 pull-left\">";
    newDiv = newDiv + "<input type=\"text\" placeholder=\"Search...\" data-staticKey=\"Search..\" data-staticKeyType=\"placeholder\"  id=\"commSearchInput_LX\"  aria-label=\"Text input with segmented button dropdown\" class=\"form-control searchinput\">";
    newDiv = newDiv + "<div class=\"input-group-addon\" style=\"cursor:pointer;\" onclick=\"searchOnEnterCheckMobile('communities','commSearchInput_LX');\"><i class=\"fa fa-search blueTxt\"></i>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "<div class=\"input-group col-md-3 col-sm-3 pull-right col-xs-4\">";
    newDiv = newDiv + "<div style=\"border: 1px solid lightgray;\" onclick=\"fnGetPVCDataRefreshComm('communities','commSearchInput_LX');\" class=\"btn pull-right\"><i class=\"fa fa-refresh blueTxt\"></i>"
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";

    newDiv = newDiv + "<div id=\"community-content\">";
    newDiv = newDiv + "</div>";


    newDiv = newDiv + "</div>";

    $('#container-11').append(newDiv);
}


function fnGetTabForOnlineAssessment(fragmentCount, tabDesc, tabId) {
    var fragment = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\"><input type=\"hidden\" id=\"PageForAssessment\" value=\"1\"></div>";
    if (($('#tabLayout').val() == 'verticalWithIcon') || ($('#tabLayout').val() == 'verticalWithoutIcon')) {
        var xWidth = $('#container').width();
        xWidth = xWidth - 200;
        if ($(window).width() >= 768)
            fragment = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\" style = \"float:left; width:" + xWidth + "px;\"><input type=\"hidden\" id=\"PageForAssessment\" value=\"1\"></div>";
        else
            fragment = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide col-sm-12 col-xs-12\"><input type=\"hidden\" id=\"PageForAssessment\" value=\"1\"></div>";
    }

    var content = '<div class="container-fluid oa_container" >'
                    +'<h3 class="margintop20 orangecolor"><span id="' + tabId + '_Tab_Description" class="sansSB">' + tabDesc + '</span></h3>'
                    + '<div class="row visible-sm visible-xs searchMobile marginbottom10"> <div class="searchmobShow marginbottom10"> <input class="form-control searchinput displaynone" aria-label="Text input with segmented button dropdown" data-staticKey="Search.." data-staticKeyType="placeholder" placeholder="Search..." type="text"> </div> <div class=""> <div class="pull-left btn-group dashboardDrop"> <button type="button" class="btn btn-default dropdown-toggle fontsize12" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="valueDrop marginright5" data-staticKey="Current"> CURRENT </span><span class="caret"></span></button> <ul class="dropdown-menu"> <li class="active"><a href="#currentcrs" onclick="fnGetOnlineAssessmentDataFW(\'live\')" aria-controls="currentcrs" role="tab" data-toggle="tab" data-staticKey="Current"> CURRENT </a></li> <li><a href="#upcomingcrs" onclick="fnGetOnlineAssessmentDataFW(\'future\')" aria-controls="upcomingcrs" role="tab" data-toggle="tab" data-staticKey="Upcoming">  UPCOMING </a></li> <li><a href="#completecrs" onclick="fnGetOnlineAssessmentDataFW(\'past\')" aria-controls="completecrs" role="tab" data-toggle="tab" data-staticKey="Completed"> COMPLETED </a></li> </ul> </div> <div class="pull-right"> <div class="inline-block media-middle searchmobhide"> <input data-staticKey="Search.." data-staticKeyType="placeholder" placeholder="Search..."  aria-label="Text input with segmented button dropdown" class="form-control searchinput" type="text"> </div> <div class="btn btn-bgcolor inline-block marginleft10" title="Refresh" onclick="fnGetOnlineAssessmentDataRefresh()" data-tooltip="tooltip" data-original-title="Refresh"><i class="fa fa-refresh"></i></div> </div> <!-- /btn-group --> </div> <!-- /input-group --> </div>' 
                    +'<div class="mainblueSubtab clearfix hidden-xs hidden-sm margintop10 marginbottom10"> <div class="clearfix"> <ul class="list-inline pull-left" role="tablist"> <li role="presentation" class="active"><a href="#currentcrs" onclick="fnGetOnlineAssessmentDataFW(\'live\')" aria-controls="currentcrs" role="tab" data-toggle="tab" data-staticKey="Current"> CURRENT </a></li> <li role="presentation"><a href="#upcomingcrs" onclick="fnGetOnlineAssessmentDataFW(\'future\')" aria-controls="upcomingcrs" role="tab" data-toggle="tab" data-staticKey="Upcoming"> UPCOMING </a></li> <li role="presentation"><a href="#completecrs" onclick="fnGetOnlineAssessmentDataFW(\'past\')" aria-controls="completecrs" role="tab" data-toggle="tab" data-staticKey="Completed"> COMPLETED </a></li> </ul> <div class="pull-right"> <div class="inline-block media-middle"> <input placeholder="Search..."  data-staticKey="Search.." data-staticKeyType="placeholder" aria-label="Text input with segmented button dropdown" class="form-control searchinput" type="text"> </div> <div class="btn btn-bgcolor inline-block marginleft10" data-statickey="Refresh" data-statickeytype="title" title="Refresh"  onclick="fnGetOnlineAssessmentDataRefresh()" data-tooltip="tooltip" data-original-title="Refresh"><i class="fa fa-refresh"></i></div> </div> </div> </div>'
                     +'<div id="assessmentsDiv" ></div>'
                +'</div>';

    $('#container-11').append($(fragment).append(content));
          
 
    DD();
}

function fnGetTabForCustomSubscriptionFW(fragmentCount, tabDesc, tabId, serviceID) {
    console.log('In fnGetTabForCustomSubscriptionFW');
	cntFrag=serviceID;
	Idtab=tabId;
    var newDiv = "<div id=\"fragment-" + fragmentCount + "\"class=\"tabs-container tabs-hide\">";
    newDiv = newDiv + "<h3 class=\"margintop20 orangecolor\"><span id='" + tabId + "_Tab_Description' class=\"sansSB TabDesc_" + serviceID + " \">" + tabDesc + "</span></h3>";
    newDiv = newDiv + "<div id=\"subscriptionTab_" + serviceID + "\" class=\"container-fluid\">";


    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";

    $('#container-11').append(newDiv);

}

function fnGetTabForQP(fragmentCount, tabDesc, tabId) {
    var applnSequenceField = $("#applnSequenceField").val();
    var formId = $("#formId").val();
    var orgId = $("#orgId").val();
    var fragment = "<div id=\"fragment-" + fragmentCount + "\" class=\"tabs-container tabs-hide\" style='padding:0px 15px;position:relative;display:block;'><input type=\"hidden\" id=\"PageForQP\" value=\"1\"></div>";

    if (($('#tabLayout').val() == 'verticalWithIcon') || ($('#tabLayout').val() == 'verticalWithoutIcon')) {
        var xWidth = $('#container').width();
        xWidth = xWidth - 200;
        if ($(window).width() >= 768)
            fragment = "<div id=\"fragment-" + fragmentCount + "\" class=\"tabs-container tabs-hide\" style='padding:0px 15px;position:relative;display:block;float:left;width:" + xWidth + "px;'><input type=\"hidden\" id=\"PageForQP\" value=\"1\"></div>";
        else
            fragment = "<div id=\"fragment-" + fragmentCount + "\" class=\"tabs-container tabs-hide col-sm-12 col-xs-12\" style='padding:0px 15px;position:relative;display:block;'><input type=\"hidden\" id=\"PageForQP\" value=\"1\"></div>";
    }

    var content = '<div class="container-fluid qp_container" >'
                    +'<h3 class="margintop20 orangecolor"><span id="' + tabId + '_Tab_Description" class="sansSB">' + tabDesc + '</span></h3>'
                    + '<input type="hidden" value="" id="searchInput_QP">'
                    + '<div class="row visible-sm visible-xs searchMobile marginbottom10"> <div class="searchmobShow marginbottom10"> <input class="form-control searchinput displaynone" onkeyup="$(\'#searchInput_QP\').val(this.value);fnGetQPPrintData(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'1\');" aria-label="Text input with segmented button dropdown" data-staticKey="Search.." data-staticKeyType="placeholder" placeholder="Search..." type="text"> </div> <div class=""> <div class="pull-left btn-group dashboardDrop"> <button type="button" class="btn btn-default dropdown-toggle fontsize12" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="valueDrop marginright5" data-staticKey="Current"> CURRENT </span><span class="caret"></span></button> <ul class="dropdown-menu"> <li class="active"><a href="#currentcrs" onclick="fnGetQPPrintDataFW(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'live\',\'1\')" aria-controls="currentcrs" role="tab" data-toggle="tab" data-staticKey="Current"> CURRENT </a></li> <li><a href="#upcomingcrs" onclick="fnGetQPPrintDataFW(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'future\',\'1\')" aria-controls="upcomingcrs" role="tab" data-toggle="tab" data-staticKey="Upcoming">  UPCOMING </a></li> <li><a href="#completecrs" onclick="fnGetQPPrintDataFW(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'past\',\'1\')" aria-controls="completecrs" role="tab" data-toggle="tab" data-staticKey="Completed"> COMPLETED </a></li> </ul> </div> <div class="pull-right"> <div class="inline-block media-middle searchmobhide"> <input onkeyup="$(\'#searchInput_QP\').val(this.value);fnGetQPPrintData(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'1\');" data-staticKey="Search.." data-staticKeyType="placeholder" placeholder="Search..."  aria-label="Text input with segmented button dropdown" class="form-control searchinput" type="text"> </div> <div class="btn btn-bgcolor inline-block marginleft10" title="Refresh" data-staticKey=\"Refresh\" data-staticKeyType="title" onclick="fnGetQPPrintRefresh(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'1\')" data-tooltip="tooltip" data-original-title="Refresh"><i class="fa fa-refresh"></i></div> </div> <!-- /btn-group --> </div> <!-- /input-group --> </div>'
                    + '<div class="mainblueSubtab clearfix hidden-xs hidden-sm margintop10 marginbottom10"> <div class="clearfix"> <ul class="list-inline pull-left" role="tablist"> <li role="presentation" class="active"><a href="#currentcrs" onclick="fnGetQPPrintDataFW(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'live\',\'1\')" aria-controls="currentcrs" role="tab" data-toggle="tab" data-staticKey="Current"> CURRENT </a></li> <li role="presentation"><a href="#upcomingcrs" onclick="fnGetQPPrintDataFW(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'future\',\'1\')" aria-controls="upcomingcrs" role="tab" data-toggle="tab"  data-staticKey="Upcoming"> UPCOMING </a></li> <li role="presentation"><a href="#completecrs" onclick="fnGetQPPrintDataFW(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'past\',\'1\')" aria-controls="completecrs" role="tab" data-toggle="tab" data-staticKey="Completed">COMPLETED  </a></li> </ul> <div class="pull-right"> <div class="inline-block media-middle"> <input onkeyup="$(\'#searchInput_QP\').val(this.value);fnGetQPPrintData(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'1\');" placeholder="Search..."  data-staticKey="Search.." data-staticKeyType="placeholder" aria-label="Text input with segmented button dropdown" class="form-control searchinput" type="text"> </div> <div class="btn btn-bgcolor inline-block marginleft10" title="Refresh" data-staticKey=\"Refresh\" data-staticKeyType="title" onclick="fnGetQPPrintRefresh(' + fragmentCount + ',' + applnSequenceField + ',' + formId + ',' + orgId + ',\'searchInput_QP\',\'1\')" data-tooltip="tooltip" data-original-title="Refresh"><i class="fa fa-refresh"></i></div> </div> </div> </div>'
                    +'<div class="accordionWrp"><div class="panel-group dashboardaccordions" id="dashboardaccordion-' + fragmentCount + '" role="tablist" aria-multiselectable="true" ></div></div>'
                 +'</div>';



    $('#container-11').append($(fragment).append(content));

    DD();
}

//function for QP Tab
function fnGetQPPrintRefresh(fragmentCount, applnSequenceField, formId, orgId, pageNo) {
    $('#searchInput_QP').val("");
    fnGetQPPrintData(fragmentCount, applnSequenceField, formId, orgId, '1');
}

function fnGetQPPrintDataFW(fragmentCount, applnSequenceField, formId, orgId, searchField, condition, pageNo) {

    if (typeof window.fnGetDataFrameworkBeforeAjax == 'function') {

        fnGetDataFrameworkBeforeAjax('QP', pageNo, fragmentCount);
    }
    QPcondition = condition;

    fnGetQPPrintData(fragmentCount, applnSequenceField, formId, orgId, pageNo);


}
function fnGetQPPrintData(fragmentCount, applnSequenceField, formId, orgId, pageNo) {


    if (typeof window.fnGetDataFrameworkBeforeAjax == 'function') {

        fnGetDataFrameworkBeforeAjax('QP', fragmentCount, pageNo);//change this to parameter Page No After 13.00.00
    }

    var http_request = fnGetXMLHttpObject();
    var orgID = orgId;
    var formId = $('#formId').val();
    var checksum = $('#checksum').val();
    var sessChk = $('#sessChk').val();
    var applnSequenceField = $('#applnSequenceField').val();
    var app_seq_no = $('#' + applnSequenceField).val();

    if (page != undefined && page != "")
        var pageNo = page;
    else
        var pageNo = pageNo;
    var searchVal = $('#searchInput_QP').val();

    var entityId = $('#entityId').val();

    var actionTaken = "GetQPJson";
   // document.cookie = "app_seq_no=" + app_seq_no;

    var parameters = "orgID=" + orgID + "&formId=" + formId + "&checksum=" + encodeURI(checksum) + "&sessChk=" + sessChk+ "&app_seq_no=" + app_seq_no + "&entityId=" + entityId + "&actionTaken=" + actionTaken + "&applnSequenceField=" + applnSequenceField + "&condition=" + condition + "&pageNo=" + pageNo;
    //alert("parameters:"+parameters);
    parameters = parameters + "&filterVal=" + searchVal;
    var condition = "";
    var lowerLimit = "";
    var upperLimit = "10";
    var imagePath = "/EForms/images/icon-book1.jpg";
    $('#loader-indicator').show();
    $('#dashboardaccordion-' + fragmentCount).html("");
    $.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
            orgID: orgID,
            formId: formId,
            checksum: checksum,
            app_seq_no: app_seq_no,
            entityId: entityId,
            applnSequenceField: applnSequenceField,
            pageNo: pageNo,
            actionTaken: 'GetQPJson',
            filterVal: searchVal,
            condition: QPcondition,
            lowerLimit: lowerLimit,
            upperLimit: upperLimit,
            sessChk: sessChk
        },
        dataType: "json",
        success: function (result) {
            /*if(typeof window.fnBuildCustomizedGrid == 'function') {

                fnBuildCustomizedGrid('QP',result,fragmentCount);
            }*/
            //alert("In Success");
            if (result == undefined || result == null || result == "null") {
                var msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; width:280px;font-size: 14px;\" data-staticKey=\"No Assessment Subscribed for this Application\">No Assessment Subscribed for this Application.</div></div>"
                jQuery('#dashboardaccordion-' + fragmentCount).html(msgDiv);
            }
            else if (result =='Session Expired'){
                showError("Your session has been expired. You must Login again.","Session Expired",2000);
                setTimeout(function(){location.reload()},2000);
            }
            else {
            	
           if(typeof window.fnGetPopulateQPPrintDataPreFuncForResponse == 'function')
        	   fnGetPopulateQPPrintDataPreFuncForResponse(result);

            	
            if(typeof window.fnBuildCustomizedGridQPPrintData == 'function') { 
            	fnBuildCustomizedGridQPPrintData(result);
         	   }
            
            else
            	{
                var totalAssementCount = result["Total Assessment Count"];
                jQuery('#dashboardaccordion-' + fragmentCount).html("");

                var Assessments = result.Assessments;
                if (Assessments != null && Assessments != undefined && Assessments.length != 0) {
                    if (Assessments.length == 1 && searchVal.length == 0) {
                        $('#SubsSearchBarMob_QP').css({ 'display': 'none' });
                        $('#SubsSearchBar_QP').css({ 'display': 'none' });

                    }
                    else {
                        $('#SubsSearchBarMob_QP').css({ 'display': "" });
                        $('#SubsDD_QP').css({ 'display': "" });
                        $('#SubsSearchBar_QP').css({ 'display': 'block' });
                    }


                    for (i = 0; i < Assessments.length; i++) {
                        var subjectName = Assessments[i]["Subject Name"];
                        var AssessmentCreatedOnDate = Assessments[i]["Assessment Created On"];
                        var AssessmentCreatedOnTime = AssessmentCreatedOnDate.split(' ')[1];
                        var onDate = (AssessmentCreatedOnDate.split(' ')[0]).split('-');
                        var AssessmentCreatedOn = $.datepicker.formatDate('dd M yy ', new Date(onDate[2], onDate[1] - 1, onDate[0])) + AssessmentCreatedOnTime;

                        var QuestionPaperDetails = Assessments[i]["Question Paper Details"];
                        var Qpcount = Assessments[i]["Qp count"];
                        var LogoPath = Assessments[i]["Logo Path"];
                        var NoOfSubscriptions = Assessments[i]["No of Subscriptions"];
                        var AssessmentDescription = Assessments[i]["Assessment Description"];
                        var AssessmentStartDate = Assessments[i]["Assessment Start Date"];
                        var AssessmentEndDate = Assessments[i]["Assessment End Date"];
                        var AssessmentName = Assessments[i]["Assessment Name"];
                        var subscribedOnDate = Assessments[i]["Subscribed On"];
                        var subscribedOnTime = subscribedOnDate.split(' ')[1];
                        var onDate1 = (subscribedOnDate.split(' ')[0]).split('-');
                        var subscribedOn = $.datepicker.formatDate('dd M yy ', new Date(onDate1[2], onDate1[1] - 1, onDate1[0])) + subscribedOnTime;

                        var subscriptionId = Assessments[i]["Subscription Id"];
                        var assessmentId = Assessments[i]["Assessment Id"];
                        var downloadCount = 0;

                        var QPDiv = "<div class=\"panel panel-default\" id=\"accordion" + i + "\">" +
                            "<div class=\"accordion-group showTrance toggleAccordianHeaderColor\">" +
                            "<div class=\"panel-heading clearfix\" role=\"tab\" id=\"headingOneQP" + i + "\" style=\"padding-bottom: 5px;\">" +
                            "<div class=\"posRelative\">";
                        if (LogoPath != undefined && LogoPath != "") {
                            imagePath = LogoPath;
                        }
                        QPDiv = QPDiv + "<div class=\"pull-left imgwrp\" style=\"width:70px\">" +
                            "<div class=\"image-container\"><img src=\"" + imagePath + "\" class=\"height50\" onerror=\"this.src='/EForms/images/onlineAppForm/default_user_group.png'\"> </div>" +
                            "</div>" +
                            "<div class=\"rgtpanel\">" +
                            "<div class=\"row displayflex\">" +
                            "<div class=\"col-md-5 col-sm-9 leftdiv borderRight\">" +
                            "<div class=\"courseDetailsDiv\">" +
                            "<h3 class=\"removemargin\">" + AssessmentName + "</h3>" +
                            " <!--<div class=\"courseContent\"><span class=\"lightgreytext\" data-staticKey=\"Duration\">Duration :</span><span class=\"sansSB\"> 3rd Feb,2015 (12:30PM)  5th Mar,2015 (14:35PM)</span></div>-->" +

                            "<div class=\"dashboardDate clearfix\">" +
                            "<div class=\"pull-left\">" + AssessmentDescription + "</div>" +
                            "<div class=\"clearfix\"></div>" +
                            "<div class=\"hidden-sm hidden-xs\"><span class=\"sansSB\"><span data-staticKey=\"Created On\">Created On</span> :" + AssessmentCreatedOn + "</span></div>" +
                            "<div class=\"pull-left  visible-xs  visible-sm margintop10\"> " +
                            "<span class=\"sansSB\"><span data-staticKey=\"Created On\">Created On </span>:" + AssessmentCreatedOn + "</span>" +
                            "<span class=\"dispMob\"><i class=\"edIco\"></i> <span class=\"sansSB\"><span data-staticKey=\"Subscribed On\">Subscribed On </span> :" + subscribedOn + "</span></span>" +
                            "</div>" +
                            "</div>" +
                            "</div>" +
                            "</div>" +
                            "<div class=\"col-md-7 col-sm-3 posRelative rightdiv\">" +
                            "<div class=\"pull-right launchwrp dispnNone\">" +
                            " <div class=\"btn-group marginleft10 margintop20\">" +
                            "<button type=\"button\" class=\"btn btn-default dropdown-toggle hidden-lg hidden-md removeborder Launchbtn\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"> <i class=\"fa fa-ellipsis-v font18\"></i> </button>" +
                            "<ul class=\"dropdown-menu dropdown-menu-right\">" +
                            "<!-- <li class=\"textOp\" style=\"padding: 20px 20px 0px;\"><span data-staticKey=\"Created On\">Created On</span>  (" + AssessmentCreatedOn + ")</li>" +
                            "<li class=\"textOp\" style=\"padding: 1px 20px 20px;\">Subscribed On </li>-->" +
                            "<li><a data-toggle=\"modal\" data-target=\"#QPModal" + i + "\"><span data-staticKey=\"Question Paper\">Question Papers</span> (" + Qpcount + ")</a></li>" +
                            "</ul>" +
                            "</div>" +
                            "</div>" +
                            "<div class=\"pull-left  border0 hidden-sm hidden-xs\">" +
                            "<div class=\"examnormal margintop20 marginleft10\"> <a data-table=\".passingmarkstable\" data-parent=\"#accordion" + i + "\" class=\"_Sldr_Div_link linktot  colorblack\" href=\"javascript:void(0)\" style=\"cursor:default\">" +
                            " <div><i class=\"edIco\"></i><span data-staticKey=\"Subscribed\">Subscribed</span> : <span class=\"sansB\">" + subscribedOn + "</span> </div>" +
                            "</a> </div>" +
                            "</div>" +
                            "<div class=\"pull-right  hidden-sm hidden-xs\">" +
                            "<div class=\"assignment SldractiveLi margintop10\"> <a  class=\"Sldr_Div_link linktot qpbutton blueTxt\" data-parent=\"#accordion" + i + "\" data-table=\".attemtestable\">" +
                            " <div class=\"padBtm20\"><span data-staticKey=\"Question Paper\">Question Papers</span> (" + Qpcount + ")</div>" +
                            "</a> </div>" +
                            "</div>" +
                            "</div>" +
                            "</div>" +
                            "</div>" +
                            "</div>" +
                            "</div>" +
                            "<div class=\"accordion-body collapse\" id=\"collapse" + i + "\">" +
                            "<div class=\"accordion-inner clearfix\">" +
                            "<div class=\"attemtestable examtable displaynone\" style=\"display: none;\">" +
                            "<div class=\"headSummery clearfix posRelative\">" +
                            "<li class=\"activeTableHead headerTxt\" data-name=\"Total\"><span data-staticKey=\"Question Paper\">Question Paper</span> (" + Qpcount + ")</li>" +
                            "<!--<li class=\"\" data-name=\"pending\">Pending Paper (5)</li>-->" +
                            " <div class=\"closeD pull-right\" data-tooltip=\"tooltip\" data-original-title=\"Close\"></div>" +
                            " </div>" +
                            "<table class=\"table table-bordered Total-Table\" >" +
                            "<tbody>" +
                            "<tr class=\"Total\">" +
                            "<td valign=\"middle\"><div class=\"\">" +
                            "<div class=\"clearfix container-fluid\">" +
                            "<div class=\"row  clearfix section-ques\">";


                        var QPModalDiv = "<div id = \"QPModal" + i + "\" class=\"modal fade QuestionModal\" tabindex=\"-1\" role=\"dialog\" >"
                        	+ "<div class=\"modal-dialog\">" +
                        "<div class=\"modal-content\">" +
                        "<div class=\"modal-header\">" +
                        "<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>" +
                        "<h4 class=\"modal-title\">Question Papers</h4>" +
                        "</div>" +
                        "<div class=\"modal-body clearfix mobscroll\">" 
                        
                        for (j = 0; j < QuestionPaperDetails.length; j++) {
                            var lastDownloadedAtDateTime = QuestionPaperDetails[j]["Last Downloaded At"];
                            var lastDownloadedAtDate = lastDownloadedAtDateTime.split(' ')[0];
                            var lastDownloadedAt = $.datepicker.formatDate('dd M yy ', new Date(lastDownloadedAtDate.split('-')[2], lastDownloadedAtDate.split('-')[1] - 1, lastDownloadedAtDate.split('-')[0])) + lastDownloadedAtDateTime.split(' ')[1] + ' ' + lastDownloadedAtDateTime.split(' ')[2];
                            var questionPaperId = QuestionPaperDetails[j]["QuestionPaper Id"];
                            var noOfTimesDownloaded = QuestionPaperDetails[j]["No of times Downloaded"];
                            var questionPaperName = QuestionPaperDetails[j]["QuestionPaperName"];
                            var questionPaperPath = QuestionPaperDetails[j]["Question Paper Path"];

                            //assignment table

                            QPDiv = QPDiv + "<div class=\"col-lg-3 col-md-3 col-sm-6 questPaperCont\">" +
                                "<div class=\"clearfix yettodownload_img blueTxt bg-white\"><span class=\"textEllipses \" title=\"" + questionPaperName + "\">" + questionPaperName + "</span></div>";

                            if (noOfTimesDownloaded == 0) {
                                QPDiv = QPDiv + "<div class=\"clearfix yetdownloadtitle\" ><a style=\"text-decoration:none;\" href=\"" + questionPaperPath + "\" target=\"_blank\" onclick=\"javascript:fnIncrementDownloadCount(" + orgID + "," + formId + ",'" + subscriptionId + "','" + assessmentId + "','" + app_seq_no + "','" + questionPaperId + "','" + fragmentCount + "','" + applnSequenceField + "');\">" +
                                    "<div class=\"date\"><i class=\"fa fa-download fa-1x rightmargin5px greyicon\" ></i><span class=\"greyicon\" data-staticKey=\"Yet to Download\">Yet to Download </span></div>" +
                                    "</div></a>";

                            }
                            else {
                                downloadCount = Number(downloadCount) + Number(noOfTimesDownloaded);

                                QPDiv = QPDiv + "<div class=\"clearfix downloadtitle divdownload\"> <a style=\"text-decoration:none;\" href=\"" + questionPaperPath + "\" target=\"_blank\" onclick=\"javascript:fnIncrementDownloadCount(" + orgID + "," + formId + ",'" + subscriptionId + "','" + assessmentId + "','" + app_seq_no + "','" + questionPaperId + "','" + fragmentCount + "','" + applnSequenceField + "');\">" +
                                    "<div class=\"date\"><i class=\"fa fa-download fa-1x rightmargin5px darkgreyicon\" ></i><span class=\"darkgreyicon lastdownload_txt fw_ml_lastdownloaded\" data-staticKey=\"Last downloaded\">Last downloaded </span><br> <span class=\"darkgreyicon lastgraydownload_txt\">" + lastDownloadedAt + "<div><span data-staticKey=\"Downloads\">Downloads</span> :" + noOfTimesDownloaded + "</div></span></div>" +
                                    "</div></a>";

                            }

                            QPDiv = QPDiv + "</div>";
                             
                            
                            QPModalDiv = QPModalDiv +   "<div>" +
                                "<div class=\"\">" +
                                "<div class=\"clearfix container-fluid\">" +
                                "<div class=\"row  clearfix \">";
                            if (noOfTimesDownloaded == 0) {
                                QPModalDiv = QPModalDiv + "<div class=\"col-lg-3 col-md-3 col-sm-6 questPaperCont paddingLeft0\">" +
                                    "<div class=\"clearfix yettodownload_img blueTxt\"><span class=\"textEllipses\" title=\"\">" + questionPaperName + "</span></div>" +
                                    "<div class=\"clearfix yetdownloadtitle\"><a href=\"" + questionPaperPath + "\" style=\"text-decoration:none;\" target=\"_blank\" onclick=\"javascript:fnIncrementDownloadCountForQPModal(" + orgID + "," + formId + ",'" + subscriptionId + "','" + assessmentId + "','" + app_seq_no + "','" + questionPaperId + "','" + applnSequenceField + "',this);\">" +
                                    "<div class=\"date\"><i class=\"fa fa-download fa-1x rightmargin5px greyicon\"></i><span class=\"greyicon yetToDownloadTxt\" data-staticKey=\"Yet to Download\">Yet to Download</span></div>" +
                                    "</div>" +
                                    "</a></div>";
                            }
                            else {
                                QPModalDiv = QPModalDiv + "<div class=\" col-lg-3 col-md-3 col-sm-6 questPaperCont\">" +
                                    "<div class=\"clearfix yettodownload_txt blueTxt bg-white\"><span class=\"textEllipses padTop10\" title=\"\">" + questionPaperName + "</span></div>" +
                                    "<div class=\"clearfix downloadtitle divdownload  download-info\">" +
                                    "<a style=\"text-decoration:none;\" href=\"" + questionPaperPath + "\" target=\"_blank\" onclick=\"javascript:fnIncrementDownloadCountForQPModal(" + orgID + "," + formId + ",'" + subscriptionId + "','" + assessmentId + "','" + app_seq_no + "','" + questionPaperId + "','" + applnSequenceField + "',this);\">" +
                                    "<div class=\"date\"><i class=\"fa fa-download fa-1x rightmargin5px darkgreyicon\"></i><span class=\"darkgreyicon " + "lastdownload_txt\"><span class=\"downloadedTxt\">Downloaded</span> <span class=\"openBracket\">(</span><span class=\"downloadCount\">" + noOfTimesDownloaded + "</span><span class=\"closeBracket\">)</span> </span><br>" +
                                    "<span class=\"darkgreyicon lastgraydownload_txt marginleft20 lastDownloadTxt\"><span class=\"lastDownloadTxt\">Last Download</span><span class=\"colon\">:</span> <span class=\"lastDownloadTime\">" + lastDownloadedAt + "</span></span></div>" +
                                    "</div>" +
                                    "</a></div>";
                            }

                            QPModalDiv = QPModalDiv + "</div>" +
                                "</div>" +
                                "</div>" +
                                "</div>"
                        }
                        
                        QPModalDiv = QPModalDiv +		"</div>" +
                        //            "<div class=\"text-center visible-sm visible-xs margintop10 marginbottom30\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\"></i> Back</a> <a class=\"btn btn-default\">Next <i class=\"fa fa-angle-right\"></i></a></div>"
                                "</div>" +
                                    //modal-content
                                    "</div>" +
                                    //modal-dialog
                                    "</div>" 
                        QPModalDiv = QPModalDiv + "</div>";		 // modal ends
                        $('body').append(QPModalDiv);
                        
                        QPDiv = QPDiv + "</div>" +
                            "</div>" +
                            "</div></td>" +
                            "</tr>" +

                            "</tbody>" +
                            "</table>";

                        QPDiv = QPDiv + "</div>" +
                            "</div>" +
                            "</div>" +
                            "</div>";



                        //Question Paper div ends
                        QPDiv = QPDiv + "</div>";

                        "</div>" +
                            "</div>" +
                            "<div class=\"container-fluid textalignright paddingbottom5 hidden-sm hidden-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\"></i></a> <a class=\"btn btn-default\"><i class=\"fa fa-angle-right\"></i></a></div>" +
                            "<div class=\"container-fluid textalignright paddingbottom5 hidden-lg hidden-md\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
                        QPDiv = QPDiv + "</div></div></div>";


               //         QPDiv = QPDiv + QPModalDiv;
                        jQuery('#dashboardaccordion-' + fragmentCount).append(QPDiv);
                        jQuery('#downloadCount-' + i + ' .sansSB').html('&nbsp' + downloadCount);
                        /*if($('#SearchQP-'+fragmentCount).length==0){
                            $('.accordionWrp').before(searchDiv);
                            }*/


                    }

                    var QPPgDiv = "<div class=\"container-fluid marginbottom20 \" style=\"padding-left: 0px ! important; padding-top: 8px !important;\">";
                    QPPgDiv = QPPgDiv + "<p class=\"pagenumbertext\"><span class=\"sansSB\">" + Assessments.length + "</span> <span data-staticKey=\"of\"> of </span> <span data-staticKey=\"Total\"> Total  </span> " + totalAssementCount + " <span data-staticKey=\"Question Paper\"> Question Papers </span> </p>"; var pageCount = totalAssementCount / 10;
                    if (pageCount > 1) {
                        QPPgDiv = QPPgDiv + "<div class=\" bottompagenum\">";
                        QPPgDiv = QPPgDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
                        QPPgDiv = QPPgDiv + "<nav class=\"hidden-sm hidden-xs\">";
                        QPPgDiv = QPPgDiv + "<ul class=\"pagination\">";
                        var currPage = $('#PageForQP').val();
                        for (var i = 1; i < pageCount + 1; i++) {
                            if (i == currPage) {
                                QPPgDiv = QPPgDiv + "<li class=\"active\" id=\"Page" + i + "\"><a  style=\"cursor:pointer\"  onclick=\"fnGetQPPrintDataFW(" + fragmentCount + "," + applnSequenceField + "," + formId + "," + orgID + ",'" + QPcondition + "'," + i + ")\">" + i + "</a></li>";
                            } else {
                                QPPgDiv = QPPgDiv + "<li id=\"Page" + i + "\"><a  style=\"cursor:pointer\"  onclick=\"fnGetQPPrintDataFW(" + fragmentCount + "," + applnSequenceField + "," + formId + "," + orgID + ",'" + QPcondition + "'," + i + ")\">" + i + "</a></li>";
                            }
                        }
                        QPPgDiv = QPPgDiv + "</ul>";
                        QPPgDiv = QPPgDiv + "</nav>";
                        QPPgDiv = QPPgDiv + "</div>";
                    }
                    QPPgDiv = QPPgDiv + "</div>";
                    QPPgDiv = QPPgDiv + "<div class=\"modal fade QuestionModal\" tabindex=\"-1\" role=\"dialog\>" +
                        "</div>";
                    jQuery('#dashboardaccordion-' + fragmentCount).append(QPPgDiv);
                    
                    $('#loader-indicator').hide();
                }//end of if statement
                else {
                	
                    if(typeof window.fnGetPopulateQPPrintDataPreFuncForNoResponse == 'function')
                    	fnGetPopulateQPPrintDataPreFuncForNoResponse(result);
                    
                    
                    if (QPcondition == 'live')
                        var msgDiv = "<div class=\"desc-heading margintop20\"><div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"No Question papers are available\">No Question papers available.</div></div>"
                    else if (QPcondition == 'future')
                        var msgDiv = "<div class=\"desc-heading margintop20\"><div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"No Question papers are available\">No Question papers available.</div></div>"
                    else if (QPcondition == 'past')
                        var msgDiv = "<div class=\"desc-heading margintop20\"><div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"No Question papers are available\">No Question papers available.</div></div>"
                    jQuery('#dashboardaccordion-' + fragmentCount).html(msgDiv);
                    $('#SubsSearchBarMob_QP').css({ 'display': 'none' });
                    $('#SubsSearchBar_QP').css({ 'display': 'none' });
                    
                    if(typeof window.fnGetPopulateQPPrintDataPostFuncForNoResponse == 'function')
                    	fnGetPopulateQPPrintDataPostFuncForNoResponse(result);
                    
                }



            }//else result is not null undefined ends
            
            
            if(typeof window.fnGetPopulateQPPrintDataPostFuncForResponse == 'function')
            	fnGetPopulateQPPrintDataPostFuncForResponse(result);

            }  //alert(subjectName);
            if (typeof window.fnBuildCustomizedGridForSubscriptionTabs == 'function') {

                fnBuildCustomizedGridForSubscriptionTabs('QP', result, fragmentCount);
            }
            if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
                multilingualFormStaticValue("Subscription");
        },

        error: function (x, e) {
            //alert(x.readyState + " "+ x.status +" "+ e.msg);
            var msgDiv = "<div class=\"desc-heading margintop20\" ><h3 data-staticKey=\"No Question papers are available\">No Question papers are available.</h3></div>"
            jQuery('#dashboardaccordion-' + fragmentCount).html(msgDiv);
            $('#SubsSearchBarMob_QP').css({ 'display': 'none' });
            $('#SubsSearchBar_QP').css({ 'display': 'none' });
        }
    });
    if (typeof window.fnPopulateDataFrameworkAfter == 'function') {

        fnPopulateDataFrameworkAfter('QP');
    }
    setTimeout(function () { $('#loader-indicator').hide(); }, 500);
}

function searchOnEnterCheckQP(fragmentCount, applnSequenceField, formId, orgId, elementId) {
    var countChk = 0;
    if (elementId.indexOf("Mobile") == -1) {
        $('#' + elementId).keypress(function (event) {
            if (countChk == 0) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
            }
            else {
                var keycode = "";
            }
            countChk = Number(countChk) + 1;

            {
                if (keycode == '13') {

                    keycode = "";
                    fnGetQPPrintData(fragmentCount, applnSequenceField, formId, orgId, '1')

                }
            }
        });
    }
    else {
        $("#searchInput_QP").val($("#" + elementId).val());
        fnGetQPPrintData(fragmentCount, applnSequenceField, formId, orgId, '1')
    }
}

function fnIncrementDownloadCount(orgID, formId, subscriptionId, assessmentId, app_seq_no, questionPaperId, fragmentCount, applnSequenceField) {
    var checksum = $('#checksum').val();
    var entityId = $('#entityId').val();
    var sessChk = $('#sessChk').val();
    $('#loader-indicator').show();
    $.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
            orgID: orgID,
            formId: formId,
            checksum: checksum,
            entityId: entityId,
            subscriptionId: subscriptionId,
            assessmentId: assessmentId,
            app_seq_no: app_seq_no,
            actionTaken: "updateQPDownloadCount",
            questionPaperId: questionPaperId,
            sessChk: sessChk
        },
        dataType: "text",
        success: function (result) {
            //alert("result:"+result);
            //window.open($(this).attr('href'),'_blank');

            fnGetQPPrintData(fragmentCount, applnSequenceField, formId, orgID, '1');

        },
        error: function (x, e) {
            //alert(x.readyState + " "+ x.status +" "+ e.msg);
        }
    });
    setTimeout(function () { $('#loader-indicator').hide(); }, 500);

}

function fnIncrementDownloadCountForSingleDashboard(orgID, formId, subscriptionId, assessmentId, app_seq_no, questionPaperId, applnSequenceField,e) {
    var checksum = $('#checksum').val();
    var entityId = $('#entityId').val();
    var sessChk = $('#sessChk').val();
    $('#loader-indicator').show();
    $.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
            orgID: orgID,
            formId: formId,
            checksum: checksum,
            entityId: entityId,
            subscriptionId: subscriptionId,
            assessmentId: assessmentId,
            app_seq_no: app_seq_no,
            actionTaken: "updateQPDownloadCount",
            questionPaperId: questionPaperId,
            sessChk: sessChk
        },
        dataType: "text",
        success: function (result) {
            //alert("result:"+result);
            //window.open($(this).attr('href'),'_blank');

        	var container = $(e).parents('.questPaperCont');
        	var downloadCount = parseInt(container.find('.downloadCount').text());
        	var today = new Date();
        	var dateTime = padZero(today.getDate()) + "-" + padZero(today.getMonth()+1) +"-" +today.getFullYear() +" "
        					+ padZero(today.getHours())+":"+padZero(today.getMinutes())+":"+padZero(today.getSeconds()) +" GMT(+05:30)";
        	container.find('.lastDownloadTime').text(dateTime);
        	
            if(downloadCount==0 || isNaN(downloadCount)) {	
            	container.find('.downloadCount').text("1");
            	container.find('.downloadedTxt').text("Downloaded");
            	container.find('.openBracket').text("(");
            	container.find('.closeBracket').text(")");
            	container.find('.lastDownloadTxt').text("Last Download");
            	container.find('.colon').text(":");
            	container.find('.yetToDownloadTxt').text("");
            	
            }
            else {
            	container.find('.downloadCount').text(downloadCount+1);	
            }

        },
        error: function (x, e) {
            //alert(x.readyState + " "+ x.status +" "+ e.msg);
        }
    });
    setTimeout(function () { $('#loader-indicator').hide(); }, 500);

}

function fnIncrementDownloadCountForQPModal(orgID, formId, subscriptionId, assessmentId, app_seq_no, questionPaperId, applnSequenceField,e) {
    var checksum = $('#checksum').val();
    var entityId = $('#entityId').val();
    var sessChk = $('#sessChk').val();
    $('#loader-indicator').show();
    $.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
            orgID: orgID,
            formId: formId,
            checksum: checksum,
            entityId: entityId,
            subscriptionId: subscriptionId,
            assessmentId: assessmentId,
            app_seq_no: app_seq_no,
            actionTaken: "updateQPDownloadCount",
            questionPaperId: questionPaperId,
            sessChk: sessChk
        },
        dataType: "text",
        success: function (result) {
            //alert("result:"+result);
            //window.open($(this).attr('href'),'_blank');

        	var container = $(e).parents('.questPaperCont');
        	var downloadCount = parseInt(container.find('.downloadCount').text());
        	var today = new Date();
        	var months    = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        	var dateTime = padZero(today.getDate()) + " " + months[today.getMonth()] +" " +today.getFullYear() +" "
        					+ padZero(today.getHours())+":"+padZero(today.getMinutes())+":"+padZero(today.getSeconds()) +" GMT(+05:30)";
        	container.find('.lastDownloadTime').text(dateTime);
        	
            if(downloadCount==0 || isNaN(downloadCount)) {	
            	container.find('.downloadCount').text("1");
            	container.find('.downloadedTxt').text("Downloaded");
            	container.find('.openBracket').text("(");
            	container.find('.closeBracket').text(")");
            	container.find('.lastDownloadTxt').text("Last Download");
            	container.find('.colon').text(":");
            	container.find('.yetToDownloadTxt').text("");
            	
            }
            else {
            	container.find('.downloadCount').text(downloadCount+1);	
            }

        },
        error: function (x, e) {
            //alert(x.readyState + " "+ x.status +" "+ e.msg);
        }
    });
    setTimeout(function () { $('#loader-indicator').hide(); }, 500);

}

function padZero(value) {
	return (value<10 ? "0"+value : value);
}

function isfutureDate(value) {
    var now = new Date();
    var target = new Date(value);

    if (target.getFullYear() > now.getFullYear()) {
        return true;
    }
    else if (target.getFullYear() == now.getFullYear()) {
        if (target.getMonth() > now.getMonth()) {
            return true;
        }
        else if (target.getMonth() == now.getMonth()) {
            if (target.getDate() >= now.getDate()) {
                return true;
            }
            else {
                return false;
            }
        }


    }

    else {
        return false;
    }
}
function fnGetDateTime(date) {
    return ($.datepicker.formatDate('dd M yy ', new Date(date)) + date.toLocaleTimeString().toLowerCase());
}
function fnGetDate(date) {
	var d = $.datepicker.formatDate('dd M yy ', new Date(date));
    return (d=="NaN undefined NaN ") ? "" : d ;
}
function getDate(date,format) {
    return date?$.datepicker.formatDate(format||'dd M yy ', new Date(date.trim().split(/\s+/)[0].split('-').reverse().join('-'))):'';
}
function validBookingDate(dateval){
    if(!dateval)return false;
        var date_time = dateval.trim().split(/\s+/);
    if(date_time.length!==2)return false;
        var date = date_time[0].split('-').reverse().join('-');
    return new Date(date+" "+date_time[1]) >= new Date();
}

$(document).ready(function () {
    $('.no-collapsable').on('click', function (e) {
        e.stopPropagation();
    });
});

function fnAttempt(attemptId, attemptClass) {
    $('.' + attemptClass).hide();
    //console.log('#'+attemptId);
    setTimeout(function () {
        $('#' + attemptId).css('display', 'block');
    }, 10);

}

$(window).on('message', function (e) {
    var messageReceived = e.originalEvent.data;
    if (typeof messageReceived == 'string') {
        var createDataPattern = messageReceived.split('@~@');
        if (createDataPattern[0] == "refreshFWDashboardAssessment" && createDataPattern[1] != "") {
            //alert("inside refreshFWDashboardAssessment");
            var assessmentId = createDataPattern[1];
            var PageForAssessment = $("#PageForAssessment").val();
            if (PageForAssessment == undefined || PageForAssessment == null || PageForAssessment == "")
                PageForAssessment = "1";
            var windowCloseEventCallAssId = "liveDelay_" + assessmentId;
            fnGetOnlineAssessmentData(windowCloseEventCallAssId, PageForAssessment);
        }
        if (createDataPattern[0] == "refreshFWDashboardCourse" && createDataPattern[1] != "") {
            //alert("inside refreshFWDashboardCourse");
            windowclosecourseId = createDataPattern[1];
            var PageForCourse = $("#PageForCourse").val();
            var paneltype = $("#fwcoursetypepanel li[class='active']").attr("id");
            if (paneltype == "course_current")
                paneltype = "currentCourse";
            else if (paneltype == "course_upcoming")
                paneltype = "upcomingCourse";
            else if (paneltype == "course_history")
                paneltype = "historyCourse";
            fnGetPvcData(paneltype, "", PageForCourse);

        }
    }
});




function populateManageCoursesNew(parsedData, Type) {

	//console.log(Type);
	$('#courseManageFW-content').html('');
	var newDiv="";
	var imagePath ="";
	newDiv=newDiv+"<div class=\"panel-group dashboardaccordions\" id=\"dashboardaccordionManageCourses\" role=\"tablist\" aria-multiselectable=\"true\">";
	
	
	if(parsedData.length>0)
	{
		if(typeof window.fnGetPopulateManageCoursesNewPreFuncForResponse == 'function')
  	   {
			fnGetPopulateManageCoursesNewPreFuncForResponse(parsedData);
  	   }

		
		if(typeof window.fnBuildFormManageCoursesNewCustomizedGrid == 'function') 
		  {
			fnBuildFormManageCoursesNewCustomizedGrid(parsedData);
		  }
		 else
			 {
	for(i=0;i<parsedData.length;i++){
		var data=parsedData[i];
		var domain = data.domain;
		var courseimage = data.logo;
		var totalCount=data.total_courses;
		var paramsAdd="",sharedOrgId="";
        if(data.vcgblorganization_id!=null) sharedOrgId=data.vcgblorganization_id;
		var courseid=data.courseid;
		var course_end_date=data.c_course_end_date;
		var course_type=data.c_course_type;
		var enroll_start_date=data.cu_enroll_start_date;
		var enroll_end_date=data.cu_enroll_end_date;
		var launch_course_path = data.launch_course;
		var launch_course_home = data.launch_course+"&type=iEvolve&lsamltype=abc"
		//var launch_course_home = domain+"/LX/home/login_launch_key?c_id="+data.slug+"&type=iEvolve&lsamltype=abc"
		 if(! (courseimage.includes('https://')))
		{
			imagePath = domain+courseimage;
		}
		else
			imagePath = courseimage;


		
					newDiv=newDiv+"<div class=\"panel panel-default\" id='accordion"+courseid +"'>"
					newDiv=newDiv+"<div class=\"accordion-group showTrance toggleAccordianHeaderColor\">"
					newDiv=newDiv+"<div class=\"panel-heading clearfix\" role=\"tab\" id=\"heading"+courseid +"\">"
					newDiv=newDiv+"<div class=\"posRelative\">"
					
						newDiv=newDiv+"<div class=\"pull-left imgwrp\" style=\"width:70px\">"
						newDiv=newDiv+"<div class=\"image-container\"><img onerror=\"this.src='/EForms/images/onlineAppForm/default_user_group.png'\" src=\"" +imagePath +"\" class=\"\"></div>"
						newDiv=newDiv+"</div>"
					
					newDiv=newDiv+"<div class=\"rgtpanel\">"
					newDiv=newDiv+"<div class=\"row\">"
					newDiv=newDiv+"<div class=\"col-md-5 col-sm-8 leftdiv\" style=\"padding-left:0\" >"
					newDiv=newDiv+"<div class=\"courseDetailsDiv\">"
					newDiv=newDiv+"<a><h4 class=\"removemargin no-collapsable truncateTitle\"  onclick=\"redirectToLXURL('"+launch_course_home+"','"+sharedOrgId+"','Y');\">"+data.name+"</h4></a>"
		
					newDiv=newDiv+"</div>"	// courseDetailsDiv ends
					newDiv=newDiv+"</div>" // col-md-5 ends
					
					newDiv=newDiv+"<div class=\"col-md-7 col-sm-4 posRelative rightdiv\" style=\"padding-left:0\">"
					
					newDiv=newDiv+"<div class=\"pull-right launchwrp\" > <a title=\"Launch Course Content\" target=\"_blank\" onclick=\"javascript: redirectToLXURL('"+domain+launch_course_path+"','"+sharedOrgId+"','Y');\" class=\"pendinglable pull-left \"><i></i><span data-staticKey=\"Launch\">Launch</span></a>"

					newDiv=newDiv+"</div>";	//pull-right launchwrp ends
					
					
					
					 if (data.manage_courses_report != null && data.manage_courses_report != undefined && data.manage_courses_report != "" && data.manage_courses_report != "NA" && data.manage_courses_report != "na") {
					 
						newDiv=newDiv+"<div class=\"pull-right hidden-sm hidden-xs newDesign_dynamicPanel\" id=\"newDesign_dynamicPanel_1\" style=\"display: block;\">"
					 
							newDiv = newDiv + "<div class=\"newwDesign_report dynamicAdded pull-right\">"
							newDiv = newDiv + "<svg xml:space=\"preserve\" enable-background=\"new 0 0 20 20\" viewBox=\"0 0 20 20\" class=\"newDesign_reportIcon\" y=\"0px\" x=\"0px\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">"
							newDiv = newDiv + "<g id=\"Layer_8\">"
							newDiv = newDiv + "<circle r=\"9.958\" cy=\"10.083\" cx=\"9.958\" fill=\"#73a7da\" clip-rule=\"evenodd\" fill-rule=\"evenodd\"/>"
							newDiv = newDiv + "<g id=\"Rectangle_1_1_\">"
							newDiv = newDiv + "<g>"
							newDiv = newDiv + "<rect height=\"7.832\" width=\"2.61\" fill=\"#6EFEA6\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"4.344\" x=\"13.004\"/>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "<g id=\"Rectangle_1_copy_1_\">"
							newDiv = newDiv + "<g>"
							newDiv = newDiv + "<rect height=\"6.092\" width=\"2.611\" fill=\"#FFD060\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"6.084\" x=\"8.652\"/>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "<g id=\"Rectangle_1_copy_2_1_\">"
							newDiv = newDiv + "<g>"
							newDiv = newDiv + "<rect height=\"4.351\" width=\"2.61\" fill=\"#E4F1FB\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"7.825\" x=\"4.301\"/>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "<g id=\"Rectangle_2_1_\">"
							newDiv = newDiv + "<g>"
							newDiv = newDiv + "<rect height=\"1.74\" width=\"11.313\" fill=\"#E4F1FB\" clip-rule=\"evenodd\" fill-rule=\"evenodd\" y=\"13.916\" x=\"4.301\"/>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "</g>"
							newDiv = newDiv + "</svg>"
							newDiv = newDiv + "<div onclick=\"redirectToLXURL('" + domain + data.manage_courses_report +"','"+sharedOrgId+"');\" class=\"reportText lnkTrance\" data-staticKey=\"View Report\">View Report</div>"
							newDiv = newDiv + "</div>"
						
						newDiv = newDiv + "</div>"

						}
					
					newDiv=newDiv+"</div>";		// col-md-7 ends
		
		
				
		newDiv=newDiv+"</div>";		// row ends
		newDiv=newDiv+"</div>";		// rgtpanel ends
		newDiv=newDiv+"</div>";		// posRelative ends
		newDiv=newDiv+"</div>";		// panel-heading clearfix ends
		newDiv=newDiv+"</div>";		// accordion-group ends
		newDiv=newDiv+"</div>";		// panel panel-default ends
    }
	}
	}
    
    

    newDiv = newDiv + "<div class=\"container-fluid marginbottom20 \" style=\"padding-left: 0px ! important; padding-top: 8px !important;\">";
    if (parsedData.length > 0) {
        newDiv = newDiv + "<p class=\"pagenumbertext\"><span class=\"sansSB\">" + parsedData.length + "</span> <span data-staticKey=\"of\">of</span>  <span data-staticKey=\"Total\">Total</span> " + totalCount + "<span data-staticKey=\"Courses\">Courses</span></p>";
        
        if(typeof window.fnGetPopulateManageCoursesNewPostFuncForResponse == 'function')
    		fnGetPopulateManageCoursesNewPostFuncForResponse(parsedData);
    }
    else {
    	
	if(typeof window.fnGetPopulateManageCoursesNewPreFuncForNoResponse == 'function') 
		fnGetPopulateManageCoursesNewPreFuncForNoResponse();
			
    	
	
        $('#SubsSearchBar_managecourses').css({ 'display': 'none' });
        $('#SubsSearchBarMob_managecourses').css({ 'display': 'none' });

        if (Type == 'current')
            newDiv = newDiv + "<div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"There are no active courses for which you are tagged as administrator/ faculty.\">There are no active courses for which you are tagged as administrator/ faculty.</div>";
        else if (Type == 'upcoming')
            newDiv = newDiv + "<div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"There are no courses due to start for which you are tagged as administrator/ faculty.\">There are no courses due to start for which you are tagged as administrator/ faculty.</div>";
        else if (Type == 'history')
            newDiv = newDiv + "<div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"There are no courses which have been marked as complete and you are tagged as administrator/ faculty.\">There are no courses which have been marked as complete and you are tagged as administrator/ faculty.</div>";
        else if(Type == 'expired')
			newDiv = newDiv + "<div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"There are no courses which have expired and you are tagged as administrator/faculty.\">There are no courses which have expired and you are tagged as administrator/faculty.</div>";
        else if (Type == 'courseTemplate')
            newDiv = newDiv + "<div class=\"noSubsDataTxt\" style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"There are no course templates for which you are tagged as administrator/ faculty.\">There are no course templates for which you are tagged as administrator/ faculty.</div>";


    	if(typeof window.fnGetPopulateManageCoursesNewPostFuncForNoResponse == 'function') 
    		fnGetPopulateManageCoursesNewPostFuncForNoResponse();
    			

        //newDiv=newDiv+"<div style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"No Courses have been subscribed\">No Courses have been subscribed.</div>";
    }
    var pageCount = totalCount / 10;
    if (pageCount > 1) {
        newDiv = newDiv + "<div class=\" bottompagenum\">";
        //var pageCount=totalCount/10;
        var currPage = $('#PageForCourse').val();
        if (currPage == 1) {
            newDiv = newDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" onclick=\"fnGetPvcData('" + Type + "','',Number(" + currPage + ")+1);\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
        }
        else if (currPage == pageCount) {
            newDiv = newDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\" onclick=\"fnGetPvcData('" + Type + "','',Number(" + currPage + ")-1);\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" data-staticKey=\"Next\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
        }
        else {
            newDiv = newDiv + "<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\" onclick=\"fnGetPvcData('" + Type + "','',Number(" + currPage + ")-1);\"><i class=\"fa fa-angle-left\" data-staticKey=\"Back\"></i> Back</a> <a class=\"btn btn-default\" onclick=\"fnGetPvcData('" + Type + "','',Number(" + currPage + ")+1);\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
        }

        //newDiv=newDiv+"<div class=\"text-center visible-sm visible-xs\"><a class=\"btn btn-default\"><i class=\"fa fa-angle-left\"></i> Back</a> <a class=\"btn btn-default\">Next <i class=\"fa fa-angle-right\"></i></a></div>";
        newDiv = newDiv + "<nav class=\"hidden-sm hidden-xs\">";
        newDiv = newDiv + "<ul class=\"pagination\">";

        for (var i = 1; i < pageCount + 1; i++) {
            if (i == currPage) {
                newDiv = newDiv + "<li class=\"active\" id=\"Page" + i + "\"><a style=\"cursor:pointer\" onclick=\"fnGetPvcData('" + Type + "','','" + i + "');\">" + i + "</a></li>";
            } else {
                newDiv = newDiv + "<li id=\"Page" + i + "\"><a style=\"cursor:pointer\" onclick=\"fnGetPvcData('" + Type + "','','" + i + "');\">" + i + "</a></li>";
            }
        }
        newDiv = newDiv + "</ul>";
        newDiv = newDiv + "</nav>";
        newDiv = newDiv + "</div>";
    }
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "</div>";
    newDiv = newDiv + "  </div>";
    $('#courseManageFW-content').html(newDiv);
    $('#courseManageFW-content').css({ 'display': 'block' });
    $(".ddForSubType").click(function () {
        var id = $(this).attr('id');
        $($('#' + id).parent().parent().siblings('button').contents()[0]).html($('#' + id + ' a span.text').html())
    });
    $('.no-collapsable').on('click', function (e) {
        e.stopPropagation();
    });
    if (windowclosecourseId != "") {
        $("#courseManageFW-content #heading" + windowclosecourseId + " a").click();
        windowclosecourseId = "";
    }
    loadHorizontalTabs();
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
   
}


//___________Slot Booking Code begins..._________________

$(document).on("click", ".halTktTabBack", function () {
    var httab = $(this).attr("data-ht-tab");
    $('.halTktSecTabTxt').eq(httab - 1).removeClass('halTktSecTabTxtVis').addClass('halTktSecTabTxtAct');
    $('.halTktSecTabIndxBdr').eq(httab - 1).removeClass('halTktSecTabIndxBdrVis').addClass('halTktSecTabIndxBdrAct');
    $('.halTktSecTabIndxTxt').eq(httab - 1).removeClass('halTktSecTabIndxTxtVis').addClass('halTktSecTabIndxTxtAct');
    $(this).removeClass("halTktTabBackAct");
    if (httab >= 2) {
        $(".halTktTabBack").eq(httab - 2).addClass("halTktTabBackAct");
    }
    $(".halTktTab").removeClass("halTktTabShow");
    $(".halTktTab").eq(httab - 1).addClass("halTktTabShow");
    $(".halTktCont").hide();
    $(".halTktCont").eq(httab - 1).show();
});
$(document).on("click", ".selCourseBack", function () {
    var httab = $(this).attr("data-ht-tab");
    $('.halTktSecTabTxt').eq(httab).removeClass('halTktSecTabTxtAct').addClass('halTktSecTabTxtVis');
    $('.halTktSecTabIndxBdr').eq(httab).removeClass('halTktSecTabIndxBdrAct').addClass('halTktSecTabIndxBdrVis');
    $('.halTktSecTabIndxTxt').eq(httab).removeClass('halTktSecTabIndxTxtAct').addClass('halTktSecTabIndxTxtVis');
    $('.halTktSecTabTxt').eq(httab - 1).removeClass('halTktSecTabTxtVis').addClass('halTktSecTabTxtAct');
    $('.halTktSecTabIndxBdr').eq(httab - 1).removeClass('halTktSecTabIndxBdrVis').addClass('halTktSecTabIndxBdrAct');
    $('.halTktSecTabIndxTxt').eq(httab - 1).removeClass('halTktSecTabIndxTxtVis').addClass('halTktSecTabIndxTxtAct');
    $(".halTktCont").hide();
/*    if (httab == 3) {			
   	$('#txhalTktCalenderCont').css('display', 'block');		
   	$('#txbookDateSubmitCont').css('display', 'block');		
    }		
   	else		
   	{		
    $('#txhalTktCalenderCont').css('display', 'none');		
   	$('#txbookDateSubmitCont').css('display', 'none');		
   	}	*/	
   $(".halTktCont").eq(httab - 1).show();		
   });
$(document).on("click", ".halTktTabAct", function () {
    var httab = $(this).attr("data-ht-tab");
    $(".halTktTabBack").removeClass("halTktTabBackAct");
    if (httab >= 2) {
        $(".halTktTabBack").eq(httab - 2).addClass("halTktTabBackAct");
    }
    $(".halTktTabAct").find('.halTktSecTabTxt').addClass('halTktSecTabTxtVis');
    $(".halTktTabAct").find('.halTktSecTabIndxBdr').addClass('halTktSecTabIndxBdrVis');
    $(".halTktTabAct").find('.halTktSecTabIndxTxt').addClass('halTktSecTabIndxTxtVis');
    $(this).find('.halTktSecTabTxt').removeClass('halTktSecTabTxtVis').addClass('halTktSecTabTxtAct');
    $(this).find('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrVis').addClass('halTktSecTabIndxBdrAct');
    $(this).find('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtVis').addClass('halTktSecTabIndxTxtAct');
    $(".halTktTab").removeClass("halTktTabShow");
    $(".halTktTab").eq(httab - 1).addClass("halTktTabShow");
    $(".halTktCont").hide();
/*    if (httab == 3) 		
    {		
   $('#txhalTktCalenderCont').css('display', 'block');		
   $('#txbookDateSubmitCont').css('display', 'block');		
    }		
	 else		
	 {		
   $('#txhalTktCalenderCont').css('display', 'none');		
   $('#txbookDateSubmitCont').css('display', 'none');		
	 }*/
    $(".halTktCont").eq(httab - 1).show();
});
$(document).on("click", ".selectcoursesubmit", function () {
    if ($('#OACountryDD').val() == "") {
        alert('Please select Country');
        return false;
    }
    if ($('#OAStateDD').val() == "") {
        alert('Please select State');
        return false;
    }
    if ($('#OACityDD').val() == "") {
        alert('Please select City');
        return false;
    }
    
    else {
    	fnGetOATestCenter();
        var httab = $(this).attr("data-ht-tab");//manual event trigger from confirmation
        $('.halTktSecTabTxt').removeClass('halTktSecTabTxtAct');
        $('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrAct');
        $('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtAct');
        $(".halTktTab").eq(httab - 2).find('.halTktSecTabTxt').addClass('halTktSecTabTxtVis');
        $(".halTktTab").eq(httab - 2).find('.halTktSecTabIndxBdr').addClass('halTktSecTabIndxBdrVis');
        $(".halTktTab").eq(httab - 2).find('.halTktSecTabIndxTxt').addClass('halTktSecTabIndxTxtVis');
        $(".halTktTab").eq(httab - 1).find('.halTktSecTabTxt').removeClass('halTktSecTabTxtVis').addClass('halTktSecTabTxtAct');
        $(".halTktTab").eq(httab - 1).find('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrVis').addClass('halTktSecTabIndxBdrAct');
        $(".halTktTab").eq(httab - 1).find('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtVis').addClass('halTktSecTabIndxTxtAct');
        $(".halTktTab").removeClass("halTktTabShow");
        $(".halTktTab").eq(httab - 1).addClass("halTktTabAct halTktTabShow");
        $(".halTktTabBack").removeClass("halTktTabBackAct");
        $(".halTktTabBack").eq(httab - 2).addClass("halTktTabBackAct");
        $(".halTktCont").hide();
        $(".halTktCont").eq(httab - 1).show();
        $("html, body, #hallTicketPopUp").animate({ scrollTop: "0px" });

    }
});

$(document).on("click", ".selectCourseDateTimeSubmit", function () {
    var slotStartTime = $('#slotstarttime').html();//$()
    var slotEndTime = $('#slotendtime').html();//$()
    if ($('#selectedDate').html().includes('00') == true) {
        alert("Please select a Date ");
        return false;
    }

    else  if (slotStartTime > slotEndTime) {
           alert('Invalid Time Selection');
           return false;
       }
    
    else
    {
      	 if (valPres==true)
        {
      		 
        if(valBook)
        return false;
       
      	 var a = $(".timeTabsContent01 input").parents('.dateContentRightTimePick').find('.timepicker-hour').html();
      	 var b = $(".timeTabsContent01 input").parents('.dateContentRightTimePick').find('.timepicker-minute').html();
      	 if((getTimeInMinutes(a,b)< getTimeInMinutes(hrVal,minVal)) || (getTimeInMinutes(a,b)>getTimeInMinutes(hour,minute)))
      	 {
      	var msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; color: red; font-family:  OpenSans-semebold; font-size: 16px;\" data-staticKey=\"TimeSlot \">Time Slot available between " +hrVal+":"+minVal+" and "+hVal+":"+mVal+"</div></div>";
	    jQuery('#selCoContSubHdBuk').html(msgDiv);	 
      	return false;
      	 }
        }
        var httab = $(this).data("ht-tab");
        $('.halTktSecTabTxt').removeClass('halTktSecTabTxtAct');
        $('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrAct');
        $('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtAct');
        $(".halTktTab").eq(httab - 2).find('.halTktSecTabTxt').addClass('halTktSecTabTxtVis');
        $(".halTktTab").eq(httab - 2).find('.halTktSecTabIndxBdr').addClass('halTktSecTabIndxBdrVis');
        $(".halTktTab").eq(httab - 2).find('.halTktSecTabIndxTxt').addClass('halTktSecTabIndxTxtVis');
        $(".halTktTab").eq(httab - 1).find('.halTktSecTabTxt').removeClass('halTktSecTabTxtVis').addClass('halTktSecTabTxtAct');
        $(".halTktTab").eq(httab - 1).find('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrVis').addClass('halTktSecTabIndxBdrAct');
        $(".halTktTab").eq(httab - 1).find('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtVis').addClass('halTktSecTabIndxTxtAct');
        $(".halTktTab").removeClass("halTktTabShow");
        $(".halTktTab").eq(httab - 1).addClass("halTktTabAct halTktTabShow");
        $(".halTktTabBack").removeClass("halTktTabBackAct");
        $(".halTktTabBack").eq(httab - 2).addClass("halTktTabBackAct");
        $(".halTktCont").hide();
        $(".halTktCont").eq(httab - 1).show();
       /* if (httab == 3) 		
		 {		
         $('#txhalTktCalenderCont').css('display', 'block');		
	     $('#txbookDateSubmitCont').css('display', 'block');		
         }		
	     else		
	     {		
	   	 $('#txhalTktCalenderCont').css('display', 'none');		
	     $('#txbookDateSubmitCont').css('display', 'none');		
	     }		*/
			   
        $("html, body, #hallTicketPopUp").animate({ scrollTop: "0px" });
    }
});

$(document).on("click", ".selCourseSel", function () {
    var httab = $(this).data("ht-tab");
    $('.halTktSecTabTxt').removeClass('halTktSecTabTxtAct');
    $('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrAct');
    $('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtAct');
    $(".halTktTab").eq(httab - 2).find('.halTktSecTabTxt').addClass('halTktSecTabTxtVis');
    $(".halTktTab").eq(httab - 2).find('.halTktSecTabIndxBdr').addClass('halTktSecTabIndxBdrVis');
    $(".halTktTab").eq(httab - 2).find('.halTktSecTabIndxTxt').addClass('halTktSecTabIndxTxtVis');
    $(".halTktTab").eq(httab - 1).find('.halTktSecTabTxt').removeClass('halTktSecTabTxtVis').addClass('halTktSecTabTxtAct');
    $(".halTktTab").eq(httab - 1).find('.halTktSecTabIndxBdr').removeClass('halTktSecTabIndxBdrVis').addClass('halTktSecTabIndxBdrAct');
    $(".halTktTab").eq(httab - 1).find('.halTktSecTabIndxTxt').removeClass('halTktSecTabIndxTxtVis').addClass('halTktSecTabIndxTxtAct');
    $(".halTktTab").removeClass("halTktTabShow");
    $(".halTktTab").eq(httab - 1).addClass("halTktTabAct halTktTabShow");
    $(".halTktTabBack").removeClass("halTktTabBackAct");
    $(".halTktTabBack").eq(httab - 2).addClass("halTktTabBackAct");
    $(".halTktCont").hide();
/*    if (httab == 3) { 		
    	$('#txhalTktCalenderCont').css('display', 'block');		
    	$('#txbookDateSubmitCont').css('display', 'block');		
        }		
    	else		
    	{		
       	$('#txhalTktCalenderCont').css('display', 'none');		
    	$('#txbookDateSubmitCont').css('display', 'none');		
    	}*/
    $(".halTktCont").eq(httab - 1).show();
    $("html, body, #hallTicketPopUp").animate({ scrollTop: "0px" });

});



$(document).on("click", ".halTktCalenderTab", function () {
    var calTab = $(this).attr("data-ht-tab");
    $(".halTktCalenderTab").removeClass("halTktCalenderTabAct");
    $(this).addClass("halTktCalenderTabAct");
    $(".halTktContMain").removeClass("halTktContMainAct");
    $(".halTktContMain" + calTab + "").addClass("halTktContMainAct");
    $('.availFull').hide();
    $('.availNull').show();
});


$(document).ready(function () {
    var vWidth = $(window).width();
    if (vWidth <= 767) {
        $(".halTktContSubAdd").removeClass('halTktContSubAddDsk').addClass('halTktContSubAddMob');
    } else {
        $(".halTktContSubAdd").removeClass('halTktContSubAddMob').addClass('halTktContSubAddDsk');
    }

    if (vWidth <= 767) {

        $('.halTktCalenderTabAct').find(".halTktContMain2").show();
        $(document).on("click", ".halTktCalenderTab", function () {
            //$(".halTktContMain").hide();
            $(this).find(".halTktContMainAct").slideToggle();
        });

    }

    $(document).on("click", ".datetimepicker12", function () {
        var pos = $(this).position();
        var left = Math.round(pos.left - 17);
        /*var top = Math.round(pos.top-55);*/
        $('.flyout_cont').slideToggle();
        $(this).toggleClass('chngColr');
        $('.flyout_cont').css({ "top": top, "left": left });

    });
    $(document).on("click", ".cancel", function () {
        $('.flyout_cont').slideUp();
        $('.datetimepicker12').removeClass('chngColr');
    });

    //$('.custom_datetime').datetimepicker({
    // format: 'DD/MM/YYYY',
    // inline: true
    // });


    //tabs script start

    
    $(".tabs").on("click", function () {
        var tabs = $(this).data('tabs');
		if(tabs != undefined)
		{
        $(".tabs,.tabCont").removeClass('act');
        $(this).addClass('act');
        $("." + tabs + "").addClass('act');
		}
    });
    

    //load more script start

    $(document).on("click", ".loadMoreAss", function () {
        $(this).parents('.loadMoreCont').find(".loaderCont").show();
        setTimeout(function () {
            $(".loaderCont").hide();
            //var contentHTML = $(".loadMoreCurrAss").parents('.tabCont').find('.historySec:eq(-1),.historySec:eq(-2)').clone();
            //$(".loadMoreCurrAss").parents('.tabCont').find(".tabsContent").append(contentHTML);
        }, 500);
    });
    $(".loadMoreCurrAss").on("click", function () {
        $(this).parents('.loadMoreCont').find(".loaderCont").show();
        setTimeout(function () {
            $(".loaderCont").hide();
            var contentHTML = $(".loadMoreCurrAss").parents('.tabCont').find('.historySec:eq(-1),.historySec:eq(-2)').clone();
            $(".loadMoreCurrAss").parents('.tabCont').find(".tabsContent").append(contentHTML);
        }, 500);
    });





});




$(window).resize(function (e) {
    var vWidth = $(window).width();
    if (vWidth <= 768) {
        $(".halTktContSubAdd").removeClass('halTktContSubAddDsk').addClass('halTktContSubAddMob');
    } else {
        $(".halTktContSubAdd").removeClass('halTktContSubAddMob').addClass('halTktContSubAddDsk');
    }
});


$(".halTktContSub").on("mouseover", (".halTktContSubAddDsk"), function () {
    $(this).next(".halTktContSubAddFul").show();
});
$(".halTktContSub").on("mouseout", (".halTktContSubAddDsk"), function () {
    $(this).next(".halTktContSubAddFul").hide();
});

$(".halTktContSub").on("click", (".halTktContSubAddMob"), function () {
    $(".halTktContSubAddMobBg").css({ "display": "block", "position": "absolute", "top": "0", "left": "0", "z-index": "1000", "width": $(window).width(), "height": $(window).height() });
    $(this).next(".halTktContSubAddFul").show();
});
$(".halTktContSubAddMobBg").on("click", function (e) {
    $(this).hide();
    $(".halTktContSubAddFul").hide();
});


//$('.hallTicketPopUpHeader .close').on('click',function(){$('body').css('overflow','auto')});
$('#confirmPop').on('hidden', function () {
    $('#hallTicketPopUp').css('overflow', 'auto');
});

$('#confirmClose').on('hidden', function () {		
    $('#hallTicketPopUp').css('overflow', 'auto');		
});		

$('#hallTicketPopUp').on('hidden.bs.modal', function () {
	var param = $(this).attr('data-param');
	
	if(param == undefined) {	// data-param is set in slotbooking modal only for singledashboard
		fnGetOnlineAssessmentDataRefresh();
	}
	else {
		var contId = $(this).attr('data-containerid'),
		pagenum = $(this).attr('data-pagenum');
		
		$(contId).html(''); 	
				
		buildInnerContent('',contId,undefined,param,pagenum);
		
		/*if(currentPanel.prev('a').data('param')) {
			currentPanel.prev('a').click();
			currentPanel = $(".panel-collapse.collapse").prev('a').next();
			currentPanel.html('');
			currentPanel.append('<div></div>');
			currentPanel.children().append('<div class="norecord"></div>');;
			currentPanel.prev('a').click();
		}*/
	}
	
});


function fnShowDivs(type, assessId,subscriptionId,tcState,tcCity,tcId,type,e)
{
	/*if(type=='slotInfo')
	{
	isEditAllowed=true;
	selectedState=tcState;
	selectedCity=tcCity;
	selTcId=tcId;
	fnSelectTC(selTcId);
	}
	
	else if(type=='addrInfo')*/
	isEditAllowed=false;
	
	fnGetSlotModal(type, assessId,subscriptionId,e);
}

function hideHallTicketPopUp()
{
	if ($("#hallTicketPopUp").length)
	$('#hallTicketPopUp').modal('hide');
	
	location.reload();

}
function fnGetSlotModal(type, assessId,subscriptionId,e) {
	if(e != undefined)
		{
	if (!$("#hallTicketPopUp").length)
	$('<div id="hallTicketPopUp" class="modal fade hallTicketPopUp" role="dialog"></div>').appendTo('body');
	if (!$("#confirmPop").length)
	$('<div id="confirmPop" class="modal fade msgPop confirmPop" role="dialog" style="display: none;"><div class="modal-dialog"> <div class="modal-content"><div class="modal-header b_g_c_white"><button type="button" class="close" data-dismiss="modal" data-tooltip="tooltip" title="" data-original-title="Close"><div class="close_link"><svg xml:space="preserve" enable-background="new 0 0 24 24" viewBox="0 0 24 24" height="24px" width="24px" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Layer_1" version="1.1"><path d="M20.203,20.475c-0.241,0.227-0.62,0.215-0.847-0.027l-7.082-7.708l-7.112,7.706c-0.227,0.244-0.605,0.256-0.847,0.027c-0.241-0.229-0.253-0.611-0.027-0.857l7.161-7.758L4.463,4.372C4.237,4.131,4.249,3.751,4.49,3.525c0.242-0.227,0.621-0.214,0.847,0.027l6.928,7.422l6.883-7.417c0.226-0.244,0.604-0.256,0.847-0.027c0.241,0.229,0.253,0.612,0.027,0.856l-6.933,7.471l7.141,7.77C20.456,19.869,20.444,20.248,20.203,20.475z" class="close_icon" fill="#333333" clip-rule="evenodd" fill-rule="evenodd"></path></svg></div></button><div class="icoCont"><div class="ico"><i class="fa fa-check" aria-hidden="true"></i></div></div></div><div class="modal-body"><div class="confHdTxt">Slot Booked Successfully</div><div class="confTxt">Close popup to see more details.</div></div><div class="modal-footer b_g_c_white"><button type="button"   class="btn btn-default contiBtn" data-dismiss="modal" onclick="hideHallTicketPopUp();">OK</button></div></div></div></div>').appendTo('body');
	if (!$("#confirmClose").length)
	$('<div id="confirmClose" class="modal fade msgPop confirmClose" role="dialog" style="display: none;"><div class="modal-dialog"> <div class="modal-content"><div class="modal-header b_g_c_white"><button type="button" class="close" data-dismiss="modal" data-tooltip="tooltip" title="" data-original-title="Close"><div class="close_link"><svg xml:space="preserve" enable-background="new 0 0 24 24" viewBox="0 0 24 24" height="24px" width="24px" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Layer_1" version="1.1"><path d="M20.203,20.475c-0.241,0.227-0.62,0.215-0.847-0.027l-7.082-7.708l-7.112,7.706c-0.227,0.244-0.605,0.256-0.847,0.027c-0.241-0.229-0.253-0.611-0.027-0.857l7.161-7.758L4.463,4.372C4.237,4.131,4.249,3.751,4.49,3.525c0.242-0.227,0.621-0.214,0.847,0.027l6.928,7.422l6.883-7.417c0.226-0.244,0.604-0.256,0.847-0.027c0.241,0.229,0.253,0.612,0.027,0.856l-6.933,7.471l7.141,7.77C20.456,19.869,20.444,20.248,20.203,20.475z" class="close_icon" fill="#333333" clip-rule="evenodd" fill-rule="evenodd"></path></svg></div></button><div class="icoCont"><div class="ico"><i class="fa fa-check" aria-hidden="true"></i></div></div></div><div class="modal-body"><div class="confHdTxt">Slot Could Not Be Booked</div><div class="confTxt">Close popup to see more details.</div></div><div class="modal-footer b_g_c_white"><button type="button"   class="btn btn-default contiBtn" data-dismiss="modal" onclick="hideHallTicketPopUp();">OK</button></div></div></div></div>').appendTo('body');
		}
	
    $('#hallTicketPopUp').html('');
    var newDiv = "";
    //alert(OAresponseDoc);
    $('#hallTicketPopUp').removeAttr('data-param','data-pagenum','data-containerid');
    
    /*if(e != undefined) {	// function was called from single dashboard
	    var anchorElement = $(e.currentTarget).parents('.panel-collapse.collapse.in').prev('a');
	    var paramForModal = JSON.stringify(anchorElement.data('param'));
	    var pagenumForModal = anchorElement.data('pagenum');
	    var containeridForModal = "#" + anchorElement.next().attr('id');
	    
	    $('#hallTicketPopUp').attr('data-param',paramForModal);
	    $('#hallTicketPopUp').attr('data-pagenum',pagenumForModal);
	    $('#hallTicketPopUp').attr('data-containerid',containeridForModal);
    }*/

    var x = OAresponseDoc.getElementsByTagName("OnlineAssessment");
    xvalue=x;
    for (j = 0; j < x.length; j++) {
        var assessmentId = x[j].getAttribute("AssessmentId");
        if (assessmentId == assessId) {
            var assessmentName = x[j].getAttribute("AssessmentName");
            var CountryList = x[j].getAttribute("CountryList");
            var CountryJSON = JSON.parse(CountryList);
            var WorkingHrsStart = x[j].getAttribute("WorkingHrsStart");
            var WorkingHrsEnd = x[j].getAttribute("WorkingHrsEnd");
            var endDate = x[j].getAttribute("EndDate");
            var startDate = x[j].getAttribute("StartDate");
            var IdentificationCards = x[j].getAttribute("IdentificationCards");
            var TimeZone = x[j].getAttribute("TimeZone");
            var assessmentDuration = x[j].getElementsByTagName("AssessmentDuration")[0].firstChild.nodeValue;
            var durationH = assessmentDuration.split(" ")[0]; // hours in duration
            var durationM = assessmentDuration.split(" ")[2];	// minutes in duration

            newDiv = newDiv + "<div ng-app=\"\" class=\"modal-header clearfix\">";
            newDiv = newDiv + "<div class=\"hallTicketPopUpHeader left\">";
            newDiv = newDiv + "<div>" + assessmentName + "</div> <input type = \"hidden\" id=\'OASBAssessId\' value = \'" + assessId + "\'>";
            newDiv = newDiv + "<div><input type = \"hidden\" id=\'identificationcards\' value = \'" + IdentificationCards + "\'>" +
                "<input type = \"hidden\" id=\'timezone\' value = \'" + TimeZone + "\'></div>";
            newDiv = newDiv + "</div>";
         //   newDiv = newDiv + "<button type=\"button\" class=\"close\" data-dismiss=\"modal\" data-tooltip=\"tooltip\" title=\"\" data-original-title=\"Close\">" +
            newDiv = newDiv + "<button type=\"button\" class=\"close\" onclick=\"fnGetOnlineAssessmentDataRefresh()\" data-dismiss=\"modal\" data-tooltip=\"tooltip\" title=\"\" data-original-title=\"Close\">" +
                "<svg height=\"25\" width=\"25\">" +
                "<line x1=\"15\" y1=\"0\" x2=\"0\" y2=\"15\" style=\"stroke:rgb(255,255,255);stroke-width:2\"></line>" +
                "<line x1=\"0\" y1=\"0\" x2=\"15\" y2=\"15\" style=\"stroke:rgb(255,255,255);stroke-width:2\"></line>" +
                "</svg></button>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<section class=\"halTktSecCont halTktSecContRes slotBookMod\" style=\"min-height: 100%;\">";
            newDiv = newDiv + "<div class=\"halTktSecTabCont\">";
            newDiv = newDiv + "<div data-ht-tab=\"1\" class=\"halTktTab halTktTabAct halTktTabShow\">";
            newDiv = newDiv + "<div class=\"halTktSecTabTxt halTktSecTabTxtAct\" data-staticKey=\"Select Location\">Select Location</div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndx\">";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxBdr halTktSecTabIndxBdrAct\"></div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxTxt halTktSecTabIndxTxtAct\">1</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div data-ht-tab=\"2\" class=\"halTktTab\">";
            newDiv = newDiv + "<div class=\"halTktSecTabTxt\" data-staticKey=\"Book Test Center\">Book Test Center</div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndx\">";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxBdr\"></div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxTxt\">2</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div data-ht-tab=\"3\" class=\"halTktTab\">";
            newDiv = newDiv + "<div class=\"halTktSecTabTxt\" data-staticKey=\"Select Date/Time\">Select Date/Time</div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndx\">";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxBdr\"></div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxTxt\">3</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div data-ht-tab=\"4\" class=\"halTktTab\">";
            newDiv = newDiv + "<div class=\"halTktSecTabTxt\" data-staticKey=\"Confirm your selection\">Confirm your selection</div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndx\">";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxBdr\"></div>";
            newDiv = newDiv + "<div class=\"halTktSecTabIndxTxt\">4</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>"; //end ofhalTktSecTabCont";

            newDiv = newDiv + "<div class=\"halTktCont selLocationTabCont halTktContShow\">";
            newDiv = newDiv + "<div class=\"col-md-8\">";
            newDiv = newDiv + "<div class=\"selCourseContHead\" data-staticKey=\"Select Your Location\">Select Your Location</div>";

            newDiv = newDiv + "<div id =\"selcountry\" style=\"display:block;\"><select id =\"OACountryDD\"  class=\" zindx form-control selCourseContbtn\"  title=\"Select Country\" onchange=\"fnGetStateCity('State')\">";
            for (var i = 0; i < CountryJSON.length; i++)
                newDiv = newDiv + "<option value=" + CountryJSON[i].countryId + ">" + CountryJSON[i].countryName + "</option>";
            newDiv = newDiv + "</select><span class=\"str\">*</span></div>";

            newDiv = newDiv + "<div id =\"selstate\" style=\"display:none\"><select id =\"OAStateDD\"  class=\" form-control selCourseContbtn\"  title=\"Select State\" onchange=\"fnGetStateCity('City')\">" +
                "<option value=\"\">--Select State--</option>";
            newDiv = newDiv + "<option data-staticKey=\"Select State\">Select State</option>";
            newDiv = newDiv + "</select><span class=\"str\">*</span></div>";
            
           

            newDiv = newDiv + "<div id =\"selcity\" style=\"display:none\"><select id =\"OACityDD\" class=\" form-control selCourseContbtn\"  title=\"Select City\" >" +
                "<option value=\"\">--Select City--</option>";
            newDiv = newDiv + "<option data-staticKey=\"Select City\">Select City</option>";
            newDiv = newDiv + "</select><span class=\"str\">*</span></div>";
            
         

            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div id=\"OASBContinue\" style=\"display:none\" class=\"col-md-12\">";
            newDiv = newDiv + "<a data-ht-tab=\"2\" onclick=\"\" class=\"btn btn-lg btn-success selectcoursesubmit\">Continue</a>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";

            newDiv = newDiv + "<div id=\"halTktCont4\" class=\"halTktCont selBookTimeTabCont\">";
            newDiv = newDiv + "<div class=\"col-md-12 marginBottom20\">";
            newDiv = newDiv + "<div class=\"selCourseContHead\">";
            newDiv = newDiv + "<div data-staticKey=\"Book Test Center\">Book Test Center</div>";
            newDiv = newDiv + "<div class=\"selCourseContSubHead\" data-staticKey=\"Here are the avalable Test Centers\"> Here are the avalable Test Centers </div>";
            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            //________Test Center Code___________
            newDiv = newDiv + "<div id = \"tcContMain\" class=\"col-md-12 halTktCalenderCont\">";
            /*newDiv = newDiv+"<div class=\"halTktCalender\">";
                newDiv = newDiv+"<div class=\"clear\"></div>";
            newDiv = newDiv+"</div>";*/

            /*newDiv = newDiv+"<div id = \"tcContMain\" class=\"halTktContMain1 halTktContMain\" style=\"display:none;\">";

            newDiv = newDiv+"</div>";//end of halTktContMain1
*/
            newDiv = newDiv + "</div>";//end of halTktCalenderCont
            //________Test Center Code ends___________
            newDiv = newDiv + "<div class=\"col-md-12\">";
            //newDiv = newDiv+"<div class=\"\"><a data-ht-tab=\"1\" class=\"btn btn-lg btn-default selCourseBack\">Back</a></div>";
            newDiv = newDiv + "<a data-ht-tab=\"1\" class=\"btn btn-lg btn-default selCourseBack\" data-staticKey=\"Back\">Back</a>";

            newDiv = newDiv + "<!--<a data-ht-tab=\"5\" class=\"btn btn-lg btn-success selectcoursesubmit\">Continue</a>-->";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"halTktContSubAddMobBg\"></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";//end of halTktCont4
            //_______Test Center Step 2 ______________
            //_______Select Date anf Time Step3 for OA______________
            newDiv = newDiv + "<div class=\"halTktCont selBookTimeTabCont\">";
            newDiv = newDiv + "<div class=\"col-md-12 marginBottom20\">";
            newDiv = newDiv + "<div class=\"selCourseContHead\">";
            newDiv = newDiv + "<div data-staticKey=\"Book a Date\">Book a Date</div>";
            newDiv = newDiv + "<div class=\"selCourseContSubHead\" id=\"selCoContSubHdBuk\" data-staticKey=\Select a date and slot to book your test\">Select a date and slot to book your test</div>";
            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"selCourseContHead02 mar-top-20\">";
            newDiv = newDiv + "<div> </div>";
            newDiv = newDiv + "<div class=\"selCourseContSubHead02\"><span data-staticKey=\"Start\">Start</span>: <span class=\"startDate\">" + startDate + "</span>";
            if (endDate != "") {
                newDiv = newDiv + "- <span data-staticKey=\"End\">End</span>: <span class=\"endDate\">" + endDate + "</span>";
            }
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div id = \"txhalTktCalenderCont\"  class=\"col-md-12 halTktCalenderCont\">";
            newDiv = newDiv + "<div class=\"dateContent clearfix\">";
            newDiv = newDiv + "<div class=\"dateContentLeft col-xs-12 col-sm-6 col-md-9 pad-0 clearfix\">";
            newDiv = newDiv + "<div class=\"dateContentHead\">";
            newDiv = newDiv + "<div class=\"dateContentHead01\" data-staticKey=\"Select a Date\">Select a Date</div>";
            newDiv = newDiv + "<div class=\"dateContentHead02\"> <span data-staticKey=\"Time Zone\">TIME ZONE</span> : " + TimeZone + " </div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"dateContentDiv clearfix\">";
            newDiv = newDiv + "<div class='calendar'><input type=\"text\" /></div>";
            newDiv = newDiv + "<div class='calendar'></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"dateContentRight col-xs-12 col-sm-6 col-md-3 pad-0 clearfix\">";
            newDiv = newDiv + "<div class=\"dateContentRightTxt01\">Your Selection <span id=\"selectedDate\" class=\"yourSelection\">00/00/0000</span></div>";
            newDiv = newDiv + "<div class=\"dateContentRightTxt02\" data-staticKey=\"Specify Time\">Specify Time</div>";
            newDiv = newDiv + "<div class=\"timeTabsCont clearfix\">";
            newDiv = newDiv + "<div class=\"timeTabs timeTabs01 act\" data-tabs=\"timeTabsContent01\">";
            newDiv = newDiv + "<div class=\"timeTabsDiv\">";
            newDiv = newDiv + "<div data-staticKey=\"Start Time\">Start Time</div>";
            newDiv = newDiv + "<div><span id=\"sTHrs\" class=\"startTimeHrs timeHrs\">00</span>:<span id=\"sTMin\" class=\"startTimeMin timeMin\">00</span>:<span id=\"sTSec\" class=\"startTimeSec timeSec\">00</span> <span class=\"startTimePer timePer\"></span></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"timeTabs timeTabs02\" data-tabs=\"timeTabsContent02\">";
            newDiv = newDiv + "<div class=\"timeTabsDiv\">";
            newDiv = newDiv + "<div data-staticKey=\"End Time\">End Time</div>";
            newDiv = newDiv + "<div><span id=\"eTHrs\" class=\"endTimeHrs timeHrs\">" + getDoubleDigit(durationH) + "</span>:<span id=\"eTMin\" class=\"endTimeMin timeMin\">" + getDoubleDigit(durationM) + "</span>:<span id=\"eTSec\" class=\"endTimeSec timeSec\">00</span> <span class=\"endTimePer timePer\"></span></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"timeTabsContent clearfix\">";
            newDiv = newDiv + "<div class=\"timeTabsContent01 dateContentRightTimePick act\" data-tabs=\"timeTabs01\">";
            newDiv = newDiv + "<div class=\"timeLabels\"><span data-staticKey=\"Hours\">Hours</span><span data-staticKey=\"Minutes\">Minutes</span></div>";
            newDiv = newDiv + "<input type=\"text\" />";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"timeTabsContent02 dateContentRightTimePick\" data-tabs=\"timeTabs02\">";
            newDiv = newDiv + "<div class=\"timeLabels\"><span data-staticKey=\"Hours\">Hours</span><span data-staticKey=\"Minutes\">Minutes</span></div>";
            newDiv = newDiv + "<input type=\"text\" />";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "<div id = \"txbookDateSubmitCont\" class=\"col-md-12 bookDateSubmitCont marginTop10\">";
            newDiv = newDiv + "<a data-ht-tab=\"4\" onclick=\"fnShowOASBConfirm(\'" + subscriptionId + "\');\" class=\"btn btn-lg btn-success selectCourseDateTimeSubmit right\" id=\"selectCrDtTSubmitBuk\" data-staticKey=\"Book Selected\">Book Selected</a>";
            newDiv = newDiv + "<a data-ht-tab=\"2\" class=\"btn btn-lg btn-default selCourseBack right\" data-staticKey=\"Cancel\">Cancel</a>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"halTktContSubAddMobBg\"></div>";


            newDiv = newDiv + "</div>";// end of selBookTimeTabCont


            //______Confirmation STEP 4 ____________
            newDiv = newDiv + "<div id = \"OASBconfirm\" class=\"halTktCont selCnfrmTabCont\">";


            newDiv = newDiv + "</div>";// end of selCnfrmTabCont,OASBconfirm

            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "</section>";
        }

    }

    $('#hallTicketPopUp').append(newDiv);
    
    if ($('#isFormMultilingualRequired').val() != null && $('#isFormMultilingualRequired').val() == "Y")
        multilingualFormStaticValue("Subscription");
   // $("#OACountryDD").children('[value='+$('#OACountryDD').val()+']').attr('selected', true);
    fnGetStateCity('State');
    $('#OACountryDD').selectpicker();
    //$('body').css('overflow','hidden');
    $('#hallTicketPopUp').modal('show');
}

function fnGetStateCity(DD) {
    var checksum = $('#checksum').val();
    var orgID = document.getElementById('orgId').value;
    var formId = $('#formId').val();
    var entityId = $('#entityId').val();
    var sessChk = $('#sessChk').val();


    if (DD == 'State') {
        var assessId = $('#OASBAssessId').val();
        var countryId = $('#OACountryDD').val();
        $('#OAStateDD').html('');
        $('#OACityDD').html('');

        $.ajax({
            type: "POST",
            url: "/EForms/LaunchMock",
            data: {
                orgID: orgID,
                checksum: checksum,
                formId: formId,
                entityId: entityId,
	        	/*app_seq_no:app_seq_no,

	        	applnSequenceField:applnSequenceField,
	        	pageNo:pageNo,*/
                actionTaken: 'getStateList',
                assessmentId: assessId,
                countryId: countryId,
                sessChk: sessChk
            },
            dataType: "json",
            success: function (result) {
                if (result == undefined || result == null || result == "null") {
                    var msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"No State list \">No state list.</div></div>"
                    jQuery('selstate').html(msgDiv);
                }
                if (result == "SessionTimeout") {
                    location.href("/EForms/loginAction.do?subAction=ViewLoginPage&formId=" + formId + "&orgId=" + 726);
                }
                else {
                    console.log(result);
                    $('#OAStateDD')
                        .append($("<option></option>")
                            .attr("value", "")
                            .text("--Select State--"));

                    for (var i = 0; i < result.length; i++) {
                        var arr = [];
                        $.each(result[i], function (key, value) {
                            if (key == 'stateId') {
                                arr[0] = value;
                            }
                            else if (key == 'stateName') {
                                arr[1] = value;
                            }
                            if (arr.length == 2 && arr[0] != undefined && arr[1]!= undefined) {
                                $('#OAStateDD')
                                    .append($("<option></option>")
                                        .attr("value", arr[0])
                                        .text(arr[1]));
                            }
                        });
                    }

                    
                    if(isEditAllowed)
                    {
                    	 $("#OAStateDD").children('[value='+selectedState+']').attr('selected', true);
                    	 fnGetStateCity('City');
                    }

					/*for(var i = 0;i<result.length;i++)
					{
						stateDiv = stateDiv+"<option value=\""+result[i].stateId+"\">"+result[i].stateName+"</option>";
					}*/

                }
            },
            complete: function () {
                $('#OAStateDD').selectpicker('refresh');
                $('#selstate').css('display', 'block');
              //  $('#txhalTktCalenderCont').css('display', 'none');		
				//$('#txbookDateSubmitCont').css('display', 'none');
            }

        }); // end of ajax
        // $('#OAStateDD').append(stateDiv);

    } // end of stateCall;

    else if (DD == 'City') {
        var assessId = $('#OASBAssessId').val();
        var countryId = $('#OACountryDD').val();
        var stateId = $('#OAStateDD').val();
        $('#OACityDD').html('');
        $.ajax({
            type: "POST",
            url: "/EForms/LaunchMock",
            data: {
                orgID: orgID,
                checksum: checksum,
                formId: formId,
                entityId: entityId,
	        	/*
	        	app_seq_no:app_seq_no,

	        	applnSequenceField:applnSequenceField,
	        	pageNo:pageNo,*/
                actionTaken: 'getCityList',
                assessmentId: assessId,
                countryId: countryId,
                stateId: stateId,
                sessChk: sessChk
            },
            dataType: "json",
            success: function (result) {
                if (result == undefined || result == null || result == "null") {
                    var msgDiv = ""
                    jQuery('#selstate').html(msgDiv);
                }
                if (result == "SessionTimeout") {
                    location.href("/EForms/loginAction.do?subAction=ViewLoginPage&formId=" + formId + "&orgId=" + 726);
                }
                else {
                    console.log(result);
                    $('#OACityDD')
                        .append($("<option></option>")
                            .attr("value", "")
                            .text("--Select City--"));
                    for (var i = 0; i < result.length; i++) {
                        var arr = [];
                        $.each(result[i], function (key, value) {
                            if (key == 'cityId') {
                                arr[0] = value;
                            }
                            else if (key == 'cityName') {
                                arr[1] = value;
                            }
                            if (arr.length == 2 && arr[0] != undefined && arr[1]!= undefined) {
                                $('#OACityDD')
                                    .append($("<option></option>")
                                        .attr("value", arr[0])
                                        .text(arr[1]));
                            }
                        });
                    }


                    if(isEditAllowed)
                    {
                    	 $("#OACityDD").children('[value='+selectedCity+']').attr('selected', true);
                   
                    }
                    /*for(var i = 0;i<result.length;i++)
                    {
                        cityDiv = cityDiv+"<option value="+result[i].cityId+">"+result[i].cityName+"</option>";
                    }*/
                }
            },
            complete: function () {
                $('#OACityDD').selectpicker('refresh');
                $('#selcity').css('display', 'block');
                $('#OASBContinue').css('display', 'block');
               // $('#txhalTktCalenderCont').css('display', 'none');		
				//$('#txbookDateSubmitCont').css('display', 'none');
            }

        }); // end of city ajax
        // $('#selcity').append(cityDiv);
        $('#selcity').selectpicker();

    }// end of else if
}


function fnGetOATestCenter() {
    $('#tcContMain').html('');
    var checksum = $('#checksum').val();
    var orgID = document.getElementById('orgId').value;
    var formId = $('#formId').val();
    var sessChk = $('#sessChk').val();
    var entityId = $('#entityId').val();
    var assessId = $('#OASBAssessId').val();
    var countryId = $('#OACountryDD').val();
    var stateId = $('#OAStateDD').val();
    var cityId = $('#OACityDD').val();
    var tcId =  selectedTCDetails;
    var tcDiv = '';
    var durationH,durationM,bookAllowTill;
    var x = xvalue;
    for (j = 0; j < x.length; j++) {
        var assessmentId = x[j].getAttribute("AssessmentId");
        if (assessmentId == assessId) {
            var assessmentDuration = x[j].getElementsByTagName("AssessmentDuration")[0].firstChild.nodeValue;
            var durationH = assessmentDuration.split(" ")[0]; // hours in duration
            var durationM = assessmentDuration.split(" ")[2];	// minutes in duration
            bookAllowTill=x[j].getAttribute("BookingAllowedTill");
            break;
        }

    }

   

    $.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
            orgID: orgID,
            checksum: checksum,
            formId: formId,
            tcId:tcId,
            entityId: entityId,
        	/*app_seq_no:app_seq_no,
        	applnSequenceField:applnSequenceField,
        	pageNo:pageNo,*/
            actionTaken: 'getOATestCenter',
            assessmentId: assessId,
            countryId: countryId,
            stateId: stateId,
            cityId: cityId,
            sessChk: sessChk
        },
        dataType: "json",
        success: function (result) {
            if (result == undefined || result == null || result == "null" || result.length=='0') {
                var msgDiv = "No Test Centers Available."
                jQuery('.selCourseContSubHead').html(msgDiv);
            }
            else  if (result == "SessionTimeout") {
                location.href("/EForms/loginAction.do?subAction=ViewLoginPage&formId=" + formId + "&orgId=" + 726);
            }
            
            else if (result.length>0) 
            
            {
                console.log(result);
                OATCDetails = result;
                tcDiv = "<div class=\"selTestCenHead\">Select Test Center</div>";
                
                
                for (var i = 0; i < result.length; i++) {
                	
                	if(isEditAllowed)
                   	{
                   		if(result[i].tcId.split("_")[0]==selTcId)
                   			displayTestCenters(result[i],i,durationH,durationM,bookAllowTill)	;
                    }
                    else
                	displayTestCenters(result[i],i,durationH,durationM,bookAllowTill);	 
                	/*
                
                    tcDiv = tcDiv + "<div class=\"halTktContSub\">";
                    					tcDiv=tcDiv+"<div class=\"halTktContSubTime\">";
                                            //tcDiv=tcDiv+"<div>09:30 AM</div>";
                                        tcDiv=tcDiv+"</div>";
                    tcDiv = tcDiv + "<div  class=\"selCourseContSubTxt selCourseContSubTxt01\">";
                    tcDiv = tcDiv + "<div ng-model=\"tcName" + i + "\">" + result[i].tcName + "</div>";
                    tcDiv = tcDiv + "<div>" + result[i].tcAddress + "</div>";
                    tcDiv = tcDiv + "<div> Pincode : " + result[i].tcPincode + "</div>";
                    tcDiv = tcDiv + "</div>";// end of selCourseContSubTxt01

	    			tcDiv=tcDiv+"<div class=\"selCourseContSubTxt selCourseContSubTxt02\">";
	    				tcDiv=tcDiv+"<a href=\"https://maps.google.com/\" target=\"_blank\">View Map</a>";
	    			tcDiv=tcDiv+" </div>";
                    if (result[i].isActive == "Yes") {
                        tcDiv = tcDiv + "<div class=\"halTktContSubBtn\">";
                        tcDiv = tcDiv + "  <a data-ht-tab=\"3\" onclick=\"fnSelectTC(\'" + result[i].tcId + "\'); \" class=\"btn btn-lg btn-success selCourseSel\" data-staticKey=\"Book\">Book</a>";
                        tcDiv = tcDiv + "  </div>";
                    }
                    else {
                        tcDiv = tcDiv + "<div class=\"halTktContSubBtn\">";
                        tcDiv = tcDiv + "  <a data-ht-tab=\"3\" class=\"btn btn-lg btn-danger selCourseSel disabled\" data-staticKey=\"Book\">Book</a>";
                        tcDiv = tcDiv + "  </div>";
                    }

                    tcDiv = tcDiv + "<div class=\"selCourseContSubTxt selCourseContSubTxt03\">";
                    if (result[i].isElevatorPresent == "Yes")
                        tcDiv = tcDiv + "<div class=\"selTest-ico3\" data-toggle=\"tooltip\" title=\"Lift Available\" data-original-title=\"Lift Available\"><img src=\"/EForms/images/selTest-ico3.png\"></img></div>";
                    if (result[i].fitForPH == "Yes")
                        tcDiv = tcDiv + "<div class=\"selTest-ico2\" data-toggle=\"tooltip\" title=\"Wheelchair Available\" data-original-title=\"Wheelchair Available\"><img src=\"/EForms/images/selTest-ico2.png\"></img></div>";
                    //tcDiv=tcDiv+"<div class=\"selTest-ico1\" data-toggle=\"tooltip\" title=\"Parking Available\" data-original-title=\"Parking Available\"><img src=\"/EForms/images/selTest-ico1.png\"></img></div>";
                    tcDiv = tcDiv + "</div>";// end of selCourseContSubTxt03

                    if(isEditAllowed)
                	{

                		if(!(result[i].tcId==selTcId))
                		$('.halTktContSubBtn').addClass("disabled");
                    	
                    }
                    
                    tcDiv = tcDiv + "<div class=\"clear\"></div>";
                    tcDiv = tcDiv + "</div>";
                    setDateSettings(result[i],x,assessId);
                */
                
                
                } // end of for
                $('#tcContMain').append(tcDiv);
            }
        }
    }); // end of ajax

    $('#tcContMain').css('display', 'block');
    
    function displayTestCenters(result,i,durationH,durationM,bookAllowTill)
    {
    	

        
        tcDiv = tcDiv + "<div class=\"halTktContSub\">";
        /*					tcDiv=tcDiv+"<div class=\"halTktContSubTime\">";
                                //tcDiv=tcDiv+"<div>09:30 AM</div>";
                            tcDiv=tcDiv+"</div>";*/
        tcDiv = tcDiv + "<div  class=\"selCourseContSubTxt selCourseContSubTxt01\">";
        tcDiv = tcDiv + "<div ng-model=\"tcName" + i + "\">" + result.tcName + "</div>";
        tcDiv = tcDiv + "<div>" + result.tcAddress + "</div>";
        tcDiv = tcDiv + "<div> Pincode : " + result.tcPincode + "</div>";
        tcDiv = tcDiv + "</div>";// end of selCourseContSubTxt01

		/*tcDiv=tcDiv+"<div class=\"selCourseContSubTxt selCourseContSubTxt02\">";
			tcDiv=tcDiv+"<a href=\"https://maps.google.com/\" target=\"_blank\">View Map</a>";
		tcDiv=tcDiv+" </div>";*/
        
      
        if (result.isActive == "Yes") {
            tcDiv = tcDiv + "<div class=\"halTktContSubBtn\">";
            tcDiv = tcDiv + "  <a data-ht-tab=\"3\" onclick=\"fnSelectTC(\'" + result.tcId + "\'); setDateSettings(\'" + durationH + "\',\'" + durationM + "\',\'" + bookAllowTill + "\'); \" class=\"btn btn-lg btn-success selCourseSel\" data-staticKey=\"Book\">Book</a>";
            tcDiv = tcDiv + "  </div>";
        }
        else {
            tcDiv = tcDiv + "<div class=\"halTktContSubBtn\">";
            tcDiv = tcDiv + "  <a data-ht-tab=\"3\" class=\"btn btn-lg btn-danger selCourseSel disabled\" data-staticKey=\"Book\">Book</a>";
            tcDiv = tcDiv + "  </div>";
        }

        tcDiv = tcDiv + "<div class=\"selCourseContSubTxt selCourseContSubTxt03\">";
        if (result.isElevatorPresent == "Yes")
            tcDiv = tcDiv + "<div class=\"selTest-ico3\" data-toggle=\"tooltip\" title=\"Lift Available\" data-original-title=\"Lift Available\"><img src=\"/EForms/images/selTest-ico3.png\"></img></div>";
        if (result.fitForPH == "Yes")
            tcDiv = tcDiv + "<div class=\"selTest-ico2\" data-toggle=\"tooltip\" title=\"Wheelchair Available\" data-original-title=\"Wheelchair Available\"><img src=\"/EForms/images/selTest-ico2.png\"></img></div>";
        //tcDiv=tcDiv+"<div class=\"selTest-ico1\" data-toggle=\"tooltip\" title=\"Parking Available\" data-original-title=\"Parking Available\"><img src=\"/EForms/images/selTest-ico1.png\"></img></div>";
        tcDiv = tcDiv + "</div>";// end of selCourseContSubTxt03

       /* if(isEditAllowed)
    	{

    		if(!(result[i].tcId==selTcId))
    		$('.halTktContSubBtn').addClass("disabled");
        	
        }*/
        
        tcDiv = tcDiv + "<div class=\"clear\"></div>";
        tcDiv = tcDiv + "</div>";
      //  setDateSettings(result,x,assessId);
    

    }
}//end of fnGetOATestCenter

    // To display Calender

// To display Calender


function setDateSettings(durationH,durationM,bookAllowTill)
{

for (var i = 0; i < OATCDetails.length; i++) {
if (OATCDetails[i].tcId == selectedTCDetails) {
var resultArr =	OATCDetails[i];
console.log(resultArr);
bookAllowTill=moment(bookAllowTill, 'DD-MM-YYYY HH:mm:ss').format("YYYY-MM-DD HH:mm:ss");
var startDt='';
var endDt='';
var datesForDisable=[];
var dat='';
var daysVal=['Is_Sunday_NonWorkingDay','Is_Monday_NonWorkingDay','Is_Tuesday_NonWorkingDay','Is_Wednesday_NonWorkingDay','Is_Thursday_NonWorkingDay','Is_Friday_NonWorkingDay','Is_Saturday_NonWorkingDay'];
var daysStime=['Sunday_Start_Time','Monday_Start_Time','Tuesday_Start_Time','Wednesday_Start_Time','Thursday_Start_Time','Friday_Start_Time','Saturday_Start_Time'];
var daysEtime=['Sunday_End_Time','Monday_End_Time','Tuesday_End_Time','Wednesday_End_Time','Thursday_End_Time','Friday_End_Time','Saturday_End_Time'];
var disabledWeeks=[];
var daySDesc='';
var dayEDesc='';
var nowDate = new Date();
var today = new Date(nowDate.getFullYear(), nowDate.getMonth(), nowDate.getDate(), 0, 0, 0, 0);	
bookAllowTill=new Date(bookAllowTill);
var tcStartDate=''
var tcEndDate='';

   if("TestCenterStartDate" in resultArr) {
	 tcStartDate=new Date(resultArr.TestCenterStartDate);
	startDt=getDateValue(tcStartDate);
   }

	
   if("TestCenterEndDate" in resultArr) {
	    var tcEndt;
	    tcEndDate=new Date(resultArr.TestCenterEndDate);
		tcEndt = new Date(tcEndDate.getFullYear(), tcEndDate.getMonth(), tcEndDate.getDate(), 0, 0, 0, 0);
		endDt=getDateValue(tcEndDate);
		
		 if(bookAllowTill!=undefined && bookAllowTill!="")
		   {
			 var bukAl = new Date(bookAllowTill.getFullYear(), bookAllowTill.getMonth(), bookAllowTill.getDate(), 0, 0, 0, 0);
		     if(tcEndt.getTime()<bukAl.getTime())
		     bookAllowTill = tcEndDate;
		   }
	  
		}
   
	 if(tcEndt.getTime()<today.getTime())
	 {
	  startDt=today;
	  //endDt=today;
	 }
	 else if(tcEndt.getTime()== today.getTime())
	 {
		 startDt=today;
		 endDt=today;
	 }
	 else if(tcEndt.getTime()> today.getTime())
	 {
		tcStrDt = new Date(tcStartDate.getFullYear(), tcStartDate.getMonth(), tcStartDate.getDate(), 0, 0, 0, 0);	 
		if(tcStrDt.getTime()<today.getTime())
		startDt=today; 
		 
	 }
	 
	 
  if("nonWorkingDays" in resultArr) {
  for(j = 0; j < resultArr.nonWorkingDays.length; j++) 
  {
   dat= new Date(resultArr.nonWorkingDays[j]);
   datesForDisable.push(getDateValue(dat));
  }}
  else 
  datesForDisable=[];

	
   for(j = 0; j < daysVal.length; j++) 
	{
	 if(daysVal[j] in resultArr)
	 {
	 var val=daysVal[j];
	 console.log(val);
	 if(resultArr[val]==1)
	 disabledWeeks.push(j);
	 }
	}
	
   //if(disabledWeeks.length<=0)
	//disabledWeeks=[0,6];
  
  
	
	function 	populateEndtime()
	{	
	              if (parseInt($('#sTHrs').html()) + parseInt(durationH) >= 24)
					$('#eTHrs').html(getDoubleDigit((parseInt($('#sTHrs').html()) + parseInt(durationH)) - 24));
				else
					$('#eTHrs').html(getDoubleDigit(parseInt($('#sTHrs').html()) + parseInt(durationH)));
					

					
				if (parseInt($('#sTMin').html()) + parseInt(durationM) >= 60) 
				{
					$('#eTMin').html(getDoubleDigit(parseInt($('#sTMin').html()) + parseInt(durationM) - 60));
					if ((parseInt($('#sTHrs').html()) + 1) >= 24)
						$('#eTHrs').html(getDoubleDigit((parseInt($('#sTHrs').html()) + 1) - 24));
					else
						$('#eTHrs').html(getDoubleDigit((parseInt($('#sTHrs').html()) + 1)));
			    }
				else
					$('#eTMin').html(getDoubleDigit((parseInt($('#sTMin').html()) + parseInt(durationM))));
	}
	

	function getDayDesc(dayV)
   {
               hour=0;
               minute=0;
			   hrVal=0;
			   minVal=0;
			   hr=0;
			   min=0;
			   valPres=false;
			   valBook=false;
			   var eBlockTime=''; 
			   var msgDiv = '';
			   var bukAlval='';
			   var currVal = new Date(dayV.getFullYear(),dayV.getMonth(),dayV.getDate());
	           daySDesc=daysStime[dayV.getDay()];
	           dayEDesc=daysEtime[dayV.getDay()];
	           msgDiv ="<div class=\"selCourseContSubHead\" data-staticKey=\Select a date and slot to book your test\">Select a date and slot to book your test</div>";
	           
	           if(bookAllowTill!=undefined && bookAllowTill!='')
			   {
			   bukAlval = new Date(bookAllowTill.getFullYear(),bookAllowTill.getMonth(),bookAllowTill.getDate());
			   }
	           
	           if(daySDesc in resultArr) 
				{
	            var arr=resultArr[daySDesc].split(":");
				hrVal=arr[0];
				minVal=arr[1];
		        if(parseInt(hrVal)>0 ||parseInt(minVal)>0)
				{
				var sBlockTime = getSBlockTime(parseInt(hrVal),parseInt(minVal));		
				hr = sBlockTime.split(":")[0];
				min =  sBlockTime.split(":")[1];
				}
		        
			    valPres=true;
				}
	           
	           if(dayEDesc in resultArr) 
				{
				var arr=resultArr[dayEDesc].split(":");	
				hVal=getDoubleDigit(parseInt(arr[0]));
				mVal=getDoubleDigit(parseInt(arr[1]));
				if(hVal>0 ||mVal>0)
				{
				eBlockTime =getTstSetime(hVal,mVal,durationH,durationM);
				hour = eBlockTime.split(":")[0];
				minute =  eBlockTime.split(":")[1]; 
	            }
			    valPres=true;
				}
	           
	           if(valPres)
	        	   {
	        	   
	         /*  if(currVal.getTime()<=bukAlval.getTime())
	        	   {
	        	   
	        	   if((currVal.getTime()==tcStdt.getTime())&&(currVal.getTime()==today.getTime()))
	        		 {
  
	     	         hrVal=nowDate.getHours();
	  			   minVal=nowDate.getMinutes();
	  			   var sBlockTime = getSBlockTime(parseInt(hrVal),parseInt(minVal));		
	  				hr = sBlockTime.split(":")[0];
	  				min =  sBlockTime.split(":")[1];  
	        		 }
	        	   
	        	   }*/
	           
	          if(currVal.getTime()>bukAlval.getTime())
	        	  {
	        	  valBook=true; 
	        	 msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; color: red; font-family:  OpenSans-semebold; font-size: 16px;\" data-staticKey=\"TimeSlotNoBooking \">Slot Booking Not Allowed </div></div>";
	        	  }
	          
	           jQuery('#selCoContSubHdBuk').html(msgDiv);    
	           } 
	          	
   }
	
	
   getDayDesc(today);
   $('[data-toggle="tooltip"]').tooltip();
   (function () {	/**required different datetimepicker**//**required different datetimepicker**/

		$.getScript('/EForms/js/onlineAppForm/datepicker.js', function () {
	   console.log("startDt"+startDt);
	   console.log("endDt"+endDt);
	   
	        //if(($(".calendar").data("datepicker")) != null)
		   // $('.calendar').datepicker('destroy');

			$('.datetimepicker.datetimepicker-dropdown-bottom-right.dropdown-menu').hide();
			
			$('.calendar').map(function (index) {
				$(this).datepicker({
					daysOfWeekDisabled: disabledWeeks,
					startDate: startDt,
					endDate: endDt,
					datesDisabled:datesForDisable,
					format: 'dd/mm/yyyy',
					defaultViewDate: {
						year: (new Date()).getFullYear(),
						month: (new Date()).getMonth() + index,
						date: 1
					}
				
				});
			
			
					var date = today;
					var positionOfTarget = 1;
						var newDate = new Date(date);
						newDate.setUTCDate(1);
						newDate.setMonth(
							date.getMonth() + index - positionOfTarget
						);

						$(this).datepicker('_setDate', newDate, 'view');
						//$('.yourSelection').html($(this).find('input').val());
				
					
					
			});
			
		
		
			
			var startTimeHours;
			var endThrs;
			var endTimeHours = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23];
		
			 function changeTimeSettings(valP)
			{
			startTimeHours=[];
			endThrs=[];
			
			for(var x=parseInt(hrVal);x<=parseInt(hour);x++)
		    startTimeHours.push(x);
			
			for (var y=0;y<endTimeHours.length;y++)
			{
			if(startTimeHours.indexOf(y)=='-1')
			endThrs.push(y);
			}
					
		if (valP==true)
		{
		
		$('.timeTabsContent01 input').datetimepicker({ useCurrent: false, format: 'hh:mm', debug: true, stepping: 1, disabledHours:endThrs });					   			  
		$('.timeTabsContent01 input').data("DateTimePicker").disabledTimeIntervals([
		    
           [moment().hour(0).minutes(0), moment().hour(hr).minutes(min)],
           [moment().hour(hour).minutes(minute), moment().hour(23).minute(59)] 

              ]);		   
		$('.timeTabsContent02 input').datetimepicker({ format: 'hh:mm', debug: true });
			
				
		}	
     else //in case settings of days not available switch back to previous one
				
		{		
		$('.timeTabsContent01 input').datetimepicker({ useCurrent: false, format: 'hh:mm', debug: true, enabledHours: endTimeHours });
		$('.timeTabsContent02 input').datetimepicker({ format: 'hh:mm', debug: true, enabledHours: endTimeHours });

       }				
				
			    $('.timeTabsContent input').trigger('focus');
				$('.dateContentRight').css('height', $('.dateContentLeft').innerHeight() + "px");
				$(".timeTabsContent01 input").parents('.dateContentRightTimePick').find('.timepicker-hour').html(getDoubleDigit(parseInt(hrVal)));
				$(".timeTabsContent01 input").parents('.dateContentRightTimePick').find('.timepicker-minute').html(getDoubleDigit(parseInt(minVal)));
				$('.startTimeHrs').html($('.timeTabsContent01 .timepicker-hour').html());
				$('.startTimeMin').html($('.timeTabsContent01 .timepicker-minute').html());
				populateEndtime();
				$('.endTimeHrs').html($('.timeTabsContent02 .timepicker-hour').html());
				$('.endTimeMin').html($('.timeTabsContent02 .timepicker-minute').html());	
				
		}

			// keep month in sync
			var orderMonth = function (e) {
				var target = e.target;
				var date = e.date;
				var calendars = $('.calendar');
				var positionOfTarget = calendars.index(target);
				calendars.each(function (index) {
					if (this === target) {
						return;
					}
					var newDate = new Date(date);
					newDate.setUTCDate(1);
					newDate.setMonth(
						date.getMonth() + index - positionOfTarget
					);

					$(this).datepicker('_setDate', newDate, 'view');
				});
			};
			$('.calendar').on('changeMonth', orderMonth);

			// keep dates in sync
			$('.calendar').on('changeDate', function (e) {
				$('.yourSelection').html($(this).find('input').val());
				var calendars = $('.calendar');
				var target = e.target;
				var newDate = $(target).datepicker('getUTCDate');
				var setDateCalled = false;
				var dayValue=newDate.getDay();
				calendars.each(function () {
					if (this === e.target) {
						return;
					}

					// check if dates are different to get out of loop
					// setUTCDates triggers changeDate event...
					var currentDate = $(this).datepicker('getUTCDate');
					if (
						currentDate &&
						newDate.toISOString() === currentDate.toISOString()
					) {
						return;
					}

					$(this).datepicker('setUTCDate', newDate);
					setDateCalled = true;
				});

				// setUTCDate changes viewDate; have to get this in order again
				if (setDateCalled) {
					orderMonth(e);
				}

				setTimeout(function () {
					if ($('.prev').css('visibility') == 'hidden') {
						$('.dateContentDiv .calendar:last table thead th.prev').css({ 'visibility': 'visible', 'z-index': '0', 'position': 'relative' }).removeClass('prev');
						$('.dateContentDiv .calendar:last table thead th.next').css({ 'visibility': 'visible', 'z-index': '0', 'position': 'relative' }).removeClass('next');
						$('.dateContentDiv .calendar:first table thead th.prev').css({ 'visibility': 'visible', 'z-index': '0', 'position': 'relative' }).removeClass('prev');
						
					}
				});
               
				
				   getDayDesc(newDate);
				      $('.timeTabsContent01 input').data("DateTimePicker").destroy();
			          $('.timeTabsContent02 input').data("DateTimePicker").destroy();
					
					 changeTimeSettings(valPres);
			});


			$('.dateContentDiv .calendar table thead tr:nth-of-type(2) th:first-child').html('<i class="fa fa-chevron-left" aria-hidden="true"></i>');
			$('.dateContentDiv .calendar table thead tr:nth-of-type(2) th:last-child').html('<i class="fa fa-chevron-right" aria-hidden="true"></i>');
			if ($(window).innerWidth() >= 992) {
				$('.dateContentDiv .calendar:first-child table thead tr:nth-of-type(2) th:last-child,.dateContentDiv .calendar:last-child table thead tr:nth-of-type(2) th:first-child').on('click', function (ev) {
					ev.stopPropagation();;
				});
			}

			//var startTimeHours = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24];
			//var endTimeHours = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24];

			//$(document).on("click", ".selCourseSel", function () {
				/*$('.timeTabsContent01 input').datetimepicker({ useCurrent: false, format: 'hh:mm', debug: true, enabledHours: startTimeHours });
				$('.timeTabsContent02 input').datetimepicker({ format: 'hh:mm', debug: true, enabledHours: endTimeHours });
				$('.timeTabsContent input').trigger('focus');
				$('.dateContentRight').css('height', $('.dateContentLeft').innerHeight() + "px");
				$('.startTimeHrs').html($('.timeTabsContent01 .timepicker-hour').html());
				$('.startTimeMin').html($('.timeTabsContent01 .timepicker-minute').html());
				$('.endTimeHrs').html($('.timeTabsContent02 .timepicker-hour').html());
				$('.endTimeMin').html($('.timeTabsContent02 .timepicker-minute').html());*/
				
				changeTimeSettings(valPres);

			//});
			
	
			function hideDisabled() {
				setTimeout(function () {
					var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
					var defaultMonth = months[nowDate.getMonth()];
					var val = $('.calendar th.datepicker-switch').html();
					if (val.substring(0, val.length - 5) == defaultMonth) {
						$('.calendar th.prev').removeClass('prev').css({ 'visibility': 'visible', 'position': 'relative', 'z-index': '0' });
					} else {
						$('.calendar thead tr:nth-child(2) th:first-child').addClass('prev').css({ 'visibility': 'visible', 'position': 'relative', 'z-index': '0' });
						$('.calendar thead tr:nth-child(2) th:last-child').addClass('next').css({ 'visibility': 'visible', 'position': 'relative', 'z-index': '0' });
					}
				});
			}
			hideDisabled();
			$('.calendar').on('changeMonth', function (e) {
				hideDisabled();
			});


			$(".timeTabsContent01 input").on("dp.change", function (e) {

				var endTimeHours = [0, 21, 22, 23];
				var a = $(this).parents('.dateContentRightTimePick').find('.timepicker-hour').html();
				var b = $(this).parents('.dateContentRightTimePick').find('.timepicker-minute').html();

				var baseStart = moment().set({ 'hour': a, 'minutes': b }).format("HH:mm");
				$(".timeTabsContent02 input").val(baseStart).change();
				var hrsCount = parseInt($('.startTimeHrs').text());
				var contt = hrsCount - 9;
				endTimeHours.splice(0, contt);

				$('.timeTabsContent02 input').datetimepicker({ format: 'HH:mm', debug: true });

				var tabs = $(this).parents('.dateContentRightTimePick').attr('data-tabs');

				$('.' + tabs + '').find('.timeHrs').html($(this).parents('.dateContentRightTimePick').find('.timepicker-hour').html());
				$('.' + tabs + '').find('.timeMin').html($(this).parents('.dateContentRightTimePick').find('.timepicker-minute').html());

				
				// auto-populating end-time
				
//				if (parseInt($('#sTHrs').html()) + parseInt(durationH) >= 24)
//					$('#eTHrs').html(getDoubleDigit((parseInt($('#sTHrs').html()) + parseInt(durationH)) - 24));
//				else
//					$('#eTHrs').html(getDoubleDigit(parseInt($('#sTHrs').html()) + parseInt(durationH)));
//
//				if (parseInt($('#sTMin').html()) + parseInt(durationM) >= 60) {
//					$('#eTMin').html(getDoubleDigit(parseInt($('#sTMin').html()) + parseInt(durationM) - 60));
//					if ((parseInt($('#sTHrs').html()) + 1) >= 24)
//						$('#eTHrs').html(getDoubleDigit((parseInt($('#sTHrs').html()) + 1) - 24));
//					else
//						$('#eTHrs').html(getDoubleDigit((parseInt($('#sTHrs').html()) + 1)));
//				}
//				else
//					$('#eTMin').html(getDoubleDigit((parseInt($('#sTMin').html()) + parseInt(durationM))));
				
				populateEndtime();

			});


			$(".weekChng").on("click", function () {
				var count = $(this).parents('.halTktCalender').find('.weekCount').html();
				if ($(this).hasClass('weekDec')) {
					if (count > 1) {
						$('.weekCount').html(Number(count) - 1);
					}
				}
				else if ($(this).hasClass('weekInc')) {
					if (count < 4) {
						$('.weekCount').html(Number(count) + 1);
					}
				}
			});
			$('.hallTicketPopUpHeader button.close').on('click', function () {
				$.fn.datepicker.noConflict();
				!function (c) { function f() { return new Date(Date.UTC.apply(Date, arguments)) } function a() { var g = new Date(); return f(g.getUTCFullYear(), g.getUTCMonth(), g.getUTCDate(), g.getUTCHours(), g.getUTCMinutes(), g.getUTCSeconds(), 0) } var e = function (i, h) { var k = this; this.element = c(i); this.container = h.container || "body"; this.language = h.language || this.element.data("date-language") || "en"; this.language = this.language in d ? this.language : "en"; this.isRTL = d[this.language].rtl || false; this.formatType = h.formatType || this.element.data("format-type") || "standard"; this.format = b.parseFormat(h.format || this.element.data("date-format") || d[this.language].format || b.getDefaultFormat(this.formatType, "input"), this.formatType); this.isInline = false; this.isVisible = false; this.isInput = this.element.is("input"); this.fontAwesome = h.fontAwesome || this.element.data("font-awesome") || false; this.bootcssVer = h.bootcssVer || (this.isInput ? (this.element.is(".form-control") ? 3 : 2) : (this.bootcssVer = this.element.is(".input-group") ? 3 : 2)); this.component = this.element.is(".date") ? (this.bootcssVer == 3 ? this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar .fa-calendar .fa-clock-o").parent() : this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent()) : false; this.componentReset = this.element.is(".date") ? (this.bootcssVer == 3 ? this.element.find(".input-group-addon .glyphicon-remove .fa-times").parent() : this.element.find(".add-on .icon-remove .fa-times").parent()) : false; this.hasInput = this.component && this.element.find("input").length; if (this.component && this.component.length === 0) { this.component = false } this.linkField = h.linkField || this.element.data("link-field") || false; this.linkFormat = b.parseFormat(h.linkFormat || this.element.data("link-format") || b.getDefaultFormat(this.formatType, "link"), this.formatType); this.minuteStep = h.minuteStep || this.element.data("minute-step") || 5; this.pickerPosition = h.pickerPosition || this.element.data("picker-position") || "bottom-right"; this.showMeridian = h.showMeridian || this.element.data("show-meridian") || false; this.initialDate = h.initialDate || new Date(); this.icons = { leftArrow: this.fontAwesome ? "fa-arrow-left" : (this.bootcssVer === 3 ? "glyphicon-arrow-left" : "icon-arrow-left"), rightArrow: this.fontAwesome ? "fa-arrow-right" : (this.bootcssVer === 3 ? "glyphicon-arrow-right" : "icon-arrow-right") }; this.icontype = this.fontAwesome ? "fa" : "glyphicon"; this._attachEvents(); this.formatViewType = "datetime"; if ("formatViewType" in h) { this.formatViewType = h.formatViewType } else { if ("formatViewType" in this.element.data()) { this.formatViewType = this.element.data("formatViewType") } } this.minView = 0; if ("minView" in h) { this.minView = h.minView } else { if ("minView" in this.element.data()) { this.minView = this.element.data("min-view") } } this.minView = b.convertViewMode(this.minView); this.maxView = b.modes.length - 1; if ("maxView" in h) { this.maxView = h.maxView } else { if ("maxView" in this.element.data()) { this.maxView = this.element.data("max-view") } } this.maxView = b.convertViewMode(this.maxView); this.wheelViewModeNavigation = false; if ("wheelViewModeNavigation" in h) { this.wheelViewModeNavigation = h.wheelViewModeNavigation } else { if ("wheelViewModeNavigation" in this.element.data()) { this.wheelViewModeNavigation = this.element.data("view-mode-wheel-navigation") } } this.wheelViewModeNavigationInverseDirection = false; if ("wheelViewModeNavigationInverseDirection" in h) { this.wheelViewModeNavigationInverseDirection = h.wheelViewModeNavigationInverseDirection } else { if ("wheelViewModeNavigationInverseDirection" in this.element.data()) { this.wheelViewModeNavigationInverseDirection = this.element.data("view-mode-wheel-navigation-inverse-dir") } } this.wheelViewModeNavigationDelay = 100; if ("wheelViewModeNavigationDelay" in h) { this.wheelViewModeNavigationDelay = h.wheelViewModeNavigationDelay } else { if ("wheelViewModeNavigationDelay" in this.element.data()) { this.wheelViewModeNavigationDelay = this.element.data("view-mode-wheel-navigation-delay") } } this.startViewMode = 2; if ("startView" in h) { this.startViewMode = h.startView } else { if ("startView" in this.element.data()) { this.startViewMode = this.element.data("start-view") } } this.startViewMode = b.convertViewMode(this.startViewMode); this.viewMode = this.startViewMode; this.viewSelect = this.minView; if ("viewSelect" in h) { this.viewSelect = h.viewSelect } else { if ("viewSelect" in this.element.data()) { this.viewSelect = this.element.data("view-select") } } this.viewSelect = b.convertViewMode(this.viewSelect); this.forceParse = true; if ("forceParse" in h) { this.forceParse = h.forceParse } else { if ("dateForceParse" in this.element.data()) { this.forceParse = this.element.data("date-force-parse") } } var j = this.bootcssVer === 3 ? b.templateV3 : b.template; while (j.indexOf("{iconType}") !== -1) { j = j.replace("{iconType}", this.icontype) } while (j.indexOf("{leftArrow}") !== -1) { j = j.replace("{leftArrow}", this.icons.leftArrow) } while (j.indexOf("{rightArrow}") !== -1) { j = j.replace("{rightArrow}", this.icons.rightArrow) } this.picker = c(j).appendTo(this.isInline ? this.element : this.container).on({ click: c.proxy(this.click, this), mousedown: c.proxy(this.mousedown, this) }); if (this.wheelViewModeNavigation) { if (c.fn.mousewheel) { this.picker.on({ mousewheel: c.proxy(this.mousewheel, this) }) } else { console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option") } } if (this.isInline) { this.picker.addClass("datetimepicker-inline") } else { this.picker.addClass("datetimepicker-dropdown-" + this.pickerPosition + " dropdown-menu") } if (this.isRTL) { this.picker.addClass("datetimepicker-rtl"); var g = this.bootcssVer === 3 ? ".prev span, .next span" : ".prev i, .next i"; this.picker.find(g).toggleClass(this.icons.leftArrow + " " + this.icons.rightArrow) } c(document).on("mousedown", function (l) { if (c(l.target).closest(".datetimepicker").length === 0) { k.hide() } }); this.autoclose = false; if ("autoclose" in h) { this.autoclose = h.autoclose } else { if ("dateAutoclose" in this.element.data()) { this.autoclose = this.element.data("date-autoclose") } } this.keyboardNavigation = true; if ("keyboardNavigation" in h) { this.keyboardNavigation = h.keyboardNavigation } else { if ("dateKeyboardNavigation" in this.element.data()) { this.keyboardNavigation = this.element.data("date-keyboard-navigation") } } this.todayBtn = (h.todayBtn || this.element.data("date-today-btn") || false); this.todayHighlight = (h.todayHighlight || this.element.data("date-today-highlight") || false); this.weekStart = ((h.weekStart || this.element.data("date-weekstart") || d[this.language].weekStart || 0) % 7); this.weekEnd = ((this.weekStart + 6) % 7); this.startDate = -Infinity; this.endDate = Infinity; this.daysOfWeekDisabled = []; this.setStartDate(h.startDate || this.element.data("date-startdate")); this.setEndDate(h.endDate || this.element.data("date-enddate")); this.setDaysOfWeekDisabled(h.daysOfWeekDisabled || this.element.data("date-days-of-week-disabled")); this.setMinutesDisabled(h.minutesDisabled || this.element.data("date-minute-disabled")); this.setHoursDisabled(h.hoursDisabled || this.element.data("date-hour-disabled")); this.fillDow(); this.fillMonths(); this.update(); this.showMode(); if (this.isInline) { this.show() } }; e.prototype = { constructor: e, _events: [], _attachEvents: function () { this._detachEvents(); if (this.isInput) { this._events = [[this.element, { focus: c.proxy(this.show, this), keyup: c.proxy(this.update, this), keydown: c.proxy(this.keydown, this) }]] } else { if (this.component && this.hasInput) { this._events = [[this.element.find("input"), { focus: c.proxy(this.show, this), keyup: c.proxy(this.update, this), keydown: c.proxy(this.keydown, this) }], [this.component, { click: c.proxy(this.show, this) }]]; if (this.componentReset) { this._events.push([this.componentReset, { click: c.proxy(this.reset, this) }]) } } else { if (this.element.is("div")) { this.isInline = true } else { this._events = [[this.element, { click: c.proxy(this.show, this) }]] } } } for (var g = 0, h, j; g < this._events.length; g++) { h = this._events[g][0]; j = this._events[g][1]; h.on(j) } }, _detachEvents: function () { for (var g = 0, h, j; g < this._events.length; g++) { h = this._events[g][0]; j = this._events[g][1]; h.off(j) } this._events = [] }, show: function (g) { this.picker.show(); this.height = this.component ? this.component.outerHeight() : this.element.outerHeight(); if (this.forceParse) { this.update() } this.place(); c(window).on("resize", c.proxy(this.place, this)); if (g) { g.stopPropagation(); g.preventDefault() } this.isVisible = true; this.element.trigger({ type: "show", date: this.date }) }, hide: function (g) { if (!this.isVisible) { return } if (this.isInline) { return } this.picker.hide(); c(window).off("resize", this.place); this.viewMode = this.startViewMode; this.showMode(); if (!this.isInput) { c(document).off("mousedown", this.hide) } if (this.forceParse && (this.isInput && this.element.val() || this.hasInput && this.element.find("input").val())) { this.setValue() } this.isVisible = false; this.element.trigger({ type: "hide", date: this.date }) }, remove: function () { this._detachEvents(); this.picker.remove(); delete this.picker; delete this.element.data().datetimepicker }, getDate: function () { var g = this.getUTCDate(); return new Date(g.getTime() + (g.getTimezoneOffset() * 60000)) }, getUTCDate: function () { return this.date }, setDate: function (g) { this.setUTCDate(new Date(g.getTime() - (g.getTimezoneOffset() * 60000))) }, setUTCDate: function (g) { if (g >= this.startDate && g <= this.endDate) { this.date = g; this.setValue(); this.viewDate = this.date; this.fill() } else { this.element.trigger({ type: "outOfRange", date: g, startDate: this.startDate, endDate: this.endDate }) } }, setFormat: function (h) { this.format = b.parseFormat(h, this.formatType); var g; if (this.isInput) { g = this.element } else { if (this.component) { g = this.element.find("input") } } if (g && g.val()) { this.setValue() } }, setValue: function () { var g = this.getFormattedDate(); if (!this.isInput) { if (this.component) { this.element.find("input").val(g) } this.element.data("date", g) } else { this.element.val(g) } if (this.linkField) { c("#" + this.linkField).val(this.getFormattedDate(this.linkFormat)) } }, getFormattedDate: function (g) { if (g == undefined) { g = this.format } return b.formatDate(this.date, g, this.language, this.formatType) }, setStartDate: function (g) { this.startDate = g || -Infinity; if (this.startDate !== -Infinity) { this.startDate = b.parseDate(this.startDate, this.format, this.language, this.formatType) } this.update(); this.updateNavArrows() }, setEndDate: function (g) { this.endDate = g || Infinity; if (this.endDate !== Infinity) { this.endDate = b.parseDate(this.endDate, this.format, this.language, this.formatType) } this.update(); this.updateNavArrows() }, setDaysOfWeekDisabled: function (g) { this.daysOfWeekDisabled = g || []; if (!c.isArray(this.daysOfWeekDisabled)) { this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\s*/) } this.daysOfWeekDisabled = c.map(this.daysOfWeekDisabled, function (h) { return parseInt(h, 10) }); this.update(); this.updateNavArrows() }, setMinutesDisabled: function (g) { this.minutesDisabled = g || []; if (!c.isArray(this.minutesDisabled)) { this.minutesDisabled = this.minutesDisabled.split(/,\s*/) } this.minutesDisabled = c.map(this.minutesDisabled, function (h) { return parseInt(h, 10) }); this.update(); this.updateNavArrows() }, setHoursDisabled: function (g) { this.hoursDisabled = g || []; if (!c.isArray(this.hoursDisabled)) { this.hoursDisabled = this.hoursDisabled.split(/,\s*/) } this.hoursDisabled = c.map(this.hoursDisabled, function (h) { return parseInt(h, 10) }); this.update(); this.updateNavArrows() }, place: function () { if (this.isInline) { return } var g = 0; c("div").each(function () { var m = parseInt(c(this).css("zIndex"), 10); if (m > g) { g = m } }); var l = g + 10; var k, j, i, h; if (this.container instanceof c) { h = this.container.offset() } else { h = c(this.container).offset() } if (this.component) { k = this.component.offset(); i = k.left; if (this.pickerPosition == "bottom-left" || this.pickerPosition == "top-left") { i += this.component.outerWidth() - this.picker.outerWidth() } } else { k = this.element.offset(); i = k.left } if (i + 220 > document.body.clientWidth) { i = document.body.clientWidth - 220 } if (this.pickerPosition == "top-left" || this.pickerPosition == "top-right") { j = k.top - this.picker.outerHeight() } else { j = k.top + this.height } j = j - h.top; i = i - h.left; this.picker.css({ top: j, left: i, zIndex: l }) }, update: function () { var g, h = false; if (arguments && arguments.length && (typeof arguments[0] === "string" || arguments[0] instanceof Date)) { g = arguments[0]; h = true } else { g = (this.isInput ? this.element.val() : this.element.find("input").val()) || this.element.data("date") || this.initialDate; if (typeof g == "string" || g instanceof String) { g = g.replace(/^\s+|\s+$/g, "") } } if (!g) { g = new Date(); h = false } this.date = b.parseDate(g, this.format, this.language, this.formatType); if (h) { this.setValue() } if (this.date < this.startDate) { this.viewDate = new Date(this.startDate) } else { if (this.date > this.endDate) { this.viewDate = new Date(this.endDate) } else { this.viewDate = new Date(this.date) } } this.fill() }, fillDow: function () { var g = this.weekStart, h = "<tr>"; while (g < this.weekStart + 7) { h += '<th class="dow">' + d[this.language].daysMin[(g++) % 7] + "</th>" } h += "</tr>"; this.picker.find(".datetimepicker-days thead").append(h) }, fillMonths: function () { var h = "", g = 0; while (g < 12) { h += '<span class="month">' + d[this.language].monthsShort[g++] + "</span>" } this.picker.find(".datetimepicker-months td").html(h) }, fill: function () { if (this.date == null || this.viewDate == null) { return } var G = new Date(this.viewDate), s = G.getUTCFullYear(), H = G.getUTCMonth(), l = G.getUTCDate(), B = G.getUTCHours(), w = G.getUTCMinutes(), x = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity, C = this.startDate !== -Infinity ? this.startDate.getUTCMonth() + 1 : -Infinity, n = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity, y = this.endDate !== Infinity ? this.endDate.getUTCMonth() + 1 : Infinity, p = (new f(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate())).valueOf(), F = new Date(); this.picker.find(".datetimepicker-days thead th:eq(1)").text(d[this.language].months[H] + " " + s); if (this.formatViewType == "time") { var D = B % 12 ? B % 12 : 12; var j = (D < 10 ? "0" : "") + D; var o = (w < 10 ? "0" : "") + w; var J = d[this.language].meridiem[B < 12 ? 0 : 1]; this.picker.find(".datetimepicker-hours thead th:eq(1)").text(j + ":" + o + " " + (J ? J.toUpperCase() : "")); this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(j + ":" + o + " " + (J ? J.toUpperCase() : "")) } else { this.picker.find(".datetimepicker-hours thead th:eq(1)").text(l + " " + d[this.language].months[H] + " " + s); this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(l + " " + d[this.language].months[H] + " " + s) } this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn !== false); this.updateNavArrows(); this.fillMonths(); var K = f(s, H - 1, 28, 0, 0, 0, 0), A = b.getDaysInMonth(K.getUTCFullYear(), K.getUTCMonth()); K.setUTCDate(A); K.setUTCDate(A - (K.getUTCDay() - this.weekStart + 7) % 7); var g = new Date(K); g.setUTCDate(g.getUTCDate() + 42); g = g.valueOf(); var q = []; var t; while (K.valueOf() < g) { if (K.getUTCDay() == this.weekStart) { q.push("<tr>") } t = ""; if (K.getUTCFullYear() < s || (K.getUTCFullYear() == s && K.getUTCMonth() < H)) { t += " old" } else { if (K.getUTCFullYear() > s || (K.getUTCFullYear() == s && K.getUTCMonth() > H)) { t += " new" } } if (this.todayHighlight && K.getUTCFullYear() == F.getFullYear() && K.getUTCMonth() == F.getMonth() && K.getUTCDate() == F.getDate()) { t += " today" } if (K.valueOf() == p) { t += " active" } if ((K.valueOf() + 86400000) <= this.startDate || K.valueOf() > this.endDate || c.inArray(K.getUTCDay(), this.daysOfWeekDisabled) !== -1) { t += " disabled" } q.push('<td class="day' + t + '">' + K.getUTCDate() + "</td>"); if (K.getUTCDay() == this.weekEnd) { q.push("</tr>") } K.setUTCDate(K.getUTCDate() + 1) } this.picker.find(".datetimepicker-days tbody").empty().append(q.join("")); q = []; var u = "", E = "", r = ""; var h = this.hoursDisabled || []; for (var z = 0; z < 24; z++) { if (h.indexOf(z) !== -1) { continue } var v = f(s, H, l, z); t = ""; if ((v.valueOf() + 3600000) <= this.startDate || v.valueOf() > this.endDate) { t += " disabled" } else { if (B == z) { t += " active" } } if (this.showMeridian && d[this.language].meridiem.length == 2) { E = (z < 12 ? d[this.language].meridiem[0] : d[this.language].meridiem[1]); if (E != r) { if (r != "") { q.push("</fieldset>") } q.push('<fieldset class="hour"><legend>' + E.toUpperCase() + "</legend>") } r = E; u = (z % 12 ? z % 12 : 12); q.push('<span class="hour' + t + " hour_" + (z < 12 ? "am" : "pm") + '">' + u + "</span>"); if (z == 23) { q.push("</fieldset>") } } else { u = z + ":00"; q.push('<span class="hour' + t + '">' + u + "</span>") } } this.picker.find(".datetimepicker-hours td").html(q.join("")); q = []; u = "", E = "", r = ""; var k = this.minutesDisabled || []; for (var z = 0; z < 60; z += this.minuteStep) { if (k.indexOf(z) !== -1) { continue } var v = f(s, H, l, B, z, 0); t = ""; if (v.valueOf() < this.startDate || v.valueOf() > this.endDate) { t += " disabled" } else { if (Math.floor(w / this.minuteStep) == Math.floor(z / this.minuteStep)) { t += " active" } } if (this.showMeridian && d[this.language].meridiem.length == 2) { E = (B < 12 ? d[this.language].meridiem[0] : d[this.language].meridiem[1]); if (E != r) { if (r != "") { q.push("</fieldset>") } q.push('<fieldset class="minute"><legend>' + E.toUpperCase() + "</legend>") } r = E; u = (B % 12 ? B % 12 : 12); q.push('<span class="minute' + t + '">' + u + ":" + (z < 10 ? "0" + z : z) + "</span>"); if (z == 59) { q.push("</fieldset>") } } else { u = z + ":00"; q.push('<span class="minute' + t + '">' + B + ":" + (z < 10 ? "0" + z : z) + "</span>") } } this.picker.find(".datetimepicker-minutes td").html(q.join("")); var L = this.date.getUTCFullYear(); var m = this.picker.find(".datetimepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active"); if (L == s) { m.eq(this.date.getUTCMonth() + 2).addClass("active") } if (s < x || s > n) { m.addClass("disabled") } if (s == x) { m.slice(0, C + 1).addClass("disabled") } if (s == n) { m.slice(y).addClass("disabled") } q = ""; s = parseInt(s / 10, 10) * 10; var I = this.picker.find(".datetimepicker-years").find("th:eq(1)").text(s + "-" + (s + 9)).end().find("td"); s -= 1; for (var z = -1; z < 11; z++) { q += '<span class="year' + (z == -1 || z == 10 ? " old" : "") + (L == s ? " active" : "") + (s < x || s > n ? " disabled" : "") + '">' + s + "</span>"; s += 1 } I.html(q); this.place() }, updateNavArrows: function () { var k = new Date(this.viewDate), i = k.getUTCFullYear(), j = k.getUTCMonth(), h = k.getUTCDate(), g = k.getUTCHours(); switch (this.viewMode) { case 0: if (this.startDate !== -Infinity && i <= this.startDate.getUTCFullYear() && j <= this.startDate.getUTCMonth() && h <= this.startDate.getUTCDate() && g <= this.startDate.getUTCHours()) { this.picker.find(".prev").css({ visibility: "hidden" }) } else { this.picker.find(".prev").css({ visibility: "visible" }) } if (this.endDate !== Infinity && i >= this.endDate.getUTCFullYear() && j >= this.endDate.getUTCMonth() && h >= this.endDate.getUTCDate() && g >= this.endDate.getUTCHours()) { this.picker.find(".next").css({ visibility: "hidden" }) } else { this.picker.find(".next").css({ visibility: "visible" }) } break; case 1: if (this.startDate !== -Infinity && i <= this.startDate.getUTCFullYear() && j <= this.startDate.getUTCMonth() && h <= this.startDate.getUTCDate()) { this.picker.find(".prev").css({ visibility: "hidden" }) } else { this.picker.find(".prev").css({ visibility: "visible" }) } if (this.endDate !== Infinity && i >= this.endDate.getUTCFullYear() && j >= this.endDate.getUTCMonth() && h >= this.endDate.getUTCDate()) { this.picker.find(".next").css({ visibility: "hidden" }) } else { this.picker.find(".next").css({ visibility: "visible" }) } break; case 2: if (this.startDate !== -Infinity && i <= this.startDate.getUTCFullYear() && j <= this.startDate.getUTCMonth()) { this.picker.find(".prev").css({ visibility: "hidden" }) } else { this.picker.find(".prev").css({ visibility: "visible" }) } if (this.endDate !== Infinity && i >= this.endDate.getUTCFullYear() && j >= this.endDate.getUTCMonth()) { this.picker.find(".next").css({ visibility: "hidden" }) } else { this.picker.find(".next").css({ visibility: "visible" }) } break; case 3: case 4: if (this.startDate !== -Infinity && i <= this.startDate.getUTCFullYear()) { this.picker.find(".prev").css({ visibility: "hidden" }) } else { this.picker.find(".prev").css({ visibility: "visible" }) } if (this.endDate !== Infinity && i >= this.endDate.getUTCFullYear()) { this.picker.find(".next").css({ visibility: "hidden" }) } else { this.picker.find(".next").css({ visibility: "visible" }) } break } }, mousewheel: function (h) { h.preventDefault(); h.stopPropagation(); if (this.wheelPause) { return } this.wheelPause = true; var g = h.originalEvent; var j = g.wheelDelta; var i = j > 0 ? 1 : (j === 0) ? 0 : -1; if (this.wheelViewModeNavigationInverseDirection) { i = -i } this.showMode(i); setTimeout(c.proxy(function () { this.wheelPause = false }, this), this.wheelViewModeNavigationDelay) }, click: function (k) { k.stopPropagation(); k.preventDefault(); var l = c(k.target).closest("span, td, th, legend"); if (l.is("." + this.icontype)) { l = c(l).parent().closest("span, td, th, legend") } if (l.length == 1) { if (l.is(".disabled")) { this.element.trigger({ type: "outOfRange", date: this.viewDate, startDate: this.startDate, endDate: this.endDate }); return } switch (l[0].nodeName.toLowerCase()) { case "th": switch (l[0].className) { case "switch": this.showMode(1); break; case "prev": case "next": var g = b.modes[this.viewMode].navStep * (l[0].className == "prev" ? -1 : 1); switch (this.viewMode) { case 0: this.viewDate = this.moveHour(this.viewDate, g); break; case 1: this.viewDate = this.moveDate(this.viewDate, g); break; case 2: this.viewDate = this.moveMonth(this.viewDate, g); break; case 3: case 4: this.viewDate = this.moveYear(this.viewDate, g); break }this.fill(); this.element.trigger({ type: l[0].className + ":" + this.convertViewModeText(this.viewMode), date: this.viewDate, startDate: this.startDate, endDate: this.endDate }); break; case "today": var h = new Date(); h = f(h.getFullYear(), h.getMonth(), h.getDate(), h.getHours(), h.getMinutes(), h.getSeconds(), 0); if (h < this.startDate) { h = this.startDate } else { if (h > this.endDate) { h = this.endDate } } this.viewMode = this.startViewMode; this.showMode(0); this._setDate(h); this.fill(); if (this.autoclose) { this.hide() } break }break; case "span": if (!l.is(".disabled")) { var n = this.viewDate.getUTCFullYear(), m = this.viewDate.getUTCMonth(), o = this.viewDate.getUTCDate(), p = this.viewDate.getUTCHours(), i = this.viewDate.getUTCMinutes(), q = this.viewDate.getUTCSeconds(); if (l.is(".month")) { this.viewDate.setUTCDate(1); m = l.parent().find("span").index(l); o = this.viewDate.getUTCDate(); this.viewDate.setUTCMonth(m); this.element.trigger({ type: "changeMonth", date: this.viewDate }); if (this.viewSelect >= 3) { this._setDate(f(n, m, o, p, i, q, 0)) } } else { if (l.is(".year")) { this.viewDate.setUTCDate(1); n = parseInt(l.text(), 10) || 0; this.viewDate.setUTCFullYear(n); this.element.trigger({ type: "changeYear", date: this.viewDate }); if (this.viewSelect >= 4) { this._setDate(f(n, m, o, p, i, q, 0)) } } else { if (l.is(".hour")) { p = parseInt(l.text(), 10) || 0; if (l.hasClass("hour_am") || l.hasClass("hour_pm")) { if (p == 12 && l.hasClass("hour_am")) { p = 0 } else { if (p != 12 && l.hasClass("hour_pm")) { p += 12 } } } this.viewDate.setUTCHours(p); this.element.trigger({ type: "changeHour", date: this.viewDate }); if (this.viewSelect >= 1) { this._setDate(f(n, m, o, p, i, q, 0)) } } else { if (l.is(".minute")) { i = parseInt(l.text().substr(l.text().indexOf(":") + 1), 10) || 0; this.viewDate.setUTCMinutes(i); this.element.trigger({ type: "changeMinute", date: this.viewDate }); if (this.viewSelect >= 0) { this._setDate(f(n, m, o, p, i, q, 0)) } } } } } if (this.viewMode != 0) { var j = this.viewMode; this.showMode(-1); this.fill(); if (j == this.viewMode && this.autoclose) { this.hide() } } else { this.fill(); if (this.autoclose) { this.hide() } } } break; case "td": if (l.is(".day") && !l.is(".disabled")) { var o = parseInt(l.text(), 10) || 1; var n = this.viewDate.getUTCFullYear(), m = this.viewDate.getUTCMonth(), p = this.viewDate.getUTCHours(), i = this.viewDate.getUTCMinutes(), q = this.viewDate.getUTCSeconds(); if (l.is(".old")) { if (m === 0) { m = 11; n -= 1 } else { m -= 1 } } else { if (l.is(".new")) { if (m == 11) { m = 0; n += 1 } else { m += 1 } } } this.viewDate.setUTCFullYear(n); this.viewDate.setUTCMonth(m, o); this.element.trigger({ type: "changeDay", date: this.viewDate }); if (this.viewSelect >= 2) { this._setDate(f(n, m, o, p, i, q, 0)) } } var j = this.viewMode; this.showMode(-1); this.fill(); if (j == this.viewMode && this.autoclose) { this.hide() } break } } }, _setDate: function (g, i) { if (!i || i == "date") { this.date = g } if (!i || i == "view") { this.viewDate = g } this.fill(); this.setValue(); var h; if (this.isInput) { h = this.element } else { if (this.component) { h = this.element.find("input") } } if (h) { h.change(); if (this.autoclose && (!i || i == "date")) { } } this.element.trigger({ type: "changeDate", date: this.date }) }, moveMinute: function (h, g) { if (!g) { return h } var i = new Date(h.valueOf()); i.setUTCMinutes(i.getUTCMinutes() + (g * this.minuteStep)); return i }, moveHour: function (h, g) { if (!g) { return h } var i = new Date(h.valueOf()); i.setUTCHours(i.getUTCHours() + g); return i }, moveDate: function (h, g) { if (!g) { return h } var i = new Date(h.valueOf()); i.setUTCDate(i.getUTCDate() + g); return i }, moveMonth: function (g, h) { if (!h) { return g } var l = new Date(g.valueOf()), p = l.getUTCDate(), m = l.getUTCMonth(), k = Math.abs(h), o, n; h = h > 0 ? 1 : -1; if (k == 1) { n = h == -1 ? function () { return l.getUTCMonth() == m } : function () { return l.getUTCMonth() != o }; o = m + h; l.setUTCMonth(o); if (o < 0 || o > 11) { o = (o + 12) % 12 } } else { for (var j = 0; j < k; j++) { l = this.moveMonth(l, h) } o = l.getUTCMonth(); l.setUTCDate(p); n = function () { return o != l.getUTCMonth() } } while (n()) { l.setUTCDate(--p); l.setUTCMonth(o) } return l }, moveYear: function (h, g) { return this.moveMonth(h, g * 12) }, dateWithinRange: function (g) { return g >= this.startDate && g <= this.endDate }, keydown: function (k) { if (this.picker.is(":not(:visible)")) { if (k.keyCode == 27) { this.show() } return } var m = false, h, n, l, o, g; switch (k.keyCode) { case 27: this.hide(); k.preventDefault(); break; case 37: case 39: if (!this.keyboardNavigation) { break } h = k.keyCode == 37 ? -1 : 1; viewMode = this.viewMode; if (k.ctrlKey) { viewMode += 2 } else { if (k.shiftKey) { viewMode += 1 } } if (viewMode == 4) { o = this.moveYear(this.date, h); g = this.moveYear(this.viewDate, h) } else { if (viewMode == 3) { o = this.moveMonth(this.date, h); g = this.moveMonth(this.viewDate, h) } else { if (viewMode == 2) { o = this.moveDate(this.date, h); g = this.moveDate(this.viewDate, h) } else { if (viewMode == 1) { o = this.moveHour(this.date, h); g = this.moveHour(this.viewDate, h) } else { if (viewMode == 0) { o = this.moveMinute(this.date, h); g = this.moveMinute(this.viewDate, h) } } } } } if (this.dateWithinRange(o)) { this.date = o; this.viewDate = g; this.setValue(); this.update(); k.preventDefault(); m = true } break; case 38: case 40: if (!this.keyboardNavigation) { break } h = k.keyCode == 38 ? -1 : 1; viewMode = this.viewMode; if (k.ctrlKey) { viewMode += 2 } else { if (k.shiftKey) { viewMode += 1 } } if (viewMode == 4) { o = this.moveYear(this.date, h); g = this.moveYear(this.viewDate, h) } else { if (viewMode == 3) { o = this.moveMonth(this.date, h); g = this.moveMonth(this.viewDate, h) } else { if (viewMode == 2) { o = this.moveDate(this.date, h * 7); g = this.moveDate(this.viewDate, h * 7) } else { if (viewMode == 1) { if (this.showMeridian) { o = this.moveHour(this.date, h * 6); g = this.moveHour(this.viewDate, h * 6) } else { o = this.moveHour(this.date, h * 4); g = this.moveHour(this.viewDate, h * 4) } } else { if (viewMode == 0) { o = this.moveMinute(this.date, h * 4); g = this.moveMinute(this.viewDate, h * 4) } } } } } if (this.dateWithinRange(o)) { this.date = o; this.viewDate = g; this.setValue(); this.update(); k.preventDefault(); m = true } break; case 13: if (this.viewMode != 0) { var j = this.viewMode; this.showMode(-1); this.fill(); if (j == this.viewMode && this.autoclose) { this.hide() } } else { this.fill(); if (this.autoclose) { this.hide() } } k.preventDefault(); break; case 9: this.hide(); break }if (m) { var i; if (this.isInput) { i = this.element } else { if (this.component) { i = this.element.find("input") } } if (i) { i.change() } this.element.trigger({ type: "changeDate", date: this.date }) } }, showMode: function (g) { if (g) { var h = Math.max(0, Math.min(b.modes.length - 1, this.viewMode + g)); if (h >= this.minView && h <= this.maxView) { this.element.trigger({ type: "changeMode", date: this.viewDate, oldViewMode: this.viewMode, newViewMode: h }); this.viewMode = h } } this.picker.find(">div").hide().filter(".datetimepicker-" + b.modes[this.viewMode].clsName).css("display", "block"); this.updateNavArrows() }, reset: function (g) { this._setDate(null, "date") }, convertViewModeText: function (g) { switch (g) { case 4: return "decade"; case 3: return "year"; case 2: return "month"; case 1: return "day"; case 0: return "hour" } } }; c.fn.datetimepicker = function (i) { var g = Array.apply(null, arguments); g.shift(); var h; this.each(function () { var l = c(this), k = l.data("datetimepicker"), j = typeof i == "object" && i; if (!k) { l.data("datetimepicker", (k = new e(this, c.extend({}, c.fn.datetimepicker.defaults, j)))) } if (typeof i == "string" && typeof k[i] == "function") { h = k[i].apply(k, g); if (h !== undefined) { return false } } }); if (h !== undefined) { return h } else { return this } }; c.fn.datetimepicker.defaults = {}; c.fn.datetimepicker.Constructor = e; var d = c.fn.datetimepicker.dates = { en: { days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"], daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"], daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], meridiem: ["am", "pm"], suffix: ["st", "nd", "rd", "th"], today: "Today" } }; var b = { modes: [{ clsName: "minutes", navFnc: "Hours", navStep: 1 }, { clsName: "hours", navFnc: "Date", navStep: 1 }, { clsName: "days", navFnc: "Month", navStep: 1 }, { clsName: "months", navFnc: "FullYear", navStep: 1 }, { clsName: "years", navFnc: "FullYear", navStep: 10 }], isLeapYear: function (g) { return (((g % 4 === 0) && (g % 100 !== 0)) || (g % 400 === 0)) }, getDaysInMonth: function (g, h) { return [31, (b.isLeapYear(g) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][h] }, getDefaultFormat: function (g, h) { if (g == "standard") { if (h == "input") { return "yyyy-mm-dd hh:ii" } else { return "yyyy-mm-dd hh:ii:ss" } } else { if (g == "php") { if (h == "input") { return "Y-m-d H:i" } else { return "Y-m-d H:i:s" } } else { throw new Error("Invalid format type.") } } }, validParts: function (g) { if (g == "standard") { return /hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g } else { if (g == "php") { return /[dDjlNwzFmMnStyYaABgGhHis]/g } else { throw new Error("Invalid format type.") } } }, nonpunctuation: /[^ -\/:-@\[-`{-~\t\n\rTZ]+/g, parseFormat: function (j, h) { var g = j.replace(this.validParts(h), "\0").split("\0"), i = j.match(this.validParts(h)); if (!g || !g.length || !i || i.length == 0) { throw new Error("Invalid date format.") } return { separators: g, parts: i } }, parseDate: function (l, u, o, r) { if (l instanceof Date) { var w = new Date(l.valueOf() - l.getTimezoneOffset() * 60000); w.setMilliseconds(0); return w } if (/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(l)) { u = this.parseFormat("yyyy-mm-dd", r) } if (/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(l)) { u = this.parseFormat("yyyy-mm-dd hh:ii", r) } if (/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(l)) { u = this.parseFormat("yyyy-mm-dd hh:ii:ss", r) } if (/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(l)) { var x = /([-+]\d+)([dmwy])/, m = l.match(/([-+]\d+)([dmwy])/g), g, k; l = new Date(); for (var n = 0; n < m.length; n++) { g = x.exec(m[n]); k = parseInt(g[1]); switch (g[2]) { case "d": l.setUTCDate(l.getUTCDate() + k); break; case "m": l = e.prototype.moveMonth.call(e.prototype, l, k); break; case "w": l.setUTCDate(l.getUTCDate() + k * 7); break; case "y": l = e.prototype.moveYear.call(e.prototype, l, k); break } } return f(l.getUTCFullYear(), l.getUTCMonth(), l.getUTCDate(), l.getUTCHours(), l.getUTCMinutes(), l.getUTCSeconds(), 0) } var m = l && l.match(this.nonpunctuation) || [], l = new Date(0, 0, 0, 0, 0, 0, 0), q = {}, t = ["hh", "h", "ii", "i", "ss", "s", "yyyy", "yy", "M", "MM", "m", "mm", "D", "DD", "d", "dd", "H", "HH", "p", "P"], v = { hh: function (s, i) { return s.setUTCHours(i) }, h: function (s, i) { return s.setUTCHours(i) }, HH: function (s, i) { return s.setUTCHours(i == 12 ? 0 : i) }, H: function (s, i) { return s.setUTCHours(i == 12 ? 0 : i) }, ii: function (s, i) { return s.setUTCMinutes(i) }, i: function (s, i) { return s.setUTCMinutes(i) }, ss: function (s, i) { return s.setUTCSeconds(i) }, s: function (s, i) { return s.setUTCSeconds(i) }, yyyy: function (s, i) { return s.setUTCFullYear(i) }, yy: function (s, i) { return s.setUTCFullYear(2000 + i) }, m: function (s, i) { i -= 1; while (i < 0) { i += 12 } i %= 12; s.setUTCMonth(i); while (s.getUTCMonth() != i) { if (isNaN(s.getUTCMonth())) { return s } else { s.setUTCDate(s.getUTCDate() - 1) } } return s }, d: function (s, i) { return s.setUTCDate(i) }, p: function (s, i) { return s.setUTCHours(i == 1 ? s.getUTCHours() + 12 : s.getUTCHours()) } }, j, p, g; v.M = v.MM = v.mm = v.m; v.dd = v.d; v.P = v.p; l = f(l.getFullYear(), l.getMonth(), l.getDate(), l.getHours(), l.getMinutes(), l.getSeconds()); if (m.length == u.parts.length) { for (var n = 0, h = u.parts.length; n < h; n++) { j = parseInt(m[n], 10); g = u.parts[n]; if (isNaN(j)) { switch (g) { case "MM": p = c(d[o].months).filter(function () { var i = this.slice(0, m[n].length), s = m[n].slice(0, i.length); return i == s }); j = c.inArray(p[0], d[o].months) + 1; break; case "M": p = c(d[o].monthsShort).filter(function () { var i = this.slice(0, m[n].length), s = m[n].slice(0, i.length); return i.toLowerCase() == s.toLowerCase() }); j = c.inArray(p[0], d[o].monthsShort) + 1; break; case "p": case "P": j = c.inArray(m[n].toLowerCase(), d[o].meridiem); break } } q[g] = j } for (var n = 0, y; n < t.length; n++) { y = t[n]; if (y in q && !isNaN(q[y])) { v[y](l, q[y]) } } } return l }, formatDate: function (g, m, o, k) { if (g == null) { return "" } var n; if (k == "standard") { n = { yy: g.getUTCFullYear().toString().substring(2), yyyy: g.getUTCFullYear(), m: g.getUTCMonth() + 1, M: d[o].monthsShort[g.getUTCMonth()], MM: d[o].months[g.getUTCMonth()], d: g.getUTCDate(), D: d[o].daysShort[g.getUTCDay()], DD: d[o].days[g.getUTCDay()], p: (d[o].meridiem.length == 2 ? d[o].meridiem[g.getUTCHours() < 12 ? 0 : 1] : ""), h: g.getUTCHours(), i: g.getUTCMinutes(), s: g.getUTCSeconds() }; if (d[o].meridiem.length == 2) { n.H = (n.h % 12 == 0 ? 12 : n.h % 12) } else { n.H = n.h } n.HH = (n.H < 10 ? "0" : "") + n.H; n.P = n.p.toUpperCase(); n.hh = (n.h < 10 ? "0" : "") + n.h; n.ii = (n.i < 10 ? "0" : "") + n.i; n.ss = (n.s < 10 ? "0" : "") + n.s; n.dd = (n.d < 10 ? "0" : "") + n.d; n.mm = (n.m < 10 ? "0" : "") + n.m } else { if (k == "php") { n = { y: g.getUTCFullYear().toString().substring(2), Y: g.getUTCFullYear(), F: d[o].months[g.getUTCMonth()], M: d[o].monthsShort[g.getUTCMonth()], n: g.getUTCMonth() + 1, t: b.getDaysInMonth(g.getUTCFullYear(), g.getUTCMonth()), j: g.getUTCDate(), l: d[o].days[g.getUTCDay()], D: d[o].daysShort[g.getUTCDay()], w: g.getUTCDay(), N: (g.getUTCDay() == 0 ? 7 : g.getUTCDay()), S: (g.getUTCDate() % 10 <= d[o].suffix.length ? d[o].suffix[g.getUTCDate() % 10 - 1] : ""), a: (d[o].meridiem.length == 2 ? d[o].meridiem[g.getUTCHours() < 12 ? 0 : 1] : ""), g: (g.getUTCHours() % 12 == 0 ? 12 : g.getUTCHours() % 12), G: g.getUTCHours(), i: g.getUTCMinutes(), s: g.getUTCSeconds() }; n.m = (n.n < 10 ? "0" : "") + n.n; n.d = (n.j < 10 ? "0" : "") + n.j; n.A = n.a.toString().toUpperCase(); n.h = (n.g < 10 ? "0" : "") + n.g; n.H = (n.G < 10 ? "0" : "") + n.G; n.i = (n.i < 10 ? "0" : "") + n.i; n.s = (n.s < 10 ? "0" : "") + n.s } else { throw new Error("Invalid format type.") } } var g = [], l = c.extend([], m.separators); for (var j = 0, h = m.parts.length; j < h; j++) { if (l.length) { g.push(l.shift()) } g.push(n[m.parts[j]]) } if (l.length) { g.push(l.shift()) } return g.join("") }, convertViewMode: function (g) { switch (g) { case 4: case "decade": g = 4; break; case 3: case "year": g = 3; break; case 2: case "month": g = 2; break; case 1: case "day": g = 1; break; case 0: case "hour": g = 0; break }return g }, headTemplate: '<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>', headTemplateV3: '<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>', contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>', footTemplate: '<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>' }; b.template = '<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">' + b.headTemplate + b.contTemplate + b.footTemplate + '</table></div><div class="datetimepicker-hours"><table class=" table-condensed">' + b.headTemplate + b.contTemplate + b.footTemplate + '</table></div><div class="datetimepicker-days"><table class=" table-condensed">' + b.headTemplate + "<tbody></tbody>" + b.footTemplate + '</table></div><div class="datetimepicker-months"><table class="table-condensed">' + b.headTemplate + b.contTemplate + b.footTemplate + '</table></div><div class="datetimepicker-years"><table class="table-condensed">' + b.headTemplate + b.contTemplate + b.footTemplate + "</table></div></div>"; b.templateV3 = '<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">' + b.headTemplateV3 + b.contTemplate + b.footTemplate + '</table></div><div class="datetimepicker-hours"><table class=" table-condensed">' + b.headTemplateV3 + b.contTemplate + b.footTemplate + '</table></div><div class="datetimepicker-days"><table class=" table-condensed">' + b.headTemplateV3 + "<tbody></tbody>" + b.footTemplate + '</table></div><div class="datetimepicker-months"><table class="table-condensed">' + b.headTemplateV3 + b.contTemplate + b.footTemplate + '</table></div><div class="datetimepicker-years"><table class="table-condensed">' + b.headTemplateV3 + b.contTemplate + b.footTemplate + "</table></div></div>"; c.fn.datetimepicker.DPGlobal = b; c.fn.datetimepicker.noConflict = function () { c.fn.datetimepicker = old; return this }; c(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api", '[data-provide="datetimepicker"]', function (h) { var g = c(this); if (g.data("datetimepicker")) { return } h.preventDefault(); g.datetimepicker("show") }); c(function () { c('[data-provide="datetimepicker-inline"]').datetimepicker() }) }(window.jQuery);
			});// restoring previous datepickers on close!!!!!!

		});
    })();

}}}//end of fnGetOATestCenter


function getDateValue(startDt)
{
var dateVal='';
dateVal=getDoubleDigit(startDt.getDate())+'/' + getDoubleDigit((startDt.getMonth()+1)) + '/'+startDt.getFullYear();
return dateVal;
}
function getTstSetime(h2,m2,durH,durM)
{
var finVal;
var result = (((parseInt(h2)*60)+parseInt(m2))-((parseInt(durH)*60)+parseInt(durM))); //minute conversion
var div = result/60; //hour conversion
var rem = result%60; //remainder
var divVal = div.toString().split(".");
finVal=getDoubleDigit(divVal[0])+":"+getDoubleDigit(rem);
return finVal;
}
function getSBlockTime(h1,m1)
{
var strBtime;
var reslt;
reslt=(((parseInt(h1)*60)+parseInt(m1)) - 1);
var div = reslt/60;
var rem = reslt%60;
var divVal = div.toString().split(".");
strBtime = getDoubleDigit(divVal[0])+":"+getDoubleDigit(rem);
return strBtime;
}
function getTimeInMinutes(h1,m1)
{
var strEtime;
var reslt=((parseInt(h1)*60)+parseInt(m1));
return reslt;
}

function getDoubleDigit(n) {
    if (n < 10)
        return '0' + n;
    else
        return n;
}

function fnSelectTC(tcid) {
    selectedTCDetails = tcid;

}

function fnShowOASBConfirm(subscriptionId) {

    $('#OASBconfirm').html('');

    for (var i = 0; i < OATCDetails.length; i++) {
        if (OATCDetails[i].tcId == selectedTCDetails) {

            var newDiv = "";
            newDiv = "<div class=\"col-md-8\">";
            newDiv = newDiv + "<div class=\"selCnfrmTabDetCont\">";
            newDiv = newDiv + "<div class=\"selCnfrmTabDetContHead\" data-staticKey=\"Selected Details\">Selected Details</div>";
            newDiv = newDiv + "<div class=\"selCnfrmTabDet\">" +
                "<input type = \"hidden\" id = \"OAtcId\" value=\"" + OATCDetails[i].tcId + "\">";
            newDiv = newDiv + "<div class=\"selCnfrmTabDetHead\"><span ng-bind =\"tcName" + 0 + "\">" + OATCDetails[i].tcName + "</div>";
            newDiv = newDiv + "<div class=\"selCnfrmTabDetSub\">";
            newDiv = newDiv + "<p>" + OATCDetails[i].tcAddress + "</p>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div class=\"selCnfrmTabDetSub\">";
            newDiv = newDiv + "<p>Date : " + $('#selectedDate').html() + "</p>";
            newDiv = newDiv + "</div>";
            newDiv = newDiv + "<div id=\"Time\" class=\"selCnfrmTabDetSub\">Start Time : <span id = \"slotstarttime\">" + $('#sTHrs').html() + ":" + $('#sTMin').html() + ":" + $('#sTSec').html() + "</span><br />";
            newDiv = newDiv + "End Time : <span id = \"slotendtime\">" + $('#eTHrs').html() + ":" + $('#eTMin').html() + ":" + $('#eTSec').html() + "</span></div>";
            newDiv = newDiv + "<div class=\"clear\"></div>";
            newDiv = newDiv + "</div>";// end of selCnfrmTabDet
            newDiv = newDiv + "</div>";//end of selCnfrmTabDetCont
            if($('#identificationcards').val()){
            newDiv = newDiv + "<div class=\"selCnfrmTabNote\">";
            newDiv = newDiv + "<p data-staticKey=\"NOTE\">NOTE</p>";
            newDiv = newDiv + "<p><span data-staticKey=\"Identification Card accepted at the Test Center\">Identification Card accepted at the Test Center</span> : " + $('#identificationcards').val() + "</p>";
            newDiv = newDiv + "</div>";
             $('#confirmPop .modal-body .confTxt').html('Please carry any of the mentioned ID Cards at the test center');
            }else {
             $('#confirmPop .modal-body .confTxt').html('Close popup to see more details.');
            }
            newDiv = newDiv + "</div>";// end of col-md-8
            newDiv = newDiv + "<div class=\"col-md-12\">";
            newDiv = newDiv + "<a data-ht-tab=\"3\" class=\"btn btn-lg btn-default selCourseBack\">Back</a>";
            newDiv = newDiv + "<a class=\"btn btn-lg btn-default selCourseCancel\" data-dismiss=\"modal\">Cancel</a>";
            //newDiv = newDiv + "<a onclick=\"fnConfirmOATC(\'" + subscriptionId + "\');\" class=\"btn btn-lg btn-success selectcoursesubmitt\" data-toggle=\"modal\" data-target=\"#confirmPop\" data-staticKey=\"Confirm\">Confirm</a>";//  
            newDiv = newDiv + "<a onclick=\"fnConfirmOATC(\'" + subscriptionId + "\'); fnGetOnlineAssessmentDataRefresh() ; \" class=\"btn btn-lg btn-success selectcoursesubmitt\" data-staticKey=\"Confirm\">Confirm</a>";//
            newDiv = newDiv + "</div>";// end of col-md-12
        }
    }



    $('#OASBconfirm').append(newDiv);

}



function fnConfirmOATC(subscriptionId) {
    //alert('Hi');
    var assessId = $('#OASBAssessId').val();
    var countryId = $('#OACountryDD').val();
    var stateId = $('#OAStateDD').val();
    var cityId = $('#OACityDD').val();
    var orgID = document.getElementById('orgId').value;
    var checksum = $('#checksum').val();
    var entityId = $('#entityId').val();
    var formId = $('#formId').val();
    var enrollmentId = $('#formId').val();
    var sessChk = $('#sessChk').val();

    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;
    var candidateId = app_seq_no;


    var tcId = $('#OAtcId').val();
    var OASBdate = $('.yourSelection').html().split('/');
    OASBdate = OASBdate[2] + '-' + OASBdate[1] + '-' + OASBdate[0];
    var slotStartTime = OASBdate + " " + $('#slotstarttime').html();//$()
    var slotEndTime = OASBdate + " " + $('#slotendtime').html();//$()
    $.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
            orgID: orgID,
            checksum: checksum,
            formId: formId,
            entityId: entityId,
            actionTaken: 'bookCandidateSlot',
            assessmentId: assessId,
            countryId: countryId,
            stateId: stateId,
            cityId: cityId,
            candidateId: candidateId,
            subscriptionId: subscriptionId,
            enrollmentId: enrollmentId,
            slotStartTime: slotStartTime,
            slotEndTime: slotEndTime,
            tcId: tcId,
            sessChk: sessChk
        },
        dataType: "json",
        success: function (result) {
            if (result == undefined || result == null || result == "null") {
                var msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; font-size: 14px;\" data-staticKey=\"No State list \">No state list.</div></div>"
                jQuery('selstate').html(msgDiv);
            }
            if (result == "SessionTimeout") {
                location.href("/EForms/loginAction.do?subAction=ViewLoginPage&formId=" + formId + "&orgId=" + 726);
            }
            else {
                console.log("final status"+result);
                if (result == 'true' || result == true)
                    $('#confirmPop').modal('show');
                else
                	 $('#confirmClose').modal('show');
                	

            }

        },
        error: function (jqXHR, textStatus) {
            console.log('error');
        }
    });//end of ajax




}

function DD() {

    $(".dashboardDrop .dropdown-menu li").click(function () {
        $(".dashboardDrop .dropdown-menu li").removeClass('active');
        $(this).addClass('active');

    });

    $(".dashboardDrop .dropdown-menu li a").click(function () {

        $(".sortgroup .btn span.valueDrop").text($(this).text());
        $(".sortgroup .btn span.valueDrop").val($(this).text());
        $(this).parents(".dashboardDrop").removeClass("open");

    });

    //attaching events for attempts
   $(document).on('click', '.attemptscrolldiv ul li', function (e) {
       $(".attemptscrolldiv ul li").removeClass('active');
       $(this).addClass('active');
   });


}


function subscriptionDashboardHtml(serviceId) {
    var http_request = fnGetXMLHttpObject();

    var field = document.getElementById("loginField").value;
    var orgID = document.getElementById('orgId').value;
    var formID = document.getElementById('formId').value;
    var checksum = document.getElementById('checksum').value;
    var applnSequenceField = document.getElementById('applnSequenceField').value;
    var app_seq_no = document.getElementById(applnSequenceField).value;
    var entId = document.getElementById('entityId').value;
    var sessChk = document.getElementById('sessChk').value;
    var loginid = document.getElementById(field + '_div').innerHTML;

    $('#organization_tabs').append('<input type="hidden" name="serviceIdForTab" id="serviceIdForTab" />');
    document.getElementById("serviceIdForTab").value = serviceId;
    var parameters = "orgId=" + orgID + "&formId=" + formID + "&checkSum=" + encodeURI(checksum) + "&appSeqNo=" + app_seq_no + "&entId=" + entId + "&loginid=" + loginid + "&applnSequenceField=" + applnSequenceField + "&sessChk=" + sessChk + "&serviceId=" + serviceId + "&subAction=subscriptionDashboardHtml";
    //	if(searchInput_LXVal!=undefined && searchInput_LXVal!="")
    //		parameters=parameters+"&searchValue="+encodeURI(searchInput_LXVal)
    if (http_request != null) {
        $('#loader-indicator').show();
        var pValidationServlet = "/EForms/PVCConfigurationServlet";
        http_request.open('POST', pValidationServlet, true);
        http_request.onreadystatechange = function () { fnPopulateSubscriptionDashboard(http_request, serviceId); };
        http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        http_request.send(parameters);
    }


}



function fnPopulateSubscriptionDashboard(http_request, serviceId) {
    $('#subscriptionTab_' + serviceId).html('');
    if (http_request.readyState == 4) {
        if (http_request.status == 200) {
            if (http_request.responseText != null) {
                data = http_request.responseText;

                $('#loader-indicator').hide();
                $('#subscriptionTab_' + serviceId).append(data);
            }
        }
    }
}


function validateData(vals)
{
	var retVal=false;
	if(vals!=null && !(vals =='') && vals != undefined && (vals == "true" || vals == true))
	retVal=true;

	return retVal;
	
}


function fnGenerateHallCertScoreTicket(orgId,assessmentId,candidateId,subscriptionId,enrollmentId,attemptNo,actionType)
{
   var sessChk = $('#sessChk').val();
   // var tcId = $('#OAtcId').val();
   var checksum = $('#checksum').val();
   var entityId = $('#entityId').val();
   var formId = $('#formId').val();

	$.ajax({
        type: "POST",
        url: "/EForms/LaunchMock",
        data: {
        	orgID:orgId,
        	assessmentId:assessmentId,
        	formId: formId,
        	checksum: checksum,
            entityId: entityId,
        	candidateId:candidateId,
        	subscriptionId:subscriptionId,
        	enrollmentId:enrollmentId,
        	attemptNo:attemptNo,
        	actionType:actionType,
        	sessChk: sessChk,
        	actionTaken: 'getHallCertScoreTicket'
     	   },
        dataType: "text",
        success: function(result)
        {
        	if(!result || result=="null"){
        		//var msgDiv="<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; width:280px;font-size: 14px;\" data-staticKey=\"No State list \">No state list.</div></div>"
      			//  jQuery('selstate').html(msgDiv);
        	}
        	if(result=="SessionTimeout"){
        		var str=urlappend();
        		location.href("/EForms/loginAction.do?subAction=ViewLoginPage&formId="+formId+"&orgId="+orgID+str);
        	}
        	else
        	{
        		console.log(result);
        		if(result.indexOf("Hallticket is not yet co")!=-1)
        			{
        			showError("Hallticket is not yet configured.");
        			}
        		else 
        			{	
        			$("<form action='/EForms/LaunchMock' method ='post'><input type='hidden' name='actionTaken' value='downloadHallCertScore'><input type='hidden' name='checksum' value='"+checksum+"'><input type='hidden' name='pdfPath' value='"+result+"'><input type='hidden' name='sessChk' value='"+sessChk+"'><input type='hidden' name='orgID' value='"+orgId+"'><input type='hidden' name='formId' value='"+formId+"'></form>").appendTo('body').submit().remove();
        			}
        	}
        },
        error: function(xhr, err, ex){
            showError("Could not generate the Hall Ticket.","Error",3000);
        }
	});

return false;

}

/*	
function validateTimeVal(hrVal,minVal,newHr,newMin,hour,minute)
{
	
	if((getTimeInMinutes(hrVal,minVal)<=getTimeInMinutes(newHr,newMin))&&(getTimeInMinutes(newHr,newMin)<=getTimeInMinutes(hour,minute)))
	return true;
	else 
	return false;
	
}
		
function getDayDesc(dayV)
{
           hour=0;
           minute=0;
		   hrVal=0;
		   minVal=0;
		   hr=0;
		   min=0;
		   newHr=0;
		   newMin=0;
		   valPres=false;
		   valBook=false;
		   var eBlockTime=''; 
		   var msgDiv = "";
		   var currVal = new Date(dayV.getFullYear(),dayV.getMonth(),dayV.getDate());
		   var bukAlval = new Date(bookAllowTill.getFullYear(),bookAllowTill.getMonth(),bookAllowTill.getDate());
           daySDesc=daysStime[dayV.getDay()];
           dayEDesc=daysEtime[dayV.getDay()];
           
           
           if(daySDesc in resultArr) 
			{
            var arr=resultArr[daySDesc].split(":");
			hrVal=arr[0];
			minVal=arr[1];
	        if(parseInt(hrVal)>0 ||parseInt(minVal)>0)
			{
			var sBlockTime = getSBlockTime(parseInt(hrVal),parseInt(minVal));		
			hr = sBlockTime.split(":")[0];
			min =  sBlockTime.split(":")[1];
			}
			}
           
           if(dayEDesc in resultArr) 
			{
			var arr=resultArr[dayEDesc].split(":");	
			hVal=getDoubleDigit(parseInt(arr[0]));
			mVal=getDoubleDigit(parseInt(arr[1]));
			if(hVal>0 ||mVal>0)
			{
			eBlockTime =getTstSetime(hVal,mVal,durationH,durationM);
			hour = eBlockTime.split(":")[0];
			minute =  eBlockTime.split(":")[1]; 
            }
           
			}
          if(currVal.getTime()<bukAlval.getTime()) // to decide start time
	       {
          newHr = nowDate.getHours();
          newMin= nowDate.getMinutes();
          
           if (validateTimeVal(hrVal,minVal,newHr,newMin,hour,minute))
           {
		   hrVal=newHr;
		   minVal=newMin;
		   var sBlockTime = getSBlockTime(parseInt(hrVal),parseInt(minVal));		
			hr = sBlockTime.split(":")[0];
			min =  sBlockTime.split(":")[1];
		   msgDiv ="<div class=\"selCourseContSubHead\" data-staticKey=\Select a date and slot to book a product demo\">Select a date and slot to book a product demo</div>"; 
	       }
           else
           {
        	   valBook=true; 
        msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; color: red; font-family:  OpenSans-semebold; font-size: 16px;\" data-staticKey=\"TimeSlot \">Time Slot available between " +hrVal+":"+minVal+" and "+hVal+":"+mVal+"</div></div>";	 
           } 
	      
	     }   
          
          else if(currVal.getTime()==bukAlval.getTime()) //to compare day and decide end time
		   {
		          newHr = bookAllowTill.getHours();
		          newMin= bookAllowTill.getMinutes();
		          
		           if (validateTimeVal(hrVal,minVal,newHr,newMin,hour,minute))
		           {
		        	   hour=newHr;
		        	   minute=newMin;
		        	   msgDiv ="<div class=\"selCourseContSubHead\" data-staticKey=\Select a date and slot to book a product demo\">Select a date and slot to book a product demo</div>";
			       }
		           else
		           {
		         valBook=true; 
		         msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; color: red; font-family:  OpenSans-semebold; font-size: 16px;\" data-staticKey=\"TimeSlotSec \">Time Slot available between " +hrVal+":"+minVal+" and "+hVal+":"+mVal+"</div></div>";
		           } 
		          
			       
		   }
          
          else  if(currVal.getTime()>bukAlval.getTime())
        	  {
        	  valBook=true; 
        	 msgDiv = "<div class=\"desc-heading margintop20\"><div style=\"margin: 0 auto; color: red; font-family:  OpenSans-semebold; font-size: 16px;\" data-staticKey=\"TimeSlotNoBooking \">Booking Not Allowed</div></div>";
        	  }
          
 
    valPres=true;	
}

*/



function urlappend(){
	var url_string=window.location.href;
	var sub=url_string.split("?");
	var strng;
	if(sub[1]!= undefined &&  sub[1]!= "")
	strng= sub[1];
	var str="";
	if(strng!= undefined &&  strng!= ""){
	 var arr = strng.split("&");
	 for(var i=0;i<arr.length;i++){
		 var arr1=arr[i].split("=");
		 if(arr1[0]=="orgId" || arr1[0]=="p_orgId_formId_decrypt" ||arr1[0]=="subAction" ||arr1[0]=="formId" ||arr1[0]=="sessChk" ||arr1=="userid" ||arr1[0]=="entityId" ||arr1[0]=="appSeqForValidation" ||arr1[0]=="app_seq_no" ||arr1[0]=="listFormId" ||arr1[0]=="checksum" ||arr1[0]=="applnSequenceField"){
			 continue;
		 }
		 else{
			 str=str+"&"+arr[i];
		 }
	 }
}
	return str;
}

function subscriptionLaunch(urlToLaunch) {
    var field = document.getElementById("loginField").value;
    var loginid = document.getElementById(field + '_div').innerHTML;
    //var subscription_id = document.getElementById("serviceIdForTab").value;
    var subscription_id =$('[class^=panel-body]:visible').find('[name*=serviceIdForTab]').val();
    if(subscription_id==undefined)
    {
    var subscription_id = document.getElementById("serviceIdForTab").value;
    }
    var orgId = document.getElementById("orgId").value;
    var http_request = fnGetXMLHttpObject();
    var parameters = "loginid=" + loginid + "&url=" + encodeURIComponent(urlToLaunch) + "&orgId=" + orgId + "&subscription_id=" + subscription_id + "&subAction=subscriptionLaunchURL";
    var pValidationServlet = "/EForms/PVCConfigurationServlet?" + parameters;
    //alert(pValidationServlet);
    window.launchLXURL("POST", pValidationServlet, "", "_blank");

}


function fnGeneratePdf(identifier){

	var formid = document.getElementById('formId').value;
	var orgid = document.getElementById('orgId').value;
	var applnSequenceField = document.getElementById('applnSequenceField').value;
	var app_seq_no = document.getElementById(applnSequenceField).value;
	var checksum=document.getElementById('checksum').value;
	checksum=encodeURIComponent(checksum);
	var sessChk=document.getElementById('sessChk').value;
	var entityId=document.getElementById('entityId').value;
	var eicuListing="";
	if(document.getElementById('eicuListing')){
		eicuListing=document.getElementById('eicuListing').value;
	}
	var URL =  "/EForms/GeneratePDF?formId="+formid+"&orgId="+orgid+"&appSeqNo=" + app_seq_no + "&subAction=generatePDF&identifier=" + identifier +"&checksum="+checksum+"&entityId="+entityId+"&sessChk="+sessChk+"&eicuListing="+eicuListing;
	window.open(URL,'','toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes');
}



function LBADashboardPopulate()
{
	 var orgID = document.getElementById('orgId').value;
     var formID = document.getElementById('formId').value;
     var applnSequenceField = document.getElementById('applnSequenceField').value;
     var app_seq_no = document.getElementById(applnSequenceField).value;
     
//	$.post('/EForms/PVCConfigurationServlet?subAction=LBADashboardPopulate&app_seq_no='+app_seq_no+'&formId='+formID+'&orgId='+orgID)
//	.done(function (data) {
//		
//		window.open(data, '_blank');
//	})
     
   

$.ajax({ 
							   type: "POST",
							   url: "/EForms/PVCConfigurationServlet",
							   data: { 
								   subAction: 'LBADashboardPopulate',
								   orgId: orgID,
								   app_seq_no: app_seq_no,
								   formId: formID
								   },
							   dataType: "text",
							   success: function(returnFromLBA)
							   {
								
								   if(returnFromLBA != null && returnFromLBA != "")
								   {
								   //window.open(returnFromLBA, '_blank');
					                    setTimeout('alterIframe("' + returnFromLBA + '")',300);
									}
								},
							});



	
	/*var ifrm = document.createElement("iframe");
	url='/EForms/PVCConfigurationServlet?subAction=LBADashboardPopulate&app_seq_no='+app_seq_no+'&formId='+formID+'&orgId='+orgID;*/
	//ifrm.setAttribute("src",url);
	

}

$(function () {
  var myEventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
             var myEventListener = window[myEventMethod];
             var myEventMessage = myEventMethod == "attachEvent" ? "onmessage" : "message";
             myEventListener(myEventMessage, function (e) {
                 if (e.data === 'scrollToTop') {
                    $('html, body').animate({
                         scrollTop : 0
                      }, 700);
                
                  } else if (e.data === parseInt(e.data)) {
                     console.log("e.data : " + e.data);
                    
                     document.getElementById('consent-popup').style.height = e.data + "px";
                     document.getElementById("consent-popup").setAttribute("scrolling", "no")
                
                 }
                
             }, false);
			 
			 });


function alterIframe(url)
{
var ifrm = document.createElement("iframe");
ifrm.setAttribute("src",url);
ifrm.setAttribute("method","POST");
	ifrm.setAttribute("id","consent-popup");
	ifrm.setAttribute("frameborder", "0");
	ifrm.style.width = "100%";	
    //ifrm.style.height =  "500px";	
    ifrm.onload = function()  
   {
   ifrm.style.height = 
   ifrm.contentWindow.document.body.scrollHeight + 'px'; 
   
   }
	console.log("cntFrag"+cntFrag);
	console.log("Idtab"+Idtab);
	$("#"+Idtab+"_Tab_Description").hide();
	if (!$("#consent-popup").length)
	 $("#subscriptionTab_"+cntFrag).append(ifrm);

}